var Dt=Object.defineProperty;var Bt=(n,e,t)=>e in n?Dt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Me=(n,e,t)=>(Bt(n,typeof e!="symbol"?e+"":e,t),t);import{r as xt,a as Vt,j as Ht,C as tt,e as nt,d as pe,b as ve,w as Z,o as rt,n as it,c as Ft,f as A,M as _t,g as st,B as fe,h as Ke,N as Ut,m as Ge,i as Wt,s as vt,k as qt,l as Kt,u as Gt,p as Jt,q as Xt,t as Yt,v as kt,x as J,I as Tt,y as Je,z as Le,A as Zt,D as Ue,E as Qt,F as en,R as tn,_ as nn}from"./index-d8510e85.js";var rn="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z",sn="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z",on="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",at={exports:{}},ut;function ln(){return ut||(ut=1,function(n,e){(function(t){t(xt())})(function(t){t.defineMode("css",function($,z){var X=z.inline;z.propertyKeywords||(z=t.resolveMode("text/css"));var Q=$.indentUnit,te=z.tokenHooks,Ee=z.documentTypes||{},De=z.mediaTypes||{},Oe=z.mediaFeatures||{},je=z.mediaValueKeywords||{},me=z.propertyKeywords||{},ge=z.nonStandardPropertyKeywords||{},Be=z.fontProperties||{},Ve=z.counterDescriptors||{},Ne=z.colorKeywords||{},ye=z.valueKeywords||{},re=z.allowNested,He=z.lineComment,Fe=z.supportsAtComponent===!0,Ae=$.highlightNonStandardPropertyKeywords!==!1,v,s;function h(d,x){return v=x,d}function T(d,x){var f=d.next();if(te[f]){var B=te[f](d,x);if(B!==!1)return B}if(f=="@")return d.eatWhile(/[\w\\\-]/),h("def",d.current());if(f=="="||(f=="~"||f=="|")&&d.eat("="))return h(null,"compare");if(f=='"'||f=="'")return x.tokenize=C(f),x.tokenize(d,x);if(f=="#")return d.eatWhile(/[\w\\\-]/),h("atom","hash");if(f=="!")return d.match(/^\s*\w*/),h("keyword","important");if(/\d/.test(f)||f=="."&&d.eat(/\d/))return d.eatWhile(/[\w.%]/),h("number","unit");if(f==="-"){if(/[\d.]/.test(d.peek()))return d.eatWhile(/[\w.%]/),h("number","unit");if(d.match(/^-[\w\\\-]*/))return d.eatWhile(/[\w\\\-]/),d.match(/^\s*:/,!1)?h("variable-2","variable-definition"):h("variable-2","variable");if(d.match(/^\w+-/))return h("meta","meta")}else return/[,+>*\/]/.test(f)?h(null,"select-op"):f=="."&&d.match(/^-?[_a-z][_a-z0-9-]*/i)?h("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(f)?h(null,f):d.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(d.current())&&(x.tokenize=N),h("variable callee","variable")):/[\w\\\-]/.test(f)?(d.eatWhile(/[\w\\\-]/),h("property","word")):h(null,null)}function C(d){return function(x,f){for(var B=!1,ne;(ne=x.next())!=null;){if(ne==d&&!B){d==")"&&x.backUp(1);break}B=!B&&ne=="\\"}return(ne==d||!B&&d!=")")&&(f.tokenize=null),h("string","string")}}function N(d,x){return d.next(),d.match(/^\s*[\"\')]/,!1)?x.tokenize=null:x.tokenize=C(")"),h(null,"(")}function D(d,x,f){this.type=d,this.indent=x,this.prev=f}function I(d,x,f,B){return d.context=new D(f,x.indentation()+(B===!1?0:Q),d.context),f}function R(d){return d.context.prev&&(d.context=d.context.prev),d.context.type}function W(d,x,f){return K[f.context.type](d,x,f)}function q(d,x,f,B){for(var ne=B||1;ne>0;ne--)f.context=f.context.prev;return W(d,x,f)}function ae(d){var x=d.current().toLowerCase();ye.hasOwnProperty(x)?s="atom":Ne.hasOwnProperty(x)?s="keyword":s="variable"}var K={};return K.top=function(d,x,f){if(d=="{")return I(f,x,"block");if(d=="}"&&f.context.prev)return R(f);if(Fe&&/@component/i.test(d))return I(f,x,"atComponentBlock");if(/^@(-moz-)?document$/i.test(d))return I(f,x,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(d))return I(f,x,"atBlock");if(/^@(font-face|counter-style)/i.test(d))return f.stateArg=d,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(d))return"keyframes";if(d&&d.charAt(0)=="@")return I(f,x,"at");if(d=="hash")s="builtin";else if(d=="word")s="tag";else{if(d=="variable-definition")return"maybeprop";if(d=="interpolation")return I(f,x,"interpolation");if(d==":")return"pseudo";if(re&&d=="(")return I(f,x,"parens")}return f.context.type},K.block=function(d,x,f){if(d=="word"){var B=x.current().toLowerCase();return me.hasOwnProperty(B)?(s="property","maybeprop"):ge.hasOwnProperty(B)?(s=Ae?"string-2":"property","maybeprop"):re?(s=x.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(s+=" error","maybeprop")}else return d=="meta"?"block":!re&&(d=="hash"||d=="qualifier")?(s="error","block"):K.top(d,x,f)},K.maybeprop=function(d,x,f){return d==":"?I(f,x,"prop"):W(d,x,f)},K.prop=function(d,x,f){if(d==";")return R(f);if(d=="{"&&re)return I(f,x,"propBlock");if(d=="}"||d=="{")return q(d,x,f);if(d=="(")return I(f,x,"parens");if(d=="hash"&&!/^#([0-9a-fA-F]{3,4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/.test(x.current()))s+=" error";else if(d=="word")ae(x);else if(d=="interpolation")return I(f,x,"interpolation");return"prop"},K.propBlock=function(d,x,f){return d=="}"?R(f):d=="word"?(s="property","maybeprop"):f.context.type},K.parens=function(d,x,f){return d=="{"||d=="}"?q(d,x,f):d==")"?R(f):d=="("?I(f,x,"parens"):d=="interpolation"?I(f,x,"interpolation"):(d=="word"&&ae(x),"parens")},K.pseudo=function(d,x,f){return d=="meta"?"pseudo":d=="word"?(s="variable-3",f.context.type):W(d,x,f)},K.documentTypes=function(d,x,f){return d=="word"&&Ee.hasOwnProperty(x.current())?(s="tag",f.context.type):K.atBlock(d,x,f)},K.atBlock=function(d,x,f){if(d=="(")return I(f,x,"atBlock_parens");if(d=="}"||d==";")return q(d,x,f);if(d=="{")return R(f)&&I(f,x,re?"block":"top");if(d=="interpolation")return I(f,x,"interpolation");if(d=="word"){var B=x.current().toLowerCase();B=="only"||B=="not"||B=="and"||B=="or"?s="keyword":De.hasOwnProperty(B)?s="attribute":Oe.hasOwnProperty(B)?s="property":je.hasOwnProperty(B)?s="keyword":me.hasOwnProperty(B)?s="property":ge.hasOwnProperty(B)?s=Ae?"string-2":"property":ye.hasOwnProperty(B)?s="atom":Ne.hasOwnProperty(B)?s="keyword":s="error"}return f.context.type},K.atComponentBlock=function(d,x,f){return d=="}"?q(d,x,f):d=="{"?R(f)&&I(f,x,re?"block":"top",!1):(d=="word"&&(s="error"),f.context.type)},K.atBlock_parens=function(d,x,f){return d==")"?R(f):d=="{"||d=="}"?q(d,x,f,2):K.atBlock(d,x,f)},K.restricted_atBlock_before=function(d,x,f){return d=="{"?I(f,x,"restricted_atBlock"):d=="word"&&f.stateArg=="@counter-style"?(s="variable","restricted_atBlock_before"):W(d,x,f)},K.restricted_atBlock=function(d,x,f){return d=="}"?(f.stateArg=null,R(f)):d=="word"?(f.stateArg=="@font-face"&&!Be.hasOwnProperty(x.current().toLowerCase())||f.stateArg=="@counter-style"&&!Ve.hasOwnProperty(x.current().toLowerCase())?s="error":s="property","maybeprop"):"restricted_atBlock"},K.keyframes=function(d,x,f){return d=="word"?(s="variable","keyframes"):d=="{"?I(f,x,"top"):W(d,x,f)},K.at=function(d,x,f){return d==";"?R(f):d=="{"||d=="}"?q(d,x,f):(d=="word"?s="tag":d=="hash"&&(s="builtin"),"at")},K.interpolation=function(d,x,f){return d=="}"?R(f):d=="{"||d==";"?q(d,x,f):(d=="word"?s="variable":d!="variable"&&d!="("&&d!=")"&&(s="error"),"interpolation")},{startState:function(d){return{tokenize:null,state:X?"block":"top",stateArg:null,context:new D(X?"block":"top",d||0,null)}},token:function(d,x){if(!x.tokenize&&d.eatSpace())return null;var f=(x.tokenize||T)(d,x);return f&&typeof f=="object"&&(v=f[1],f=f[0]),s=f,v!="comment"&&(x.state=K[x.state](v,d,x)),s},indent:function(d,x){var f=d.context,B=x&&x.charAt(0),ne=f.indent;return f.type=="prop"&&(B=="}"||B==")")&&(f=f.prev),f.prev&&(B=="}"&&(f.type=="block"||f.type=="top"||f.type=="interpolation"||f.type=="restricted_atBlock")?(f=f.prev,ne=f.indent):(B==")"&&(f.type=="parens"||f.type=="atBlock_parens")||B=="{"&&(f.type=="at"||f.type=="atBlock"))&&(ne=Math.max(0,f.indent-Q))),ne},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:He,fold:"brace"}});function r($){for(var z={},X=0;X<$.length;++X)z[$[X].toLowerCase()]=!0;return z}var i=["domain","regexp","url","url-prefix"],o=r(i),a=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],l=r(a),c=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme","dynamic-range","video-dynamic-range"],p=r(c),u=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light","standard","high"],y=r(u),_=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],g=r(_),m=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],w=r(m),k=["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],S=r(k),j=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],M=r(j),E=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],P=r(E),F=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","conic-gradient","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-play-button","media-slider","media-sliderthumb","media-volume-slider","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeating-conic-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],V=r(F),H=i.concat(a).concat(c).concat(u).concat(_).concat(m).concat(E).concat(F);t.registerHelper("hintWords","css",H);function U($,z){for(var X=!1,Q;(Q=$.next())!=null;){if(X&&Q=="/"){z.tokenize=null;break}X=Q=="*"}return["comment","comment"]}t.defineMIME("text/css",{documentTypes:o,mediaTypes:l,mediaFeatures:p,mediaValueKeywords:y,propertyKeywords:g,nonStandardPropertyKeywords:w,fontProperties:S,counterDescriptors:M,colorKeywords:P,valueKeywords:V,tokenHooks:{"/":function($,z){return $.eat("*")?(z.tokenize=U,U($,z)):!1}},name:"css"}),t.defineMIME("text/x-scss",{mediaTypes:l,mediaFeatures:p,mediaValueKeywords:y,propertyKeywords:g,nonStandardPropertyKeywords:w,colorKeywords:P,valueKeywords:V,fontProperties:S,allowNested:!0,lineComment:"//",tokenHooks:{"/":function($,z){return $.eat("/")?($.skipToEnd(),["comment","comment"]):$.eat("*")?(z.tokenize=U,U($,z)):["operator","operator"]},":":function($){return $.match(/^\s*\{/,!1)?[null,null]:!1},$:function($){return $.match(/^[\w-]+/),$.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function($){return $.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),t.defineMIME("text/x-less",{mediaTypes:l,mediaFeatures:p,mediaValueKeywords:y,propertyKeywords:g,nonStandardPropertyKeywords:w,colorKeywords:P,valueKeywords:V,fontProperties:S,allowNested:!0,lineComment:"//",tokenHooks:{"/":function($,z){return $.eat("/")?($.skipToEnd(),["comment","comment"]):$.eat("*")?(z.tokenize=U,U($,z)):["operator","operator"]},"@":function($){return $.eat("{")?[null,"interpolation"]:$.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)?!1:($.eatWhile(/[\w\\\-]/),$.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),t.defineMIME("text/x-gss",{documentTypes:o,mediaTypes:l,mediaFeatures:p,propertyKeywords:g,nonStandardPropertyKeywords:w,fontProperties:S,counterDescriptors:M,colorKeywords:P,valueKeywords:V,supportsAtComponent:!0,tokenHooks:{"/":function($,z){return $.eat("*")?(z.tokenize=U,U($,z)):!1}},name:"css",helperType:"gss"})})}()),at.exports}(function(n,e){(function(t){t(xt(),Vt(),Ht,ln())})(function(t){var r={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function i(y,_,g){var m=y.current(),w=m.search(_);return w>-1?y.backUp(m.length-w):m.match(/<\/?$/)&&(y.backUp(m.length),y.match(_,!1)||y.match(m)),g}var o={};function a(y){var _=o[y];return _||(o[y]=new RegExp("\\s+"+y+`\\s*=\\s*('|")?([^'"]+)('|")?\\s*`))}function l(y,_){var g=y.match(a(_));return g?/^\s*(.*?)\s*$/.exec(g[2])[1]:""}function c(y,_){return new RegExp((_?"^":"")+"</\\s*"+y+"\\s*>","i")}function p(y,_){for(var g in y)for(var m=_[g]||(_[g]=[]),w=y[g],k=w.length-1;k>=0;k--)m.unshift(w[k])}function u(y,_){for(var g=0;g<y.length;g++){var m=y[g];if(!m[0]||m[1].test(l(_,m[0])))return m[2]}}t.defineMode("htmlmixed",function(y,_){var g=t.getMode(y,{name:"xml",htmlMode:!0,multilineTagIndentFactor:_.multilineTagIndentFactor,multilineTagIndentPastTag:_.multilineTagIndentPastTag,allowMissingTagName:_.allowMissingTagName}),m={},w=_&&_.tags,k=_&&_.scriptTypes;if(p(r,m),w&&p(w,m),k)for(var S=k.length-1;S>=0;S--)m.script.unshift(["type",k[S].matches,k[S].mode]);function j(M,E){var P=g.token(M,E.htmlState),F=/\btag\b/.test(P),V;if(F&&!/[<>\s\/]/.test(M.current())&&(V=E.htmlState.tagName&&E.htmlState.tagName.toLowerCase())&&m.hasOwnProperty(V))E.inTag=V+" ";else if(E.inTag&&F&&/>$/.test(M.current())){var H=/^([\S]+) (.*)/.exec(E.inTag);E.inTag=null;var U=M.current()==">"&&u(m[H[1]],H[2]),$=t.getMode(y,U),z=c(H[1],!0),X=c(H[1],!1);E.token=function(Q,te){return Q.match(z,!1)?(te.token=j,te.localState=te.localMode=null,null):i(Q,X,te.localMode.token(Q,te.localState))},E.localMode=$,E.localState=t.startState($,g.indent(E.htmlState,"",""))}else E.inTag&&(E.inTag+=M.current(),M.eol()&&(E.inTag+=" "));return P}return{startState:function(){var M=t.startState(g);return{token:j,inTag:null,localMode:null,localState:null,htmlState:M}},copyState:function(M){var E;return M.localState&&(E=t.copyState(M.localMode,M.localState)),{token:M.token,inTag:M.inTag,localMode:M.localMode,localState:E,htmlState:t.copyState(g,M.htmlState)}},token:function(M,E){return E.token(M,E)},indent:function(M,E,P){return!M.localMode||/^\s*<\//.test(E)?g.indent(M.htmlState,E,P):M.localMode.indent?M.localMode.indent(M.localState,E,P):t.Pass},innerMode:function(M){return{state:M.localState||M.htmlState,mode:M.localMode||g}}}},"xml","javascript","css"),t.defineMIME("text/html","htmlmixed")})})();class St{constructor(e){this.input=e,this.index=0}getCurrent(){return this.input[this.index]}at(e){return this.index+e<this.input.length&&this.index+e>=0?this.input[this.index+e]:""}read(e){const t=this.input.slice(this.index,this.index+e);return this.index+=e,t}skipUntil(e){if(typeof e=="string"){const t=e;e=(r,i)=>r.startsWith(t,i)}for(;this.index<this.input.length;){if(e(this.input,this.index))return!0;this.index++}return!1}readUntil(e){if(typeof e=="string"){const i=e;e=(o,a)=>o.startsWith(i,a)}let t=this.index;this.skipUntil(e);let r=this.index;return this.input.slice(t,r)}skipWhile(e){return this.skipUntil((t,r)=>!e(t,r))}readWhile(e){return this.readUntil((t,r)=>!e(t,r))}readAll(e){const t=[];for(;!this.isDone();)t.push(this.readUntil(e)),this.isDone()||(t.push(this.input[this.index]),this.index++);return t}isDone(){return this.index>=this.input.length}clone(e){const t=Object.assign(Object.create(this.constructor.prototype),this);return e!=null&&(t.input=e,t.index=0),t}restart(e){return this.input=e,this.index=0,this}consume(e){if(e instanceof Array){for(const t of e)if(this.consume(t))return t;return null}return this.input.startsWith(e,this.index)?(this.index+=e.length,!0):!1}matches(e){if(typeof e=="function")return e(this.input,this.index);if(e instanceof Array){for(const t of e)if(this.matches(t))return t;return null}return!!this.input.startsWith(e,this.index)}}function an(n,e,t){const r=n.get(e);if(r)return r;const i=t();return n.set(e,i),i}function We(n){return n instanceof Error||(n=new Error(Ct(n))),n}function Ct(n){return typeof n=="object"&&n==null?"null":typeof n>"u"?"undefined":n.toString()}function un(n){return n.filter(e=>e).flatMap(e=>e instanceof Array?e:[e])}function*cn(n,e){for(let t=0;t<n;t++)e?yield e(t):yield t}function Y(n="Reached unreachable code"){throw new Error("Assertion failed: "+n)}const hn="0".charCodeAt(0),dn="9".charCodeAt(0),pn="a".charCodeAt(0),fn="z".charCodeAt(0),Et="A".charCodeAt(0),Ot="Z".charCodeAt(0);function Xe(n,e=0){if(!n)return!1;const t=n.charCodeAt(e);return t>=hn&&t<=dn}function mn(n,e=0){if(!n)return!1;const t=n.charCodeAt(e);return t>=pn&&t<=fn||t>=Et&&t<=Ot}function ct(n,e=0){if(!n)return!1;const t=n.charCodeAt(e);return t>=Et&&t<=Ot}function jt(n,e=0){return!n||!n[e]?!1:mn(n,e)||Xe(n,e)||n[e]=="_"}function xe(n,e=0){return n[e]==" "||n[e]=="\r"||n[e]=="	"||n[e]==`
`}function gn(n){return[].concat(n)}function*yn(...n){for(const e of n)yield*e}function*bn(n,...e){const t=e.map(r=>r[Symbol.iterator]());for(;;){let r=!1,i=!0;const o=[];for(const a of t){const l=a.next();l.done?(r=!0,o.push(null)):(i=!1,o.push(l.value))}if(n=="until-first"&&r)return;if(i)return;yield o}}function _e(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function we(n){return n.replace(/[^\w ]/g,e=>e=="\\"?"\\\\":`\\u${e.charCodeAt(0).toString(16).padStart(4,"0")}`)}function Ce(n){return Object.assign(Object.create(Object.getPrototypeOf(n)),n)}function wn(n,...e){const t=Ce(n);for(const r of e)delete t[r];return t}function ht(n,e){return Object.assign(Ce(n),e)}var Ye;(n=>{function e(i){return i==null?(o,a)=>o+a:(o,a)=>o+i(a)}n.sum=e;function t(i){return(o,a,l)=>{const c=i==null?a:i(a);if(o==null)return{value:c,element:a,index:l};const p=o.value;return c<p?{value:c,element:a,index:l}:o??Y()}}n.smallest=t;function r(i){return(o,a,l)=>{const c=i==null?a:i(a);if(o==null)return{value:c,element:a,index:l};const p=o.value;return c>p?{value:c,element:a,index:l}:o??Y()}}n.largest=r})(Ye||(Ye={}));function*xn(n){for(let e=n.length-1;e>=0;e--)yield n[e]}var dt;(n=>{function e(l){return c=>c instanceof l}n.instanceOf=e;function t(l){return c=>typeof c==l}n.typeOf=t;function r(l){return l==null?c=>!1:"has"in l?c=>l.has(c):c=>l.includes(c)}n.containedIn=r;function i(l){return(...c)=>!l(...c)}n.invert=i;function o(){return l=>l!=null}n.notNull=o;function a(...l){return c=>{for(const p of l)if(!p(c))return!1;return!0}}n.and=a,n.not=new Proxy({},{get(l,c,p){const u=n[c];return(...y)=>{const _=u(...y);return(...g)=>!_(...g)}}})})(dt||(dt={}));function _n(n,e){const t=[],r=[];for(const i of n)e(i)?r.push(i):t.push(i);return[t,r]}function vn(n,e){const t=new Map(n);for(const[r,i]of e)t.set(r,i);return t}function Ze(n,e){if(e==null)return n;if(typeof n=="object"&&n!=null){if(n instanceof Array)return n.push(...e),n;for(const[t,r]of Object.entries(e)){const i=t in n?n[t]:void 0;if(typeof i=="object"&&i!=null){n[t]=Ze(i,r);continue}n[t]=r}return n}return e}class ue extends Error{constructor(){super(...arguments),this.name="PredicateFailedError"}}class ee{constructor(e){this._rejected=null,this._value=e}get rejected(){return this._rejected}else(e){if(this._rejected){const t=e(this._rejected);t instanceof ee?t._rejected?(this._value=null,this._rejected=t._rejected):(this._value=t._value,this._rejected=null):(this._value=t,this._rejected=null)}return this}effect(e,...t){return this._rejected?this:(e(this._value,...t),this)}unwrap(){if(this._rejected)throw this._rejected;return this._value}tryUnwrap(){if(!this._rejected)return this._value}unwrapOrError(){return this._rejected?this._rejected:this._value}do(e,...t){if(!this._rejected){const r=e(this._value,...t);r instanceof ee?r._rejected?this._rejected=r._rejected:this._value=r._value:this._value=r}return this}try(e,...t){if(!this._rejected)try{const r=e(this._value,...t);r instanceof ee?r._rejected?this._rejected=r._rejected:this._value=r._value:this._value=r}catch(r){this._rejected=We(r),this._value=null}return this}filter(e,t="Value did not match predicate"){return this._rejected?this:(e(this._value)||(this._rejected=new ue(t),this._value=null),this)}assertType(){return this}rejectType(e,t=`Value was of type "${e.name}"`){return this._rejected?this:(this._value instanceof e&&(this._rejected=new ue(t),this._value=null),this)}notNull(){return this._rejected?this:(this._value==null&&(this._rejected=new ue("Value is null"),this._value=null),this)}notNaN(){return this._rejected?this:((typeof this._value!="number"||isNaN(this._value))&&(this._rejected=new ue("Value is NaN"),this._value=null),this)}filterType(e,t=`Value was not of type "${typeof e=="string"?e:e.name}"`){return this._rejected?this:(typeof e=="string"?typeof this._value!=e&&(this._rejected=new ue(t),this._value=null):this._value instanceof e||(this._rejected=new ue(t),this._value=null),this)}rejectValue(e,t=`Value was "${Ct(e)}"`){return this._rejected||this._value==e&&this._value==e&&(this._rejected=new ue(t),this._value=null),this}pcall(e,...t){if(this._rejected)return this;try{return ee.value(e(this._value,...t))}catch(r){return ee.rejected(We(r))}}static value(e){return new ee(e)}static rejected(e){const t=new ee(null);return t._rejected=e,t}static pcall(e,...t){try{return ee.value(e(...t))}catch(r){return ee.rejected(We(r))}}}function kn(n,e,t=null,r=null){const i=new RegExp(we(e)),o=(t??n.posFromIndex(0)).line,a=(r==null?void 0:r.line)??n.lastLine();for(let l=o;l<=a;l++){let c=n.getLine(l);l==a&&r!=null&&(c=c.slice(0,r.ch)),l==o&&t!=null&&(c=c.slice(t.ch));const p=i.exec(c);if(p){let u=p.index;return l==o&&t!=null&&(u+=t.ch),tt.Pos(l,u)}}return null}const Tn={"Shift-Ctrl-L":"deleteLine","Ctrl-Space":"autocomplete","Ctrl-D"(n){const e=new Set;for(const r of n.listSelections()){const i=r.from().line,o=r.to().line;for(let a=i;a<=o;a++)e.add(a)}const t=[...e];for(const r of xn(t)){const i=n.getLine(r),o={ch:i.length,line:r};n.replaceRange(`
`+i,o,o)}},"Shift-Tab":"indentLess","Shift-Alt-D"(n){if(!n.somethingSelected()){const o=n.findWordAt(n.getCursor());n.addSelection(o.from(),o.to());return}const t=n.listSelections().at(-1),r=n.getRange(t.from(),t.to()),i=kn(n,r,t.to());i&&n.addSelection(i,tt.Pos(i.line,i.ch+r.length))}},Nt=nt(pe({name:"Editor",props:{content:{type:String,default:""},highlight:{type:Object},mode:{type:null},config:{type:Object},useExtendedShortcuts:{type:Boolean,default:!0}},emits:{change:n=>!0,mounted:n=>!0},setup(n,e){const t=ve();let r=null,i=n.content;Z(()=>n.content,l=>{r&&l!=r.getValue()&&r.setValue(l)}),Z(()=>n.mode,l=>{r&&r.setOption("mode",l)});function o(l){l.classList.add("absolute-fill"),l.style.height="100%",t.value=l}rt(()=>{var c;r=tt(o,{value:i,lineNumbers:!0,mode:n.mode??"simple",lineWrapping:!0,indentUnit:4,...n.config,extraKeys:{...n.useExtendedShortcuts?Tn:void 0,...(c=n.config)==null?void 0:c.extraKeys,"Ctrl-S":()=>e.emit("change",i)}}),it(()=>r.refresh());let l=0;r.on("change",()=>{var u;const p=r.getValue();if(p.length>i.length&&r.state.selectionActive==null&&((u=n.config)!=null&&u.hintOptions)&&!n.config.hintOptions.completeSingle&&Date.now()-l>50){const y=r.findWordAt(r.getCursor()),_=r.getRange(y.from(),y.to());_.length>0&&new St(_).readWhile(jt)==_&&r.execCommand("autocomplete")}i=p}),r.on("endCompletion",()=>{l=Date.now()}),r.on("blur",()=>{e.emit("change",i)}),e.emit("mounted",r)}),Ft(()=>{e.emit("change",i)});let a=null;return Z(()=>n.highlight,l=>{if(a&&(a.clear(),a=null),r==null||l==null)return;let c=l.offset;l.lineOffset&&(c+=r.indexFromPos({ch:0,line:l.lineOffset}));const p=r.posFromIndex(c),u=r.posFromIndex(c+l.length);r.scrollIntoView(p),a=r.getDoc().markText(p,u,{className:"bg-warning-translucent"})}),()=>A("div",null,[A(_t,{node:t.value},null)])}}));function $e(n){return typeof n=="string"?n:`calc(var(--size-int) * ${n})`}function pt(){const n={display:"grid"};let e=!1,t=!1;return{rows(...r){return n.gridTemplateRows=r.map($e).join(" "),e=!0,this},columns(...r){return n.gridTemplateColumns=r.map($e).join(" "),e=!0,this},autoRows(r){return n.gridAutoRows=$e(r),e=!0,this},autoColumns(r){return n.gridAutoColumns=$e(r),e=!0,this},left(r,i){return t=!0,i==null?n.gridColumn=r.toString():n.gridColumn=`${r} / ${i}`,this},top(r,i){return t=!0,i==null?n.gridRow=r.toString():n.gridRow=`${r} / ${i}`,this},colspan(r){return this.left("auto",`span ${r}`)},rowspan(r){return this.top("auto",`span ${r}`)},debug(){return n["--debug"]=JSON.stringify(JSON.stringify(n)),this},get $(){return t&&!e&&delete n.display,n}}}function ze(n={},e=null){return st({selected:e??Object.keys(n)[0],list:Object.entries(n),next(){const r=this.list.findIndex(i=>i[0]==this.selected)%this.list.length;this.selected=this.list[r][0]}})}const Sn={variant:{type:String},tabs:{type:Object,required:!0},compact:{type:Boolean},buttonClass:{type:String},border:{type:Boolean}},Pe=pe({name:"Tabs",props:Sn,setup(n,e){if(n.border)return()=>A("div",{class:["flex row pt-1",!n.compact&&"gap-1"]},[n.tabs.list.map(([i,o])=>A(fe,{onClick:()=>n.tabs.selected=i,textual:!0,key:i,class:[n.buttonClass,"as-retro-tab",n.tabs.selected==i&&"-selected"]},{default:()=>[typeof o=="string"?o:o(),A("div",{class:"-border"},null),A("div",{class:"-connector"},null)]}))]);const t={};function r(i,o,a){if(!i)throw new Error("Selected state changed to null");if(!o){if(!(i in t)){if(a)throw new Error("Selected tab does not exist");it(()=>r(i,o,!0));return}t[i].classList.add("active");return}const l=t[o],c=t[i],p=l.getBoundingClientRect();l.classList.remove("active"),c.classList.add("active");const u=c.getBoundingClientRect(),y=p.left+p.width/2-(u.left+u.width/2),_=p.width/u.width;c.style.transform=`translateX(${y}px) scaleX(${_})`,setTimeout(()=>{c.classList.add("moving"),c.style.transform="none",setTimeout(()=>{c.classList.remove("moving")},100)},10)}return Z(()=>n.tabs.selected,(i,o)=>{n.tabs.list.length!=0&&r(i,o,!1)}),rt(()=>{n.tabs.selected&&(n.tabs.selected in t||(n.tabs.selected=Object.keys(t)[0]),t[n.tabs.selected].classList.add("active"))}),()=>A("div",{class:["flex row",!n.compact&&"gap-4"]},[n.tabs.list.map(([i,o])=>A(fe,{onClick:()=>n.tabs.selected=i,textual:!0,flat:!0,key:i,class:["pb-1 px-0",n.buttonClass]},{default:()=>[typeof o=="string"?o:Ke(o),A("div",{ref:a=>t[i]=a,class:["as-tabs-indicator",n.variant?`bg-${n.variant}`:"bg-highlight"]},null)]}))])}}),Cn=pe({name:"TabbedContainer",props:{defaultValue:{type:String},tabsProps:{type:Object},tabsWrapper:{type:Function},externalTabs:{type:Object},...Ut},setup(n,e){function t(){var l,c;const o=Wt((c=(l=e.slots).default)==null?void 0:c.call(l)),a=[];for(const p of o)if(typeof p=="object"&&p!=null&&p.type==Qe){if(p.props==null||p.props.name==null)continue;const u=p.props.name,y=p.props.label??u;a.push({name:u,label:y,content:p})}return a}function r(o){const a=i.list,l=o.map(c=>[c.name,c.label]);a.map(c=>c[0]).join(",")!=l.map(c=>c[0]).join(",")&&it(()=>{var c;l.some(p=>p[0]==i.selected)||(i.selected=((c=l[0])==null?void 0:c[0])??""),i.list=l})}const i=n.externalTabs??ze({});return()=>{const o=t();r(o);const a=o.find(c=>c.name==i.selected),l=n.tabsWrapper?n.tabsWrapper(a==null?void 0:a.content):a==null?void 0:a.content;return n.externalTabs?A("div",null,[l]):A("div",null,[A(Pe,Ge(n.tabsProps,{tabs:i}),null),l])}}}),Qe=pe({name:"Tab",props:{name:{type:String,required:!0},label:{type:null}},setup(n,e){return()=>{var t,r;return(r=(t=e.slots).default)==null?void 0:r.call(t)}}});class At{constructor(){return this.code=vt(""),this.errors=st([]),this.ready=!1,qt(this)}isLanguageService(){return!1}compile(e){this.ready=!1,this.errors.length=0;try{this._compile(e)}catch(t){console.error(t),this.errors.push(`<span class="text-danger">Failed to run code due to internal error:<br />&nbsp;&nbsp;${_e(Kt(t))}</span>`)}}}function En(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Zt(n)}const On=nt(pe({name:"EditorView",props:{code:{type:String},root:{type:Boolean},vertical:{type:Boolean},noRunButton:{type:Boolean},tab:{type:String},mode:{type:null},localStorageId:{type:String},config:{type:Object},codeRatio:{type:Number},state:{type:At,required:!0},toolbarClass:{type:null}},emits:{compile:(n,e)=>!0,mounted:n=>!0},setup(n,e){const t={}.VITE_NO_ROUTER?null:Gt(),r={}.VITE_NO_ROUTER?null:Jt();n.localStorageId&&!n.root&&console.warn("EditorView has localStorageId but it is not root, so no state will be saved"),Z(()=>n.code,()=>{n.code!=null&&(n.state.code.value=n.code)},{immediate:!0});const i=ze();if(n.tab!=null&&(i.selected=n.tab),Z(()=>n.tab,()=>{n.tab!=null&&(i.selected=n.tab)}),n.root){if(!{}.VITE_NO_ROUTER&&t.query.code){const g=t.query.code;n.state.code.value=g,r.replace({query:{code:void 0}})}else if(n.localStorageId!=null){const g=localStorage.getItem(n.localStorageId+":editor-code");g!=null&&(n.state.code.value=g)}if(n.localStorageId){const g=localStorage.getItem(n.localStorageId+":editor-tab");g!=null&&(i.selected=g),Z(n.state.code,m=>localStorage.setItem(n.localStorageId+":editor-code",m)),Z(()=>i.selected,m=>localStorage.setItem(n.localStorageId+":editor-tab",m))}}function o(){n.state.compile(n.state.code.value)}Z(n.state.code,o,{immediate:!0});const a=ve(),l=ve(!1);Xt(()=>{const m=a.value.clientHeight<500;l.value!=m&&(l.value=m)},{immediate:!0});function c(){return A("div",{class:"absolute-fill flex column gap-2 scroll p-2"},[n.state.errors.map(g=>A("div",{class:"border border-danger rounded pre-wrap monospace px-2",innerHTML:g},null))])}let p=null;const u=vt(null);function y(g){if(p&&(p.classList.remove("bg-warning-translucent"),p=null),u.value=null,g.target instanceof HTMLElement){const m=g.target.closest("[data-offset][data-length]");if(m){const w=+m.dataset.offset,k=+m.dataset.length;let S=m.dataset.lineOffset;S!=null&&(S=+S),p=m,p.classList.add("bg-warning-translucent"),u.value={offset:w,length:k,lineOffset:S}}}}const _=Yt(()=>{let g=null;return n.state.isLanguageService()&&(g=Ze(g,{hintOptions:{hint:m=>n.state.getHints(m),updateOnCursorActivity:!0,completeSingle:!1},lint:{getAnnotations:(m,w,k)=>n.state.getAnnotations(m,k)}})),g=Ze(g,n.config),g});return()=>{let g;const m=A("div",{class:["p-1 px-2 flex row gap-2",n.toolbarClass]},[A("div",{class:"flex-fill flex row gap-2"},[kt(e.slots,"default")]),!n.noRunButton&&A(fe,{onClick:o,variant:"success"},{default:()=>[J("Run "),A(Tt,{icon:sn},null),J(" ")]})]),w=A("div",{class:"p-1 px-2"},[A(Pe,{border:!0,class:"absolute left-0 bottom-0 ml-1",tabs:i},null)]),k=A("div",null,[A(Nt,{content:n.state.code.value,onChange:j=>n.state.code.value=j,onMounted:j=>e.emit("mounted",j),class:"absolute-fill",highlight:u.value,mode:n.mode,config:_.value},null)]),S=A("div",{class:"flex column",ref:a},[A(Cn,{class:"flex-fill",externalTabs:i,onMousemove:y,onMouseleave:y},{default:()=>[n.state.getOutput().map(j=>A(Qe,{name:j.name,key:j.name,label:j.label},{default:()=>[A("div",{class:"absolute-fill overflow-auto p-2"},[n.state.ready?typeof j.content=="string"?A("div",{class:"monospace pre-wrap",innerHTML:j.content},null):j.content():A("div",{class:"muted p-2"},[J("Waiting for compilation...")])])]})),l.value&&A(Qe,{name:"errors",label:"Errors"},En(g=c())?g:{default:()=>[g]})]}),l.value==!1&&n.state.errors.length>0&&A("div",{class:"flex-basis-300 border-top",onMousemove:y,onMouseleave:y},[c()])]);return n.vertical?Je(A("div",{class:"flex-fill",style:pt().rows("auto",`${n.codeRatio??1}fr`,8,`${n.codeRatio!=null?1-n.codeRatio:1}fr`).$},[m,J(" "),k,J(" "),w,J(" "),S]),[[Le("child-class"),"border-bottom","head3"]]):Je(A("div",{class:"flex-fill",style:pt().columns(`${n.codeRatio??1}fr`,`${n.codeRatio!=null?1-n.codeRatio:1}fr`).rows("auto","1fr").$},[m,J(" "),w,J(" "),k,J(" "),S]),[[Le("child-class"),"border-right","odd"],[Le("child-class"),"border-bottom","head2"]])}}})),jn=n=>n;function ft(n){return n==0?n+"":n+"px"}class Mt{_renderContent(e){return e.map(t=>this._renderNode(t))}_normalizeAttributes(e,t=null){if(e.attributes&&(t!=null?t=new Map(yn(e.attributes,t)):t=e.attributes),e.classList!=null){t!=null&&e.attributes==t&&(t=new Map(t)),t??(t=new Map);const r=t.get("class");t.set("class",r?r+" "+e.classList.join(" "):e.classList.join(" "))}if(e.color!=null)if(t!=null&&e.attributes==t&&(t=new Map(t)),t??(t=new Map),e.color.startsWith("#"))t.set("style",(t.get("style")??"")+`;color:${e.color}`);else{const r=t.get("class");t.set("class",r?r+" "+e.color:e.color)}for(const[r,i,o]of[["align","text-align",jn],["width","width",ft],["height","height",ft]])e[r]!=null&&(t??(t=new Map),t.set("style",(t.get("style")??"")+`;${i}:${o(e[r])}`));return t}_renderSpan(e){const t=e.modifier=="bold"?"strong":e.modifier=="italics"?"em":e.modifier=="code"?"code":"span";return this._renderElement(t,this._normalizeAttributes(e),e.content)}_renderObject(e){const t=e.type=="media"?"img":e.type=="link"?"a":e.type=="raw"?e.value??"span":Y();let r=null;return e.value!=null&&(e.type=="media"?(r=new Map,r.set("src",e.value)):e.type=="link"&&(r=new Map,r.set("href",e.value))),this._renderElement(t,this._normalizeAttributes(e,r),e.content)}_renderSegment(e){const t=this._normalizeAttributes(e);if(t!=null||e.type!=null){const r=e.type=="ol"?"ol":e.type=="ul"?"ul":e.type=="li"?"li":e.type=="quote"?"blockquote":e.type=="p"?"p":e.type==4?"h4":e.type==3?"h3":e.type==2?"h2":e.type==1?"h1":Y();return this._renderElement(r,t,e.content)}else return this._renderElement("",null,e.content)}_renderCodeBlock(e){return this._renderElementRaw("pre",null,this._renderElementRaw("code",e.lang!=null?new Map([["class","language-"+e.lang]]):null,this._renderText(e.content)))}_renderTable(e){const t=[],r=[];for(const o of e.content)if(o.kind=="table-row"){if(o.header){t.push(o);continue}r.push(o)}const i=o=>this._renderElementRaw("tr",null,o.content.map(a=>this._renderElementRaw("td",null,this._renderNode(a))).join(""));return this._renderElementRaw("table",null,un([t.length>0&&this._renderElementRaw("thead",null,t.map(i).join("")),r.length>0&&this._renderElementRaw("tbody",null,r.map(i).join(""))]).join(""))}_renderNode(e){if(e.kind=="text")return this._renderText(e.value);if(e.kind=="raw")return this._renderRaw(e.value);if(e.kind=="span")return this._renderSpan(e);if(e.kind=="object")return this._renderObject(e);if(e.kind=="segment")return this._renderSegment(e);if(e.kind=="code-block")return this._renderCodeBlock(e);if(e.kind=="table")return this._renderTable(e);if(e.kind=="newline")return this._renderElement("br",null,[]);Y()}render(e){return this._renderNode(e)}}class Nn extends Mt{_renderAttributes(e=null){return e==null||e.size==0?"":" "+[...e].map(t=>`${t[0]}="${t[1]}"`).join(" ")}_renderText(e){return _e(e).replace(/\n/g,"<br>")}_renderRaw(e){return e}_renderElement(e,t,r){return e==""?this._renderContent(r).join(""):e=="br"?`<${e}${this._renderAttributes(t)}>`:`<${e}${this._renderAttributes(t)}>${this._renderContent(r).join("")}</${e}>`}_renderElementRaw(e,t,r){return`<${e}${this._renderAttributes(t)}>${r}</${e}>`}}var le;(n=>{n.DEFAULT_COLOR_MAP={string:{custom:!1,name:"green"},primitive:{custom:!1,name:"yellow"},function:{custom:!1,name:"cyan"},symbol:{custom:!1,name:"green"},circular:{custom:!1,name:"blue"},date:{custom:!1,name:"magenta"},regexp:{custom:!1,name:"red"},shallow:{custom:!1,name:"white"},type:{custom:!1,name:"bold"},other:{custom:!1,name:"gray"}},n.DEFAULT_COLOR_CODES={black:"#000000",blue:"#2472c8",brightBlack:"#666666",brightBlue:"#3b8eea",brightCyan:"#29b8db",brightGreen:"#23d18b",brightMagenta:"#d670d6",brightRed:"#f14c4c",brightWhite:"#ffffff",brightYellow:"#f5f543",cyan:"#11a8cd",green:"#0dbc79",magenta:"#bc3fbc",red:"#cd3131",white:"#e5e5e5",yellow:"#e5e510",grey:"#aaaaaa",gray:"#aaaaaa"},n.LIGHT_COLOR_CODES={black:"#000000",blue:"#1568c4",brightBlack:"#000000",brightBlue:"#1568c4",brightCyan:"#24b2d6",brightGreen:"#1f8236",brightMagenta:"#8f288f",brightRed:"#b30e0e",brightWhite:"#000000",brightYellow:"#cf4600",cyan:"#24b2d6",green:"#1f8236",magenta:"#8f288f",red:"#b30e0e",white:"#191919",yellow:"#cf4600",grey:"#555555",gray:"#555555"},n.ANSI_COLOR_CODES={black:"30",blue:"94",bold:"1",cyan:"96",gray:"90",green:"92",magenta:"95",red:"91",white:"0",yellow:"93"};function e(i,o){const a=c=>c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return`<span style="${o.custom==!1&&o.name=="bold"?"font-weight: bold":o.custom?`color: ${o.code}`:`color: ${n.LIGHT_COLOR_CODES[o.name]}`}">${a(i)}</span>`}n.htmlColor=e;function t(i,o){return o.custom?i:o.name=="bold"?`\x1B[1m${i}\x1B[0m`:`\x1B[${n.ANSI_COLOR_CODES[o.name]}m${i}\x1B[0m`}n.ansiColor=t;function r(i,{color:o,lineLimit:a=50,colorMap:l=n.DEFAULT_COLOR_MAP}){const c=(u,y)=>{if(u.type=="primitive"){const _=typeof u.value;if(_=="string")return{result:o(JSON.stringify(u.value),l.string),multiline:!1};if(_=="number"||_=="boolean")return{result:o(u.value.toString(),l.primitive),multiline:!1}}else{if(u.type=="bigint")return{result:o(u.value.toString()+"n",l.primitive),multiline:!1};if(u.type=="function")return{result:o(`[${u.subtype} ${u.name}]`,l.function),multiline:!1};if(u.type=="list"){const _=u.elements.map(w=>c(w,y+1));let g=0;for(const w of _){if(w.multiline){g=1/0;break}w.result.length>g&&(g=w.result.length)}const m=u.name!="Array"?`${o(u.name??"null",l.type)}(${_.length}) [`:"[";return g*_.length<a?{result:`${m}${_.length==0?"":" "+_.map(w=>w.result).join(", ")+" "}]`,multiline:!1}:{result:m+`
`+_.map(w=>"  ".repeat(y+1)+w.result).join(`
`)+`
`+"  ".repeat(y)+"]",multiline:!0}}else if(u.type=="record"){const _=u.items.map(w=>({key:p(w.key,y+1),value:c(w.value,y+1)}));let g=0;for(const w of _){if(w.key.multiline||w.value.multiline){g=1/0;break}const k=w.key.result.length+w.value.result.length;k>g&&(g=k)}const m=u.name?`${o(u.name,l.type)} {`:"{";return g*_.length<a?{result:`${m}${_.length==0?"":" "+_.map(w=>`${w.key.result}: ${w.value.result}`).join(", ")+" "}}`,multiline:!1}:{result:m+`
`+_.map(w=>"  ".repeat(y+1)+`${w.key.result}: ${w.value.result}`).join(`
`)+`
`+"  ".repeat(y)+"}",multiline:!0}}else{if(u.type=="symbol")return{result:o(u.name,l.symbol),multiline:!1};if(u.type=="circular")return{result:o("[circular]",l.circular),multiline:!1};if(u.type=="date")return{result:o(u.date,l.date),multiline:!1};if(u.type=="regexp")return{result:o(u.source,l.regexp),multiline:!1};if(u.type=="shallow")return{result:o(u.name,l.shallow),multiline:!1};if(u.type=="raw"){const _=u.segments.map(g=>"color"in g?g.indent?o(g.text,g.color).replace(/\n/g,`
`+"  ".repeat(y)):o(g.text,g.color):c(g,y).result).join("");return{result:_,multiline:_.includes(`
`)}}}}return{result:o(u.type,l.other),multiline:!1}},p=(u,y)=>u.type=="primitive"&&typeof u.value=="string"&&!u.value.match(/[^\w$]/g)?{result:u.value,multiline:!1}:c(u,y);return c(i,0).result}n.formatDescription=r})(le||(le={}));const An=new Set(["string","number","boolean"]);class ke{constructor(e){this.target=e,this.desc=ke.inspectObject(this.target)}}(n=>{class e{constructor(i=null,o=(i==null?void 0:i.path)??[]){var a;this.parent=i,this.path=o,this.seen=((a=this.parent)==null?void 0:a.seen)??new Map}descent(i){return new e(this,[...this.path,...i])}}n.Context=e;function t(r,i=new e){var o;if(An.has(typeof r))return{type:"primitive",value:r};if(typeof r=="function"){const a=r.toString().startsWith("class");let l=r.name||"(anon)";return l=="(anon)"&&r.toString().length<50&&(l=r.toString().replace(/\n\s*/g,"")),{type:"function",subtype:a?"class":"function",name:l}}else{if(typeof r=="symbol")return{type:"symbol",name:r.toString()};if(typeof r=="bigint")return{type:"bigint",value:r.toString()};if(typeof r>"u")return{type:"undefined"};if(typeof r=="object"){if(r==null)return{type:"null"};if(r[$t])return{type:"raw",segments:r.segments};if(i.seen.has(r))return{type:"circular",path:i.seen.get(r)};i.seen.set(r,i.path);let a=(o=r.constructor)==null?void 0:o.name;a=="Object"&&(a=null),r.constructor&&se.CUSTOM_NAME in r.constructor&&(a=r.constructor[se.CUSTOM_NAME]);const l=ArrayBuffer.isView(r)&&!(r instanceof DataView);if(r instanceof Array||l){let u=r;return u.length<=100?l&&(u=[...u]):u=[...u.slice(0,50),se.rawText(`...${u.length-100} elements`),...u.slice(-50)],{type:"list",subtype:"array",name:a,elements:u.map((y,_)=>t(y,i.descent(["elements",_.toString()])))}}if(r instanceof Set)return{type:"list",subtype:"set",name:a,elements:[...r.entries()].map(([u,y],_)=>t(y,i.descent(["elements",_.toString()])))};const c=([u,y],_)=>({key:t(u,i.descent(["items",_.toString(),"key"])),value:t(y,i.descent(["items",_.toString(),"value"]))});if(r instanceof Map)return{type:"record",subtype:"map",name:a,items:[...r].map(c)};if(r instanceof RegExp)return{type:"regexp",source:r.toString()};if(r instanceof Date)return{type:"date",date:r.toISOString()};if(r instanceof WeakMap||r instanceof WeakSet||r instanceof Promise)return{type:"shallow",name:a};if(se.CUSTOM in r){const u=r[se.CUSTOM](i);if(u!=r)return n.inspectObject(u,i)}if(r instanceof Error)return{type:"raw",segments:[{color:{custom:!1,name:"white"},text:r.stack??r.message}]};const p=[];for(const[u,y]of Object.entries(r))p.push(c([u,y],p.length));for(const u of Object.getOwnPropertySymbols(r))Object.getOwnPropertyDescriptor(r,u).enumerable&&p.push(c([u,r[u]],p.length));return{type:"record",subtype:"object",name:a,items:p}}}return{type:"unknown"}}n.inspectObject=t})(ke||(ke={}));const $t=Symbol.for("Logger.ObjectDescription.RawObject"),Mn={30:"black",31:"red",32:"green",33:"yellow",34:"blue",35:"magenta",36:"cyan",37:"white",90:"gray",91:"redBright",92:"greenBright",93:"yellowBright",94:"blueBright",95:"magentaBright",96:"cyanBright",97:"whiteBright"};var se;(n=>{n.CUSTOM=Symbol.for("Logger.ObjectDescription.Custom"),n.CUSTOM_NAME=Symbol.for("Logger.ObjectDescription.CustomName");function e(o){return{[$t]:!0,segments:o}}n.raw=e;function t(o,a={custom:!1,name:"white"},{indent:l=!1}={}){if(a=="ansi"){o+="\x1B[0m";const c=[];let p={custom:!0,code:le.DEFAULT_COLOR_CODES.white,ansiCode:37},u=0,y=0,_=0;for(;(y=o.indexOf("\x1B[",y))!=-1;){const g=o.slice(u,y);c.push({color:p,text:g,...l?{indent:!0}:void 0});const m=y+2;y=o.indexOf("m",y)+1;const w=o.slice(m,y-1),k=Mn[w]??"white";if(p={custom:!0,code:le.DEFAULT_COLOR_CODES[k]??le.DEFAULT_COLOR_CODES.grey,ansiCode:+w},u=y,_++,_>1e3)throw new Error("Infinite loop reached")}return c}return typeof a=="string"&&(a={custom:!1,name:a}),[{text:o,color:a,...l?{indent:!0}:void 0}]}n.textSegment=t;function r(...o){return e(t(...o))}n.rawText=r;function i(o){return e(t(o,"ansi"))}n.ansiText=i})(se||(se={}));class L extends Error{constructor(e){super("__MSG"),this._message=e,this.name="DeserializationError",this.path="",this._isClientError=!0,this._oldMessage=this.message,this._oldStack=this.stack??"",this._updateMessage()}_updateMessage(){const e=`Invalid type at .${this.path} : ${this._message}`;this.message=this._oldMessage.replace(/__MSG/,e),this.stack=this._oldStack.replace(/__MSG/,e)}appendPath(e){this.path=`${e}${this.path?`.${this.path}`:this.path}`,this._updateMessage()}}class $n{}class It{}class Lt extends $n{createPrimitive(e){return e}createAtom(e){return e}createNull(){return null}createAny(e){return e}createObject(){return{}}addObjectProperty(e,t,r){r!=b.IGNORE_VALUE&&(e[t]=r)}createArray(){return[]}addArrayElement(e,t){t!=b.IGNORE_VALUE&&e.push(t)}createMap(){return{}}addMapProperty(e,t,r){r!=b.IGNORE_VALUE&&(e[t]=r)}finish(e){return e==b.IGNORE_VALUE?null:e}}class zt extends It{constructor(e){super(),this.root=e}getRootHandle(){return this.root}parsePrimitive(e){return e}parseAtom(e){return e}getTypeHint(e){if(typeof e=="string")return"string";if(typeof e=="number")return"number";if(typeof e=="boolean")return"boolean";if(e==null)return"null";if(typeof e=="object")return e instanceof Array?"array":"object";throw new TypeError("Cannot get type hint")}isNull(e){return e==null}parseAny(e){return e}parseObject(e){return typeof e!="object"||e==null||Array.isArray(e)?null:e}getObjectProperty(e,t){return t in e?e[t]:null}parseArray(e){return Array.isArray(e)?e:null}*getArrayElements(e){for(const t of e)yield t}parseMap(e){return this.parseObject(e)}*getMapProperties(e){for(const t of Object.entries(e))yield t}}class In extends It{constructor(e){super(),this.root=e}getRootHandle(){return this.root}parsePrimitive(e){return e}parseAtom(e){return e}isNull(e){return e==null}getTypeHint(e){if(typeof e=="string")return"string";if(typeof e=="number")return"number";if(typeof e=="boolean")return"boolean";if(e==null)return"null";if(typeof e=="object")return e instanceof Array?"array":"object";throw new TypeError("Cannot get type hint")}parseAny(e){return e}parseObject(e){return e}getObjectProperty(e,t){return e[t]}parseArray(e){return e}*getArrayElements(e){yield*e}parseMap(e){return e}*getMapProperties(e){yield*e}}const Ln=new Map;class b{constructor(){this._annotations=null}get definition(){return this.getDefinition("")}as(e,...t){return e(this,...t)}serialize(e,t=Lt){const r=new t,i=this._serialize(e,r);return r.finish(i)}deserialize(e,t=zt){const r=new t(e);return this._deserialize(r.getRootHandle(),r)}derive(e=Object.getPrototypeOf(this)){return Object.create(e,Object.getOwnPropertyDescriptors(this))}annotate(...e){const t=e.map(i=>[i.constructor,i]),r=this.derive();return this._annotations==null?(r._annotations=new Map(t),r):(r._annotations=new Map([...this._annotations,...t]),r)}getMetadata(){return this._annotations==null?Ln:this._annotations}clone(e){return this.deserialize(e,In)}matches(e){try{return this.verify(e),!0}catch(t){if(t instanceof L)return!1;throw t}}}(n=>{var e,t,r,i,o,a,l;n.IGNORE_VALUE=Symbol.for("struct.ignore");function c(v){return v instanceof n}n.isType=c;class p extends n{constructor(s,h){super(),this.name=s,this._default=h,this._typeof=typeof this._default}getDefinition(s){return s+this.name}default(){return this._default}_serialize(s,h){return h.createAtom(s)}_deserialize(s,h){const T=h.parseAtom(s);if(typeof T!=this._typeof)throw new L("Expected "+this.name);return T}verify(s){if(typeof s!=this._typeof)throw new L("Expected "+this.name);return s}}n.AtomType=p,n.atom=new p("atom","");class u extends n{constructor(s,h){super(),this.name=s,this._default=h,this._typeof=typeof this._default}getDefinition(s){return s+this.name}default(){return this._default}_serialize(s,h){return h.createPrimitive(s)}_deserialize(s,h){const T=h.parsePrimitive(s);if(typeof T!=this._typeof)throw new L("Expected "+this.name);return T}verify(s){if(typeof s!=this._typeof)throw new L("Expected "+this.name);return s}}n.PrimitiveType=u,n.number=new u("number",0),n.boolean=new u("boolean",!1),n.string=new u("string",""),n.empty=new class extends u{verify(s){}_deserialize(s,h){}constructor(){super("empty",null)}};const y=Symbol.for("struct.isArray");n.isArray=v=>y in v;class _ extends n{constructor(s){super(),this.elementType=s,this.name=this.elementType.name+"[]",this[e]=!0}getDefinition(s){return this.elementType.getDefinition(s)+"[]"}default(){return[]}_serialize(s,h){const T=h.createArray();for(const C of s){const N=this.elementType._serialize(C,h);h.addArrayElement(T,N)}return T}_deserialize(s,h){const T=[],C=h.parseArray(s);if(C==null)throw new L("Expected "+this.definition);let N=-1;for(const D of h.getArrayElements(C)){N++;let I;try{I=this.elementType._deserialize(D,h)}catch(R){throw R instanceof L&&R.appendPath(N.toString()),R}I!=n.IGNORE_VALUE&&T.push(I)}return T}verify(s){if(typeof s!="object"||s==null||!Array.isArray(s))throw new L("Expected "+this.definition);let h=-1;for(const T of s){h++;try{this.elementType.verify(T)}catch(C){throw C instanceof L&&C.appendPath(h.toString()),C}}return s}}e=y,n.ArrayType=_;function g(v){return new _(v)}n.array=g;const m=Symbol.for("struct.isMap");n.isMap=v=>m in v;class w extends n{constructor(s,h){super(),this.keyType=s,this.valueType=h,this.name=`Map<${this.keyType.name}, ${this.valueType.name}>`,this[t]=!0}getDefinition(s){return s+`Map<${this.keyType.definition}, ${this.valueType.definition}>`}default(){return new Map}_serialize(s,h){const T=h.createMap();for(const[C,N]of s){const D=this.keyType._serialize(C,h),I=this.valueType._serialize(N,h);h.addMapProperty(T,D,I)}return T}_deserialize(s,h){const T=new Map,C=h.parseMap(s);if(C==null)throw new L("Expected "+this.definition);let N=-1;for(const[D,I]of h.getMapProperties(C)){N++;let R,W;try{R=this.keyType._deserialize(D,h)}catch(q){throw q instanceof L&&q.appendPath(N.toString()),q}try{W=this.valueType._deserialize(I,h)}catch(q){throw q instanceof L&&q.appendPath(R.toString()),q}W!=n.IGNORE_VALUE&&T.set(R,W)}return T}verify(s){if(typeof s!="object"||s==null||!(s instanceof Map))throw new L("Expected "+this.definition);let h=-1;for(const[T,C]of s){h++;try{this.keyType.verify(T)}catch(N){throw N instanceof L&&N.appendPath(h.toString()),N}try{this.valueType.verify(C)}catch(N){throw N instanceof L&&N.appendPath(T.toString()),N}}return s}}t=m,n.MapType=w;function k(v,s){return new w(s??n.string,v)}n.map=k;const S=Symbol.for("struct.isObject");class j extends n{constructor(s,h){super(),this.name=s,this.props=h,this.propList=Object.entries(this.props),this[r]=!0,this._migrations=null}getDefinition(s){const h=[];h.push(s+this.name+" {");const T=s+"    ";for(const[C,N]of this.propList)h.push(`${T}${C}: ${N.definition}`);return h.push(s+"}"),h.join(`
`)}default(){const s=this._makeBase();for(const[h,T]of this.propList)s[h]=T.default();return s}_serialize(s,h){const T=h.createObject();this._migrations&&h.addObjectProperty(T,"!version",h.createPrimitive(this._migrations.currVersion));for(const[C,N]of this.propList){const D=s[C],I=N._serialize(D,h);h.addObjectProperty(T,C,I)}return T}_makeBase(){return{}}_deserialize(s,h){const T=this._makeBase(),C=h.parseObject(s);if(C==null)throw new L("Expected "+this.definition);if(this._migrations!=null){const N=this._migrations.currVersion,D=h.getObjectProperty(C,"!version");let I;if(h.isNull(D))I=-1;else try{I=n.number._deserialize(D,h)}catch(W){throw W instanceof L&&W.appendPath("!version"),W}let R;if(I<N){R=new Map;const W=this._migrations.list.findIndex(q=>q.version>I);if(W==-1)throw new Error("Cannot perform migration, source version is less than current version but there are no migrations newer than source version");for(let q=W;q<this._migrations.list.length;q++)this._migrations.list[q].migrate(C,h,R)}this._apply(T,C,h,R)}else this._apply(T,C,h);return T}_apply(s,h,T,C){for(const[N,D]of this.propList){if(C!=null&&C.has(N)){s[N]=C.get(N);continue}const I=T.getObjectProperty(h,N);let R;try{R=D._deserialize(I,T)}catch(W){throw W instanceof L&&W.appendPath(N),W}R!=n.IGNORE_VALUE&&(s[N]=R)}}defineMigrations(s){if(s.length==0)return;s=s.sort((T,C)=>T.version-C.version);const h=s[s.length-1].version;this._migrations={currVersion:h,list:s}}verify(s){if(typeof s!="object"||s==null)throw new L("Expected "+this.definition);for(const[h,T]of this.propList)try{T.verify(s[h])}catch(C){throw C instanceof L&&C.appendPath(h),C}return s}}r=S,n.ObjectType=j;class M extends j{constructor(s,h){super(s,{}),this._getter=h,Object.defineProperty(this,"props",{configurable:!0,enumerable:!0,get:()=>{if(this._getter==null)throw new Error("Tried to compute props on a LazyObjectType, but the getter was already set to null");const T={};return Object.defineProperty(this,"props",{value:T,enumerable:!0,configurable:!0,writable:!0}),this._getter(T),this._getter=null,T}}),Object.defineProperty(this,"propList",{configurable:!0,enumerable:!0,get:()=>{const T=Object.entries(this.props);return Object.defineProperty(this,"propList",{value:T,enumerable:!0,configurable:!0,writable:!0}),T}})}}n.LazyObjectType=M;class E extends j{constructor(s,h){super(s,h),this.props=h}}n.TypedObjectType=E;function P(v){return new E("$anon",v)}n.object=P;function F(v,s){return new E(v,s)}n.namedType=F;function V(v,s){return new M(v,s)}n.lazyNamedType=V;function H(v,s,h,T){return T?new class extends j{_makeBase(){return new v}default(){return T()}constructor(){super(s,h)}}:new class extends j{_makeBase(){return new v}constructor(){super(s,h)}}}n.objectWithClass=H,n.isObject=v=>S in v,n.partial=v=>new j("Partial<"+v.name+">",Object.fromEntries(v.propList.map(([s,h])=>[s,(0,n.isNullable)(h)?h:n.nullable(h)])));function U(v,...s){return new j("$anon",Object.fromEntries(s.map(h=>[h,v.props[h]])))}n.pick=U;function $(v,...s){return new j("$anon",Object.fromEntries(s.map(h=>[h,v.props[h]])))}n.omit=$;const z=Symbol.for("struct.isNullable");n.isNullable=v=>z in v;class X extends n{constructor(s,h){super(),this.base=s,this.skipNullSerialize=h,this.name=this.base.name+" | "+null,this[i]=!0}getDefinition(s){return this.base.getDefinition(s)+" | "+null}default(){return null}_serialize(s,h){return s==null?this.skipNullSerialize?n.IGNORE_VALUE:h.createNull():this.base._serialize(s,h)}_deserialize(s,h){return h.isNull(s)?null:this.base._deserialize(s,h)}verify(s){return s==null?null:this.base.verify(s)}}i=z,n.NullableType=X;function Q(v,{skipNullSerialize:s=!1}={}){return new X(v,s)}n.nullable=Q;const te=Symbol.for("struct.isOptional");n.isOptional=v=>te in v;class Ee extends n{constructor(s,h){super(),this.base=s,this.defaultFactory=h,this.name=this.base.name+"?",this[o]=!0}getDefinition(s){return this.base.getDefinition(s)+"?"}default(){return this.defaultFactory==null?this.base.default():this.defaultFactory()}_serialize(s,h){return this.base._serialize(s,h)}_deserialize(s,h){return h.isNull(s)?this.default():this.base._deserialize(s,h)}verify(s){return this.base.verify(s)}}o=te,n.OptionalType=Ee;function De(v,s){return new Ee(v,s??null)}n.optional=De;const Oe=Symbol.for("struct.isPassthrough");n.isPassthrough=v=>Oe in v;class je extends n{constructor(s,h){super(),this.name=s,this.defaultFactory=h,this[a]=!0}getDefinition(s){return s+this.name}default(){return this.defaultFactory()}_serialize(s,h){return h.createAny(s)}_deserialize(s,h){return h.parseAny(s)}verify(s){return s}}a=Oe,n.PassthroughType=je;function me(v,s="passthrough"){if(v!=null&&typeof v!="function"){const h=v;v=()=>h}return new je(s,v??(()=>{throw new Error("Cannot create a default value of "+s)}))}n.passthrough=me,n.any=me("any");const ge=Symbol.for("struct.isEnum");n.isEnum=v=>ge in v;class Be extends n{constructor(s){super(),this.entries=s,this.name=this.entries.join(" | "),this[l]=!0,this._entries=new Set(this.entries)}getDefinition(s){return s+this.name}default(){return this.entries[0]}_serialize(s,h){return h.createPrimitive(s)}_deserialize(s,h){const T=h.parsePrimitive(s);if(!this._entries.has(T))throw new L("Expected "+this.name);return T}verify(s){if(!this._entries.has(s))throw new L("Expected "+this.name);return s}}l=ge,n.EnumType=Be,n.byKeyProperty=(v,s,h,T)=>new class extends n{constructor(){super(...arguments),this.name=v}getDefinition(C){return C+this.name}default(){return T()}_serialize(C,N){return n.string._serialize(C[s],N)}_deserialize(C,N){let D;try{D=n.string._deserialize(C,N)}catch(R){throw R instanceof L?new L("Expected "+this.name):R}const I=typeof h=="function"?h(D):h.get(D);if(I==null)throw new L(`Invalid ${v} ${s.toString()} "${D}"`);return I}verify(C){if(typeof C!="object"||C==null||!(s in C))throw new L("Expected "+this.name);const N=C[s],D=typeof h=="function"?h(N):h.get(N);if(D==null)throw new L(`Invalid ${v} ${s.toString()} "${N}"`);if(D!=C)throw new L(`Invalid ${v} ${N}, ${s.toString()} matches but the value does not equal`);return C}};function Ve(v,s,h,T){T??(T=()=>null);const C=new Map(Object.entries(h));return new class extends n{constructor(){super(...arguments),this.name=v}getDefinition(N){return N+v}default(){return T()}_serialize(N,D){const I=N[s],R=C.get(I);if(R==null)throw new L(`Invalid ${v} ${s.toString()} "${I}"`);return R._serialize(N,D)}_deserialize(N,D){const I=D.parseObject(N);if(I==null)throw new L("Expected "+this.definition);const R=D.getObjectProperty(I,s.toString());let W;try{W=n.string._deserialize(R,D)}catch(ae){throw ae instanceof L&&ae.appendPath(s.toString()),ae}const q=C.get(W);if(q==null)throw new L(`Invalid ${v} ${s.toString()} "${W}"`);return q._deserialize(I,D)}verify(N){if(typeof N!="object"||N==null||!(s in N))throw new L("Expected "+this.name);const D=N[s],I=C.get(D);if(I==null)throw new L(`Invalid ${v} ${s.toString()} "${D}"`);return I.verify(N)}}}n.byKeyUnion=Ve;function Ne(v,s){const h=v.constructor;class T extends h{default(){return s()}}return v.derive(T.prototype)}n.withDefault=Ne;class ye extends n{constructor(s){super(),this.elementType=s,this.name="IndexedArray<"+this.elementType.name+">",this._backingType=this.elementType.as(g)}getDefinition(s){return s+"IndexedArray<"+this.elementType.definition+">"}default(){return new Set}verify(s){if(typeof s!="object"||s==null||!(s instanceof Set))throw new L("Expected "+this.definition);let h=-1;for(const T of s){h++;try{this.elementType.verify(T)}catch(C){throw C instanceof L&&C.appendPath(h.toString()),C}}return s}_serialize(s,h){return this._backingType._serialize(Array.from(s),h)}_deserialize(s,h){const T=this._backingType._deserialize(s,h);return new Set(T)}}n.IdentityIndexedArrayType=ye;class re extends n{constructor(s,h){super(),this.getter=s,this.elementType=h,this.name="IndexedArray<"+this.elementType.name+">",this._backingType=this.elementType.as(g)}getDefinition(s){return s+"IndexedArray<"+this.elementType.definition+">"}default(){return new Map}verify(s){if(typeof s!="object"||s==null||!(s instanceof Map))throw new L("Expected "+this.definition);let h=-1;for(const[T,C]of s){if(h++,T!=this.getter(C)){const N=new L("Invalid key for element");throw N.appendPath(h.toString()),N}try{this.elementType.verify(C)}catch(N){throw N instanceof L&&N.appendPath(h.toString()),N}}return s}_serialize(s,h){return this._backingType._serialize(Array.from(s.values()),h)}_deserialize(s,h){const T=this._backingType._deserialize(s,h);return new Map(T.map(C=>[this.getter(C),C]))}}n.IndexedArrayType=re;function He(v){return new ye(v)}n.identityIndexedArray=He;function Fe(v,s){return new re(h=>h[s],v)}n.keyIndexedArray=Fe;function Ae(v,s){return new re(s,v)}n.computedIndexedArray=Ae})(b||(b={}));function zn(...n){return new b.EnumType(n)}b.enum=zn;var G;(n=>{function e(g){if(b.isType(g))return g;const m=t(g);if(m==null)throw new Error("Cannot get base type, because the value is not a struct instance");return"baseType"in m?m.baseType:m}n.getBaseType=e;function t(g){if(b.isType(g))return g;if(typeof g=="function"){if("baseType"in g&&"ref"in g)return g.ref();throw new Error("Value is not a struct")}else return t(g.constructor)}n.getType=t,n.DECORATOR_FIELD=Symbol.for("struct.decoratorField");class r{constructor(m,w){this.name=m,this._source=w,this._props=null,this._defaultFields=null,this.getProps=k=>{if(this._props!=null)return k!=this._props&&Object.assign(k,this._props),this._props;if(typeof this._source!="function")return this._defaultFields=Object.fromEntries(Object.keys(this._source).map(M=>[M,null])),Object.assign(k,this._source),this._props=k,this._source=null,this._props;const S={},j=new this._source;for(const[M,E]of Object.entries(j))if(E instanceof y){if(k[M]=E.type,n.DECORATOR_FIELD in E.type)continue;S[M]=null;continue}return this._props=k,this._defaultFields=S,this._source=null,this._props}}getObjectType(){return typeof this._source=="function"?new b.LazyObjectType(this.name,this.getProps):new b.TypedObjectType(this.name,this.getProps({}))}getDefaultFields(){return this._defaultFields??(this.getProps({}),this._defaultFields)}}function i(g,m,w,k){const S=new r(g,m);let j=S.getObjectType();k!=null&&k.baseTypeDecorator&&(j=k.baseTypeDecorator(j));const M=k==null?void 0:k.instanceDecorator,E=new Map,F=class F extends(w??Object){serialize(){return this.constructor.ref().serialize(this)}constructor(H){if(super(),Object.assign(this,S.getDefaultFields(),H??{}),"_postDeserialize"in this&&this._postDeserialize(),M)return M(this)}static ref(){const H=E.get(this);if(H)return H;const U=this,$=j.derive((class extends j.constructor{_makeBase(){return new U}}).prototype);return E.set(this,$),$}static default(){return this.ref().default()}static deserialize(H){return this.ref().deserialize(H)}};F.baseType=j;let P=F;return P}n.define=i;const o=b.object({"!type":b.atom});class a extends b{constructor(m,w){super(),this.name=m,this.types=w}getDefinition(m){return m+this.name}default(){return null}verify(m){return n.getBaseType(m).verify(m)}_serialize(m,w){const k=n.getBaseType(m),S=k._serialize(m,w);return w.addObjectProperty(S,"!type",k.name),S}_deserialize(m,w){const k=o._deserialize(m,w)["!type"],S=this.types.get(k);if(S==null)throw new L(`Cannot find type "${k}"`);try{return S._deserialize(m,w)}catch(j){throw j instanceof L&&j.appendPath(`(${k})`),j}}}class l{constructor(m){this.name=m,this._types=new Map,this._ref=new a(this.name,this._types)}get base(){return this._ref}getTypes(){return this._types}getTypeNames(){return[...this._types.keys()]}register(m){const w=t(m);this._types.set(e(w).name,w)}ref(){return this.base}}n.PolymorphicSerializer=l;const c=b.object({"!type":b.atom,id:b.string});class p extends b{constructor(m,w){super(),this.name=m,this.contextGetter=w}getDefinition(m){return m+this.name}default(){return null}verify(m){return n.getBaseType(m).verify(m)}_serialize(m,w){return w.createPrimitive(m.id)}_deserialize(m,w){const k=b.string._deserialize(m,w),S=this.contextGetter(k);if(S==null)throw new L(`Cannot resolve reference to "${k}"`);return S}}class u extends l{constructor(m){super(m),this._contextGetter=null,this._graphRef=new p(this.name,w=>{if(this._contextGetter==null)throw new L("Cannot deserialize polymorphic graph reference outside of context");return this._contextGetter(w)})}get base(){return this._graphRef}createContext(m,w){if(this._contextGetter!=null)throw new Error("Cannot create context, context already exists");try{this._contextGetter=m,w()}finally{this._contextGetter=null}}deserialize(m,w=zt){if(this._contextGetter!=null)throw new Error("Cannot create context, context already exists");const k=new w(m),S=k.parseArray(k.getRootHandle());if(S==null)throw new L("Expected array of objects");try{const j=new Map;this._contextGetter=E=>{var P;return(P=j.get(E))==null?void 0:P.instance};let M=-1;for(let E of k.getArrayElements(S)){M++;const P=k.parseObject(E);if(P==null)throw new L("Expected object").appendPath(M.toString());try{const{["!type"]:F,id:V}=c._deserialize(P,k),H=this._types.get(F);if(H==null){const $=new L(`Cannot find type "${F}"`);throw $.appendPath(V),$}const U=H.default();j.set(V,{instance:U,data:P,type:H})}catch(F){throw F instanceof L&&F.appendPath(M.toString()),F}}M=-1;for(const{instance:E,data:P,type:F}of j.values()){M++;try{Object.assign(E,n.getBaseType(F)._deserialize(P,k)),"_postDeserialize"in E&&E._postDeserialize()}catch(V){throw V instanceof L&&V.appendPath(M.toString()),V}}return[...j.values()].map(E=>E.instance)}finally{this._contextGetter=null}}serialize(m,w=Lt){const k=new w,S=k.createArray();for(const j of m){const M=this._ref._serialize(j,k);k.addArrayElement(S,M)}return S}removeReferences(m,w){const k=(S,j,M)=>{if(b.isNullable(j)){if(S==null)return;j=j.base}if(b.isObject(j))for(const[E,P]of j.propList){const F=S[E],V=M+E;if(F==m)if(b.isNullable(P))S[E]=null;else if(b.isOptional(P))S[E]=P.default();else throw new Error(`Cannot remove reference, property ${JSON.stringify(V)} is not nullable (${P.name})`);else k(F,P,V)}else if(b.isMap(j))for(const[E,P]of[...S]){const F=S[E];F==m?S.delete(E):k(F,j.valueType,M+"."+E)}else if(b.isArray(j))for(let E=0;E<S.length;E++){const P=S[E];P==m?(S.splice(E,1),E--):k(P,j.elementType,M+"."+E)}};for(const S of w)k(S,n.getType(S),"")}}n.PolymorphicGraphSerializer=u;class y{constructor(m){this.type=m}}n.FieldInfo=y;function _(g){return new y(g)}n.field=_})(G||(G={}));const Pn=["white","black","primary","secondary","success","danger","warning"];class Rn extends b.EnumType{_deserialize(e,t){const r=t.parsePrimitive(e);return r.startsWith("#")&&r.length==7?r:super._deserialize(e,t)}constructor(){super(Pn)}}const Dn=new Rn,he=new G.PolymorphicSerializer("SyntaxNode");he.base;const be={modifier:b.enum("bold","italics","code").as(b.nullable,{skipNullSerialize:!0}),color:Dn.as(b.nullable,{skipNullSerialize:!0}),classList:b.string.as(b.array).as(b.nullable,{skipNullSerialize:!0}),attributes:b.string.as(b.map).as(b.nullable,{skipNullSerialize:!0}),align:b.enum("left","center","right").as(b.nullable,{skipNullSerialize:!0}),width:b.number.as(b.nullable,{skipNullSerialize:!0}),height:b.number.as(b.nullable,{skipNullSerialize:!0})};class ie{constructor(){this._metadata=null}setMetadata(e,t){(this._metadata??(this._metadata=new Map)).set(e,t)}getMetadata(e){return this._metadata==null?null:this._metadata.get(e)??null}static get[se.CUSTOM_NAME](){return this.baseType.name}}var O;(n=>{class e extends G.define("Text",{value:b.string},ie){constructor(){super(...arguments),this.kind="text"}}n.Text=e;class t extends G.define("Newline",{},ie){constructor(){super(...arguments),this.kind="newline"}}n.Newline=t;class r extends G.define("Raw",{value:b.string},ie){constructor(){super(...arguments),this.kind="raw"}}n.Raw=r;class i extends G.define("Span",{...be,content:he.base.as(b.array)},ie){constructor(){super(...arguments),this.kind="span"}}n.Span=i;class o extends G.define("CodeBlock",{lang:b.string.as(b.nullable),content:b.string},ie){constructor(){super(...arguments),this.kind="code-block"}}n.CodeBlock=o;class a extends G.define("Object",{...be,content:he.base.as(b.array),value:b.string.as(b.nullable),type:b.enum("link","media","raw")},ie){constructor(){super(...arguments),this.kind="object"}}n.Object=a;class l extends G.define("Table",{...be,content:he.base.as(b.array)},ie){constructor(){super(...arguments),this.kind="table"}}n.Table=l;class c extends G.define("TableRow",{...be,content:he.base.as(b.array),header:b.boolean},ie){constructor(){super(...arguments),this.kind="table-row"}}n.TableRow=c;class p extends G.define("Segment",{...be,type:b.enum("p",1,2,3,4,"ul","ol","li","quote").as(b.nullable),content:he.base.as(b.array)},ie){constructor(){super(...arguments),this.kind="segment"}}n.Segment=p})(O||(O={}));for(const n of Object.values(O))he.register(n);class Bn{constructor(){this.result=[],this.indent=[],this.ordered=[],this.skipNextIndent=!0}emitIndent(){if(this.skipNextIndent){this.skipNextIndent=!1;return}let e=this.indent.join("");this.result.push(e)}pushIndent(){this.indent.push("  ")}popIndent(){this.indent.pop()}exportNodeContent(e){for(const t of e.content)this.exportNode(t)}emitBlockElement(e,{delim:t=null,indent:r=!0}={}){this.emitIndent(),t!=null&&this.result.push(t),this.result.push(`
`),r===!0?this.pushIndent():this.indent.push(r),this.exportNodeContent(e),this.popIndent(),this.emitIndent(),t!=null&&this.result.push(t),this.result.push(`
`)}exportNode(e){if(e.kind=="segment"){if(typeof e.type=="number"){this.emitIndent(),this.result.push("#".repeat(e.type)+" "),this.skipNextIndent=!0,this.exportNodeContent(e),this.result.push(`

`);return}if(e.type=="p"){this.emitIndent(),this.exportNodeContent(e),this.ordered.length==0&&this.result.push(`

`);return}if(e.type=="ul"){this.ordered.push(!1),this.emitBlockElement(e),this.ordered.pop();return}if(e.type=="quote"){this.emitBlockElement(e,{indent:"> "});return}if(e.type=="ol"){this.ordered.push(!0),this.emitBlockElement(e),this.ordered.pop();return}if(e.type=="li"){this.emitIndent(),this.ordered.at(-1)?this.result.push("1. "):this.result.push("- "),this.exportNodeContent(e),this.result.push(`
`);return}this.exportNodeContent(e);return}if(e.kind=="text"){this.result.push(e.value.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`));return}if(e.kind=="raw"){this.result.push(e.value);return}if(e.kind=="span"){if(e.modifier=="code"){this.result.push("`"),this.exportNodeContent(e),this.result.push("`"),this.fixEndingToken();return}if(e.modifier=="bold"){this.result.push("**"),this.exportNodeContent(e),this.result.push("**"),this.fixEndingToken();return}if(e.modifier=="italics"){this.result.push("*"),this.exportNodeContent(e),this.result.push("*"),this.fixEndingToken();return}this.exportNodeContent(e);return}if(e.kind=="object"&&e.type=="raw"){if(e.value&&e.value.startsWith("<>"))return;let t=e.value??"null";this.emitHtmlElement(e,t);return}if(e.kind=="table"){this.emitHtmlElement(e,"table");return}if(e.kind=="table-row"){this.emitHtmlElementStart(e,"tr");for(const t of e.content)this.emitHtmlElement(new O.Segment({content:[t]}),"td");this.emitHtmlElementEnd(e,"tr");return}if(e.kind=="code-block"){this.emitIndent(),this.result.push("```\n"),this.result.push(e.content),this.emitIndent(),this.result.push("```\n");return}this.result.push(`!?!${e.kind}`)}fixEndingToken(){const e=this.result.length-1,t=this.result[e],r=this.result[e-1],i=r.trimEnd(),o=r.slice(i.length);this.result[e-1]=i,this.result[e]=t+o}emitHtmlElement(e,t){this.emitHtmlElementStart(e,t),e.content.length>0&&this.exportNodeContent(e),this.emitHtmlElementEnd(e,t)}emitHtmlElementStart(e,t){if(this.emitIndent(),this.result.push(`<${t}`),e.attributes)for(const[r,i]of e.attributes)i==""?this.result.push(` ${r}`):this.result.push(` ${r}=${JSON.stringify(i)}`);this.result.push(`>
`)}emitHtmlElementEnd(e,t){this.emitIndent(),this.result.push(`</${t}>
`)}render(e){return this.exportNode(e),this.result.join("")}}class Te{parseVerbatimContent(e){return[new O.Raw({value:e})]}}class ot{}function Vn(n,e){const t=n[e];return t=="*"||t=="_"||t=="\\"||t=="`"||t==`
`||t=="!"||t=="["||t=="]"||t=="}"||t=="<"}function et(n,e){return n[e]=="}"||xe(n,e)||n[e]==">"||n[e]=="/"}function Hn(n,e){return n[e]=="="||et(n,e)}function Fn(n,e){return n[e]==" "||n[e]=="	"}function Un(n,e){return n[e]==";"||xe(n,e)}function Wn(n,e){return n[e]=="-"||jt(n,e)||n[e]==":"}class Pt extends St{constructor(e,t){if(super(e),this.path=null,this.widgets=new G.PolymorphicSerializer("MmlWidget"),t!=null&&t.widgets)for(const r of t.widgets)this.widgets.register(r);this.path=(t==null?void 0:t.path)??null}_parseInlineCssProperty(e,t,r){if(e=="color"&&t.startsWith("#"))return r??(r=new O.Span({content:[]})),r.color=t,r;if(e=="text-align")try{const i=O.Span.baseType.props.align.verify(t);return r??(r=new O.Span({content:[]})),r.align=i,r}catch(i){if(i instanceof L)return r;throw i}if(e=="width"||e=="height"){const i=parseInt(t);if(!isNaN(i))return r??(r=new O.Span({content:[]})),r[e]=i,r}return e=="font-weight"&&t.startsWith("700")&&(r??(r=new O.Span({content:[]})),r.modifier="bold"),r}parseInlineCss(e){for(;!this.isDone();){if(this.consume('"'))return e;this.skipWhile(Un);const t=this.readUntil(":");if(this.index++,this.isDone())break;const r=this.readUntil(";").trim();e=this._parseInlineCssProperty(t,r,e)}return e}parseFragment(e,t=[]){for(;!this.isDone();){const r=this.readUntil(Vn);if(t.length>0||r.trim()!=""){const p=t.at(-1);p&&p.kind=="text"?p.value+=r:t.push(new O.Text({value:r}))}if(this.isDone()||e!=null&&this.consume(e))break;if(this.consume("\\")){const p=this.getCurrent();if(this.index++,p==`
`){t.push(new O.Newline);continue}const u=t.at(-1);u&&u.kind=="text"?u.value+=p:t.push(new O.Text({value:p}));continue}let i=null;const o=this.index==0||xe(this.at(-1),0);let a=null;if(o&&(a=this.consume(["**","__"]))){const p=this.parseFragment(a);i=new O.Span({content:p,modifier:"bold"})}else if(o&&(a=this.consume(["*","_"]))){const p=this.parseFragment(a);i=new O.Span({content:p,modifier:"italics"})}else if(o&&this.consume("`")){const p=this.parseFragment("`");i=new O.Span({content:p,modifier:"code"})}else if(this.consume("[")){const p=this.parseFragment("]");if(i=new O.Object({content:p,type:"link"}),this.consume("(")){const u=this.readUntil(")");i.value=u,this.index++}}else if(this.consume("![")){const p=this.readUntil("]");if(this.index++,i=new O.Object({content:[],type:"media",attributes:new Map([["alt",p]])}),this.consume("(")){const u=this.readUntil(")");i.value=u,this.index++}}else if(this.consume("<")){const p=this.readWhile(Wn),u=this.widgets.getTypes().get(p),y=(u==null?void 0:u.getMetadata().get(ot))!=null;i=new O.Object({content:[],type:"raw",value:p});let _=!1;for(;!this.isDone()&&(this.skipWhile(xe),!this.consume(">"));){if(this.consume("/>")){_=!0;break}const m=this.index;this.parseAttribute(i),this.index==m&&this.index++}if(_)y&&(i.content=[new O.Raw({value:""})]);else{const m=`</${p}>`;y?(i.content=[new O.Raw({value:this.readUntil(m)})],this.index+=m.length):i.content=this.parseFragment(m)}const g=this.widgets.getTypes().get(p);if(g!=null){const m=i.attributes?Object.fromEntries([...i.attributes].map(([S,j])=>j==""?[S,!0]:[S,j])):{};m["!type"]=p;const w=this.widgets.base.deserialize(m),k=i.attributes?new Map(i.attributes):null;if(i=w.getValue(this,i.content),i&&k){b.isObject(g)||Y();for(const[S]of g.propList)k.delete(S);i.attributes?i.attributes=vn(k,i.attributes):i.attributes=k}}}if(i!=null){if(t.push(i),this.consume("{"))for(;!this.isDone()&&(this.skipWhile(xe),!this.consume("}"));){const p=this.index;this.parseAttribute(i),this.index==p&&this.index++}continue}const l=this.getCurrent(),c=t.at(-1);c&&c.kind=="text"?c.value+=l:t.push(new O.Text({value:l})),this.index++}return t}parseAttribute(e){if(this.consume(".")){const i=this.readUntil(et);e.classList??(e.classList=[]),e.classList.push(i);return}let t=this.readUntil(Hn),r=null;t!=""&&(t.startsWith("#")?(r=t.slice(1),t="id"):this.consume("=")&&(this.consume('"')?(r=this.readUntil('"'),this.index++):r=this.readUntil(et)),e.attributes??(e.attributes=new Map),e.attributes.set(t,r??""))}parseIndent(){return this.readWhile(Fn).length}parseSegmentType(){const e=this.index;let t=null;return this.readWhile(Xe)&&this.consume([".",")"])?t="ol":(this.index=e,this.consume(["- ","+ ","* "])&&(t="ul")),t}parseTextBlock(){return new O.Segment({type:"p",content:this.parseFragment(`
`)})}parseSegment(e,t){let r=null;for(;!this.isDone();){const i=this.index,o=this.parseIndent();if(o<e){this.index=i;return}if(this.consume("```")){const p=this.readUntil(`
`).trim();this.index++;const u=this.readUntil("```");this.index+=3;const y=new O.CodeBlock({lang:p!=""?p:null,content:u});r=null,t.content.push(y);continue}let a=null;if(this.consume("####")?a=4:this.consume("###")?a=3:this.consume("##")?a=2:this.consume("#")&&(a=1),a!=null){const p=this.parseTextBlock();p.type=a,r=null,t.content.push(p);continue}if(this.consume(">")){let p;(r==null?void 0:r.kind)=="segment"&&r.type=="quote"?p=r:(p=new O.Segment({type:"quote",content:[]}),t.content.push(p));const u=this.parseTextBlock();p.content.push(u),r=p,this.parseSegment(o+1,p);continue}if(this.consume(["- ","+ ","* "])){let p;(r==null?void 0:r.kind)=="segment"&&r.type=="ul"?p=r:(p=new O.Segment({type:"ul",content:[]}),t.content.push(p));const u=new O.Segment({type:"li",content:[]});p.content.push(u);const y=this.parseTextBlock();u.content.push(y),r=p,this.parseSegment(o+1,u);continue}const l=this.index;if(this.readWhile(Xe)&&this.consume([".",")"])){let p;(r==null?void 0:r.kind)=="segment"&&r.type=="ol"?p=r:(p=new O.Segment({type:"ol",content:[]}),t.content.push(p));const u=new O.Segment({type:"li",content:[]});p.content.push(u);const y=this.parseTextBlock();u.content.push(y),r=p,this.parseSegment(o+1,u);continue}else this.index=l;const c=this.parseTextBlock();if(c.content.length==0){r=null;continue}if(r&&r.kind=="segment"){const p=r.content.at(-1);p&&p.kind=="segment"&&p.type=="li"?p.content.push(new O.Text({value:" "}),...c.content):r.content.push(new O.Text({value:" "}),...c.content)}else t.content.push(c),r=c}}parseDocument(){const e=new O.Segment({content:[]});return this.parseSegment(0,e),e}}class Se extends Mt{constructor(){super(...arguments),this.allowedComponents=new Set,this.usedComponents=new Set,this.allowProperties=!1,this._manifest=null}get manifest(){return this._manifest??(this._manifest=new Se.PropertyManifest)}addAllowedComponent(...e){for(const t of e)this.allowedComponents.add(t);return this}_renderAttributes(e){return e==null?"{}":JSON.stringify(Object.fromEntries(e))}_renderText(e){return JSON.stringify(e)}_renderRaw(e){return JSON.stringify(e)}_renderElement(e,t,r){if(e=="")return r.length==0?"[]":r.length==1?this._renderNode(r[0]):"["+this._renderContent(r).join(", ")+"]";if(e=="<>vue-prop"){if(!this.allowProperties)return JSON.stringify("Usage of Vue properties is disabled");const a=t==null?void 0:t.get("name");if(a==null)return JSON.stringify("Vue property name not provided");const l=t==null?void 0:t.get("use");this.manifest.ensureProperty(a);const c=`[${this._renderContent(r).join(", ")}]`;return l!=null?(this.manifest.renderers.add(l),`props.${a} ? ${l}(props.${a}) : ${c}`):`props.${a} ? props.${a} : ${c}`}if(e=="<>vue-decl"){if(!this.allowProperties)return JSON.stringify("Usage of Vue properties is disabled");const a=t==null?void 0:t.get("name");if(a==null)return JSON.stringify("Vue property name not provided");const l=t==null?void 0:t.get("required"),c=this.manifest.ensureProperty(a);return l&&(c.required=!0),r.length>0&&(c.default=`() => [${this._renderContent(r).join(", ")}]`),"[]"}const i=this.allowedComponents.has(e);if(ct(e,0)||i)if(i){this.usedComponents.add(e);const a=r.length==0?"null":r.length==1?this._renderNode(r[0]):this._renderContent(r).join(", ");return`h(${e}, ${this._renderAttributes(t)}, () => ${a})`}else e="span";const o=r.length==0?"":", "+this._renderContent(r).join(", ");return`h(${JSON.stringify(e)}, ${this._renderAttributes(t)}${o})`}_renderElementRaw(e,t,r){if(e=="")return r;const i=this.allowedComponents.has(e);if(ct(e,0)||i){if(i)return this.usedComponents.add(e),`h(${e}, ${this._renderAttributes(t)}, () => ${r})`;e="span"}return`h(${JSON.stringify(e)}, ${this._renderAttributes(t)}, ${r})`}_renderObject(e){return!e.type&&e.value!=null&&!e.value.match(/^[a-z]+:\/\//)?this._renderElement("RouterLink",this._normalizeAttributes(e,new Map([["to",e.value]])),e.content):super._renderObject(e)}render(e){const t=["h"],r=this.renderContent(e);return this.usedComponents.size>0&&t.push(...this.usedComponents),`(({${[...t].join(", ")}}) => ${r})`}renderContent(e){return`() => ${this._renderNode(e)}`}}(n=>{class e extends G.define("Prop",{name:b.string,use:b.string.as(b.nullable)},Te){getValue(o,a){const l=new Map([["name",this.name]]);return this.use&&l.set("use",this.use),new O.Object({type:"raw",value:"<>vue-prop",content:a,attributes:l})}}n.PropertyWidget=e;class t extends G.define("Declare",{name:b.string,required:b.boolean.as(b.nullable)},Te){getValue(o,a){const l=new Map([["name",this.name]]);return this.required&&l.set("required",""),new O.Object({type:"raw",value:"<>vue-decl",content:a,attributes:l})}}n.PropertyDeclarationWidget=t;class r{constructor(){this.properties=new Map,this.renderers=new Set}ensureProperty(o){return an(this.properties,o,()=>({default:null,required:!1}))}}n.PropertyManifest=r})(Se||(Se={}));class qn extends G.define("Math",{equation:b.boolean.as(b.nullable),full:b.boolean.as(b.nullable)},Te,{baseTypeDecorator(e){return e.annotate(new ot)}}){getValue(e,t){const r=t[0];r instanceof O.Raw||Y();let i=r.value;return this.full&&(i="\\displaystyle"+i),new O.Span({content:[new O.Raw({value:this.equation?"\\["+i+"\\]":"$"+i+"$"})]})}}const lt=class lt extends G.define("LaTeXTableOptions",{widths:b.number.as(b.array),types:b.string.as(b.array),compact:b.boolean,naked:b.boolean,long:b.boolean,before:b.string.as(b.nullable),after:b.string.as(b.nullable)}){};lt.tagname="<>latex-table-options";let de=lt;class Kn extends G.define("TableOptions",{widths:b.string.as(b.nullable),types:b.string.as(b.nullable),compact:b.boolean.as(b.nullable),naked:b.boolean.as(b.nullable),long:b.boolean.as(b.nullable),before:b.string.as(b.nullable),after:b.string.as(b.nullable)},Te){getValue(e,t){const r=de.default();if(this.widths){const o=this.widths.split("|").map(a=>parseFloat(a));o.some(isNaN)||(r.widths=o)}return this.types&&(r.types=this.types.split("")),this.compact&&(r.compact=!0),this.naked&&(r.naked=!0),this.long&&(r.long=!0),r.before=this.before,r.after=this.after,new O.Object({type:"raw",value:de.tagname,content:[],attributes:new Map([["value",JSON.stringify(r.serialize())]])})}}class Rt extends G.define("Script",{},Te,{baseTypeDecorator:e=>e.annotate(new ot)}){getValue(e,t){const r=t[0];return r instanceof O.Raw||Y(),new O.Span({content:[r]})}}const mt={widgets:[qn,Kn,Rt],shortcuts:[]},Gn=[{start:"[[",end:"]]",object:"cite"}],Jn=[{start:"$$MATH{{",end:"}}$$",object:"Math"},{start:"$$MATH1{{",end:"}}$$",prefix:"<Math pragma-spc1>"},{start:"$$MATH0{{",end:"}}$$",prefix:"<Math pragma-spc>"},{start:"&lt;&lt;",end:"&gt;&gt;",prefix:"<Math>"}],Xn=[{start:"$`",end:"`$",object:"Script"}];class oe{constructor(e){this.shortcuts=[{start:"$$EMBED{{",end:"}}$$"},{start:"$$NOTE{{",end:"}}$$",object:"__discard__"}],this._shortcutMatches=[],this._embedParser=new oe.InlineCssParser("",e),e!=null&&e.shortcuts&&this.shortcuts.push(...e.shortcuts),this.forceTableHeader=(e==null?void 0:e.forceTableHeader)??!0}get widgets(){return this._embedParser.widgets}set widgets(e){this._embedParser.widgets=e}importStyle(e,t){const r=e.getAttribute("style");return r?this._embedParser.clone(r).parseInlineCss(t):t}importContent(e,t){for(const r of e){const i=this.importNode(r);i!=null&&t.content.push(i)}this.normalizeContent(t.content,0)}normalizeContent(e,t){for(let r=t;r<e.length;r++){const i=e[r];if(r<e.length-1){const o=e[r+1];if(i.kind=="segment"&&(i.type=="ul"||i.type=="ol")&&o.kind=="segment"&&o.type==i.type&&i.content.length>0&&o.content.length>0){const a=i.content[0].getMetadata(oe.META_MARGIN_LEFT),l=o.content[0].getMetadata(oe.META_MARGIN_LEFT);if(a!=null&&l!=null){if(a==l-36){this.normalizeContent(e,r+1);const c=i.content.at(-1);c&&c.kind=="segment"&&c.type=="li"?c.content.push(e[r+1]):i.content.push(new O.Segment({type:"li",content:[e[r+1]]})),e.splice(r+1,1),r--;continue}else if(a==l){this.normalizeContent(e,r+1),i.content.push(...o.content),e.splice(r+1,1),r--;continue}}}}}}importTable(e){const t=O.Table.default();return this.importTableRows(e,t,!1),t}importTableRows(e,t,r){for(const i of e.childNodes)if(i instanceof HTMLElement){if(i.tagName=="TBODY"){this.importTableRows(i,t,!1);continue}if(i.tagName=="THEAD"){this.importTableRows(i,t,!0);continue}if(i.tagName=="TR"){const o=O.TableRow.default();o.header=r,t.content.push(o);for(const a of i.childNodes){if(!(a instanceof HTMLElement)||a.tagName!="TD")continue;const l=this.importElement(a);l!=null&&o.content.push(l)}continue}}}importElement(e){let t=null;if(e.tagName=="B"||e.tagName=="STRONG")t=new O.Span({modifier:"bold",content:[]});else if(e.tagName=="I"||e.tagName=="EM")t=new O.Span({modifier:"italics",content:[]});else if(e.tagName=="CODE"||e.tagName=="CODE")t=new O.Span({modifier:"italics",content:[]});else if(e.tagName=="UL")t=new O.Segment({type:"ul",content:[]});else if(e.tagName=="LI")t=new O.Segment({type:"li",content:[]});else if(e.tagName=="OL")t=new O.Segment({type:"ol",content:[]});else if(e.tagName=="H1")t=new O.Segment({type:1,content:[]});else if(e.tagName=="H2")t=new O.Segment({type:2,content:[]});else if(e.tagName=="H3")t=new O.Segment({type:3,content:[]});else if(e.tagName=="H4")t=new O.Segment({type:4,content:[]});else if(e.tagName=="DIV")t=new O.Segment({content:[]});else if(e.tagName=="P")t=new O.Segment({type:"p",content:[]});else if(e.tagName=="IMG")t=new O.Object({type:"media",value:e.src,content:[]});else if(e.tagName=="A")t=new O.Object({type:"link",value:e.href,content:[]});else{if(e.tagName=="TABLE")return this.importTable(e);if(e.tagName=="BR")return new O.Text({value:`
`})}t=this.importStyle(e,t);const r=e.childNodes;return r.length==0?t:t==null&&r.length==1?this.importNode(r[0]):(t??(t=new O.Span({content:[]})),this.importContent(r,t),t)}importTextNode(e){let t=e.textContent;return t==null||(t=t.replace(/\t/g," ").replace(new RegExp("(?<=\\r?\\n) +| +(?=\\r?\\n)","g"),"").replace(/\n|\r/g," ").replace(/ {2,}/g," "),t=="")?null:new O.Text({value:t})}importNode(e){if(e instanceof Text)return this.importTextNode(e);if(e instanceof HTMLElement)return this.importElement(e);if(e instanceof Comment){const t=e.textContent;if(t==null)return null;for(const{regexp:r,shortcut:i}of this._shortcutMatches){const o=t.match(r);if(o){if(i.object=="__discard__")break;const a=o[1],l=document.createElement("template");l.innerHTML=a;let c=this.flattenIntoText(l.content);i.object&&(c=`<${i.object}>${c}</${i.object}>`),i.prefix!=null&&(c=i.prefix+c),i.suffix!=null&&(c=i.suffix+c);const p=this._embedParser.clone(c);if(c.includes(`
`))return p.parseDocument();{const u=new O.Span({content:[]});return p.parseFragment(null,u.content),u}}}}return null}flattenIntoText(e){const t=[];return this.flattenNode(e,t),t.join("")}flattenNode(e,t){if(e instanceof Text)t.push(e.textContent??"");else if(e instanceof HTMLElement||e instanceof DocumentFragment){if(e instanceof HTMLElement&&e.tagName=="BR"){t.push(`
`);return}for(const r of e.childNodes)this.flattenNode(r,t)}}importDocument(e){const t=new O.Segment({content:[]}),r=e.childNodes;return this.importContent(r,t),t}importHtml(e){const t=document.createElement("template");if(this.shortcuts.length>0){const i=new RegExp(`(${this.shortcuts.map(a=>typeof a.start=="string"?we(a.start):`(?:${a.start.source})`).join("|")})`,"g"),o=new RegExp(`(${this.shortcuts.map(a=>typeof a.end=="string"?we(a.end):`(?:${a.end.source})`).join("|")})`,"g");t.innerHTML=e.replace(i,"<!--$1").replace(o,"$1-->")}else t.innerHTML=e;this._shortcutMatches=this.shortcuts.map(i=>({regexp:new RegExp(`^(?:${typeof i.start=="string"?we(i.start):i.start.source})((?:.|\\n)*)(?:${typeof i.end=="string"?we(i.end):i.end.source})$`,""),shortcut:i}));const r=t.content;return this.importDocument(r)}}(n=>{n.META_MARGIN_LEFT="META_MARGIN_LEFT";class e extends Pt{_parseInlineCssProperty(r,i,o){if(r=="margin-left")return o??(o=new O.Span({content:[]})),o.setMetadata(n.META_MARGIN_LEFT,parseInt(i)),o;if(r=="margin"){const a=i.split(" ").map(c=>c.trim()).filter(c=>c),l=a.length==1?parseInt(a[0]):a.length==2||a.length==3?parseInt(a[1]):a.length==4?parseInt(a[3]):null;if(l!=null)return o??(o=new O.Span({content:[]})),o.setMetadata(n.META_MARGIN_LEFT,l),o}return super._parseInlineCssProperty(r,i,o)}}n.InlineCssParser=e})(oe||(oe={}));const ce=-1,gt=-2;class Yn{constructor(){this._target=null,this._result=null,this._index=-1,this._value=null,this.wasDropped=!1}get wasModified(){return this._target!=this._result}isDone(){return this._index==ce?!1:this._index==gt?!0:!(this._index<this._target.length)}next(){if(this.wasDropped=!1,this._index==ce)return this._result=this._target,this._target=null,this._index=gt,this._value=this._result;if(this._index>=0&&this._index<this._target.length){const e=this._target[this._index++];return this.wasModified&&this._result.push(e),this._value=e}throw new RangeError("No more elements available")}peek(){if(this._index==ce)return this._target;if(this._index>=0&&this._index<this._target.length)return this._target[this._index];throw new RangeError("No more elements available")}drop(){this.wasDropped||(this.wasDropped=!0,this._index<=ce?this._result=null:this._index>=0&&(this.wasModified?this._result.pop():this._result=this._target.slice(0,this._index-1)))}replace(e){if(this._value=e,this.wasDropped){this.wasDropped=!1,this._index<=ce?this._result=e:this._result.push(e);return}this._index<=ce?this._result=e:this._index>=0&&(this.wasModified?this._result.splice(-1,1,e):this._result=[...this._target.slice(0,this._index-1),e])}transform(e){return this._index=ce,this._target=e,this._result=e,this.process(),this._result}transformArray(e){return this._index=0,this._target=e,this._result=e,this.process(),this._result}processChildren(e){const t=this._getChildren();if(t==null)return;const r=Ce(this);e&&Object.assign(r,e);const i=r.transformArray(t);r.wasModified&&this.applyChildren(i)}process(){for(;!this.isDone();)this.next(),this.processElement()}processElement(){this.processChildren()}}const yt=b.enum("ol","ul","none");class Zn{constructor(e){this.type=e,this.items=[],this.depths=[],this.margin=0,this.types=[]}}class Qn extends Yn{constructor(){super(...arguments),this.inheritedFrame=null,this.currentFrame=null}_getChildren(){return"content"in this._value&&typeof this._value.content!="string"?this._value.content:null}applyChildren(e){this.replace(ht(this._value,{content:e}))}process(){this.currentFrame=this.inheritedFrame,super.process()}processElement(){if(this._value.kind=="segment"){if(yt.matches(this._value.type)){this.currentFrame==null&&(this.currentFrame=new Zn("none"));const e=this._value.getMetadata(oe.META_MARGIN_LEFT);if(this.processChildren({inheritedFrame:ht(this.currentFrame,{type:this._value.type,margin:this.currentFrame.margin+(e??0)+1})}),!this.isDone()){const a=this.peek();if(a.kind=="segment"&&yt.matches(a.type)){this.drop();return}}if(this.inheritedFrame!=null){this.drop();return}const t=[],r=[],i=[],o=[];for(const[a,l,c]of bn("until-first",this.currentFrame.items,this.currentFrame.depths,this.currentFrame.types)){let p;c=="none"&&Y();const u=()=>{p=new O.Segment({type:c,content:[]}),t.length==0?o.push(p):t.at(-1).content.push(p),t.push(p),r.push(c),i.push(l)};if(t.length==0||l>i.at(-1))u();else if(l==i.at(-1))c!=r.at(-1)?(t.pop(),r.pop(),i.pop(),u()):p=t.at(-1);else{for(;t.length>0&&l<i.at(-1);)t.pop(),r.pop(),i.pop();t.length==0||l>i.at(-1)?u():c!=r.at(-1)?(t.pop(),r.pop(),i.pop(),u()):p=t.at(-1)}p.content.push(a)}o.length==1?this.replace(o[0]):o.length==0?this.drop():this.replace(new O.Segment({content:o})),this.currentFrame=null;return}if(this._value.type=="li"&&this.inheritedFrame!=null){const e=this.inheritedFrame.items.length;this.processChildren();const t=this._value.getMetadata(oe.META_MARGIN_LEFT);this.inheritedFrame.items.splice(e,0,this._value),this.inheritedFrame.depths.splice(e,0,(t??0)+this.inheritedFrame.margin),this.inheritedFrame.types.splice(e,0,this.inheritedFrame.type),this.drop();return}}super.processElement()}}class er{constructor(){this.result=[],this.indent=0,this.skipNextIndent=!0,this.tableOptions=de.default()}emitIndent(){if(this.skipNextIndent){this.skipNextIndent=!1;return}this.result.push("    ".repeat(this.indent))}exportNodeContent(e){for(const t of e.content)this.exportNode(t)}emitBlockElement(e,t){this.emitIndent(),this.result.push("\\begin{"+t+`}
`),this.indent++,this.exportNodeContent(e),this.indent--,this.emitIndent(),this.result.push("\\end{"+t+`}
`)}exportNode(e){var t,r,i,o,a,l,c,p;if(e.kind=="segment"){if(e.type==1){this.emitIndent(),this.result.push("\\section{"),this.skipNextIndent=!0,this.exportNodeContent(e),this.result.push(`}

`);return}if(e.type==2){this.emitIndent(),this.result.push("\\subsection{"),this.skipNextIndent=!0,this.exportNodeContent(e),this.result.push(`}

`);return}if(e.type==3){this.emitIndent(),this.result.push("\\subsubsection{"),this.skipNextIndent=!0,this.exportNodeContent(e),this.result.push(`}

`);return}if(typeof e.type=="number"){this.emitIndent(),this.result.push("\\paragraph{"),this.skipNextIndent=!0,this.exportNodeContent(e),this.result.push(`}
`);return}if(e.type=="p"){this.emitIndent(),this.exportNodeContent(e),this.result.push(`

`);return}if(e.type=="ul"){this.emitBlockElement(e,"itemize");return}if(e.type=="quote"){this.emitBlockElement(e,"quote");return}if(e.type=="ol"){this.emitBlockElement(e,"enumerate");return}if(e.type=="li"){this.emitIndent(),this.result.push("\\item "),this.exportNodeContent(e),this.result.push(`
`);return}this.exportNodeContent(e);return}if(e.kind=="text"){this.result.push(e.value.replace(/\\/g,"\\textbackslash").replace(/_/g,"\\_").replace(/\^/g,"\\^{}"));return}if(e.kind=="raw"){this.result.push(e.value);return}if(e.kind=="span"){const u=((t=e.attributes)==null?void 0:t.get("pragma-spc"))!=null,y=((r=e.attributes)==null?void 0:r.get("pragma-spc0"))!=null,_=((i=e.attributes)==null?void 0:i.get("pragma-spc1"))!=null;(_||u)&&this.result.push(" ");try{if(e.modifier=="code"){this.result.push(" \\texttt{"),this.exportNodeContent(e),this.result.push("}");return}if(e.modifier=="bold"){this.result.push(" \\textbf{"),this.exportNodeContent(e),this.result.push("}");return}if(e.modifier=="italics"){this.result.push(" \\textit{"),this.exportNodeContent(e),this.result.push("}");return}this.exportNodeContent(e);return}finally{(_||y)&&this.result.push(" ")}}if(e.kind=="object"&&e.type=="raw"){if(e.value&&e.value.startsWith("<>")){if(e.value==de.tagname){this.tableOptions=de.ref().deserialize(JSON.parse(e.attributes.get("value")));return}return}const u=((o=e.attributes)==null?void 0:o.get("pragma-block"))!=null,y=((a=e.attributes)==null?void 0:a.get("pragma-star"))!=null,_=((l=e.attributes)==null?void 0:l.get("pragma-spc"))!=null,g=((c=e.attributes)==null?void 0:c.get("pragma-spc0"))!=null,m=((p=e.attributes)==null?void 0:p.get("pragma-spc1"))!=null;(m||_)&&this.result.push(" ");let w=e.value;y&&(w=w+"*"),u?this.result.push(`\\begin{${w}}`):this.result.push("\\"+w);const k=e.attributes==null?null:[...e.attributes].filter(([S,j])=>!S.startsWith("pragma-"));k&&k.length>0&&this.result.push(`[${k.map(([S,j])=>j==""?S:`${S}=${j}`).join(", ")}]`),e.content.length>0&&(u||this.result.push("{"),this.exportNodeContent(e),u||this.result.push("}")),u&&this.result.push(`\\end{${w}}`),(m||g)&&this.result.push(" ");return}if(e.kind=="table"){if(e.content.length==0)return;const u=e.content[0];if(u.kind!="table-row")return;const y=u.content,{compact:_,widths:g,types:m,naked:w,long:k,before:S,after:j}=this.tableOptions;let M=1;if(!_)for(const V of g)M-=V;let E=g.map(V=>V==0?1:0).reduce(Ye.sum(),0);g.length<y.length&&(E+=y.length-g.length);const P=k?"longtable":"tabular",F=S||j?"\\tabularnewline":"\\\\";this.result.push(`\\begin{${P}}{ ${w?"":"|"}${[...cn(y.length)].map((V,H)=>{let U=H<m.length?m[H]:"p";if(!_){const $=H<g.length?g[H]:M/E;U+=`{\\dimexpr ${$}\\textwidth -2\\tabcolsep}`}return S&&(U=`>{${S}}${U}`),j&&(U=`>{${j}}${U}`),U+(w?"":"|")}).join("")}}
`),w||this.result.push(`\\hline
`);for(let V=0;V<e.content.length;V++){const H=e.content[V];H.kind!="table-row"&&Y();for(let $=0;$<H.content.length;$++){const z=H.content[$];this.exportNode(z),$==H.content.length-1||this.result.push(" & ")}const U=V==e.content.length-1;(!w||!U)&&this.result.push(F+`
`),w||this.result.push(`\\hline
`)}this.result.push(`\\end{${P}}`);return}this.result.push(`!?!${e.kind}`)}exportDocument(e){return this.exportNode(e),this.result.join("")}}const Ie="_prop";function bt(n,e){const t=Ce(n);return t.attributes=n.attributes,t.attributes.delete(e),t.attributes.size==0&&(t.attributes=null),t}class tr{constructor(){this.result=[],this.indent=0,this.skipNextIndent=!0,this.listTypes=[],this.scriptActive=[]}getListType(){return this.listTypes.at(-1)??"unordered"}isScriptActive(){return this.scriptActive.at(-1)??!1}emitIndent(){if(this.skipNextIndent){this.skipNextIndent=!1;return}this.result.push("    ".repeat(this.indent))}exportNodeContent(e){for(const t of e.content)this.exportNode(t)}exportNode(e){var t;if(e.kind=="segment"){if(typeof e.type=="number"){this.emitIndent(),this.result.push("=".repeat(e.type)+" "),this.skipNextIndent=!0,this.exportNodeContent(e),this.result.push(`

`);return}if(e.type=="p"){this.emitIndent(),this.exportNodeContent(e),this.listTypes.length==0&&this.result.push(`

`);return}if(e.type=="ul"){this.indent++,this.listTypes.push("unordered"),this.skipNextIndent=!1,this.exportNodeContent(e),this.listTypes.pop(),this.indent--;return}if(e.type=="ol"){this.indent++,this.listTypes.push("ordered"),this.skipNextIndent=!1,this.exportNodeContent(e),this.listTypes.pop(),this.indent--;return}if(e.type=="li"){this.emitIndent(),this.result.push(this.getListType()=="ordered"?"+ ":"- "),this.exportNodeContent(e),this.result.push(`
`);return}this.exportNodeContent(e);return}if(e.kind=="text"){this.result.push(e.value.replace(/([*_$@`#])/,"\\$1"));return}if(e.kind=="raw"){this.result.push(e.value);return}if(e.kind=="span"){if(e.modifier=="code"){this.result.push("`"),this.exportNodeContent(e),this.result.push("`");return}if(e.modifier=="bold"){this.result.push("*"),this.exportNodeContent(e),this.result.push("*");return}if(e.modifier=="italics"){this.result.push("_"),this.exportNodeContent(e),this.result.push("_");return}this.exportNodeContent(e);return}if(e.kind=="object"&&e.type=="link"){if(e.value!=null)this.result.push("@"+e.value);else{const r=(t=e.attributes)==null?void 0:t.get("id");r!=null&&this.result.push("<"+r+">")}e.content.length>0&&(this.result.push("["),this.exportNodeContent(e),this.result.push("]"));return}if(e.kind=="table"){if(e.content.length==0)return;const r=e.content[0];if(r.kind!="table-row")return;const i=r.content;this.result.push(`#pillar.table(
`),this.indent++,this.emitIndent(),this.result.push(`cols: "|${"l|".repeat(i.length)}",
`),this.emitIndent(),this.result.push(`table.hline(),
`);for(let o=0;o<e.content.length;o++){const a=e.content[o];a.kind!="table-row"&&Y(),this.emitIndent();for(let l=0;l<a.content.length;l++){const c=a.content[l];this.result.push("["),this.skipNextIndent=!0,this.exportNode(c),this.result.push("],")}this.result.push(`
`),this.emitIndent(),this.result.push(`table.hline(),
`)}this.indent--,this.emitIndent(),this.result.push(")");return}if(e.kind=="object"&&e.type=="raw"){if(e.value=="cite"){this.result.push("@"),this.exportNodeContent(e);return}const r=this.isScriptActive();r||(this.result.push("#"),this.scriptActive.push(!0)),e.value!=null&&this.result.push(e.value);const[i,o]=_n(e.content,l=>{var c;return l.kind=="object"&&l.type=="raw"&&((c=l.attributes)==null?void 0:c.has(Ie))!=null});let a=!1;if(e.attributes||o.length>0){this.result.push("(");let l=!0;if(e.attributes)for(const[c,p]of e.attributes){if(c=="_pos"){a=!0;continue}l?l=!1:this.result.push(", ");let u=c,y=p;u.endsWith(":")?u=u.slice(0,-1):y=JSON.stringify(p),u=="value"?this.result.push(y):this.result.push(`${u}: ${y}`)}for(const c of o){(c.kind!="object"||c.type!="raw")&&Y(),l?l=!1:this.result.push(", ");const p=c.attributes.get(Ie);p=="main"?this.exportNode(bt(c,Ie)):p==""?(this.result.push(c.value+": "),this.result.push("["),this.scriptActive.push(!1),this.exportNodeContent(c),this.scriptActive.pop(),this.result.push("]")):(this.result.push(p+": "),this.exportNode(bt(c,Ie)))}if(a){l||this.result.push(", "),this.result.push("["),this.scriptActive.push(!1);for(const c of i)this.exportNode(c);this.scriptActive.pop(),this.result.push("]")}this.result.push(")")}if(!a){this.result.push("["),this.scriptActive.push(!1);for(const l of i)this.exportNode(l);this.scriptActive.pop(),this.result.push("]")}r||this.scriptActive.pop();return}this.result.push(`!?!${e.kind}`)}exportDocument(e){return this.exportNode(e),this.result.join("")}}function Re(n,e){const t=ke.inspectObject(n);return le.formatDescription(t,{...e,color:(e==null?void 0:e.color)??(e!=null&&e.colors?Re.defaultColor:r=>r)})}(n=>{n.HTML_COLOR=(e,t)=>(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),t.custom?`<span style="color:${t.code}">${e}</span>`:t.name=="bold"?`<b>${e}</b>`:`<span style="color:${le.DEFAULT_COLOR_CODES[t.name]}">${e}</span>`),n.defaultColor=e=>e})(Re||(Re={}));const qe=nt(pe({name:"ToggleButton",props:{modelValue:{type:Boolean,default:!1},focus:{type:Boolean},fieldProps:{type:Object},required:{type:Boolean},enabledStyle:{type:Object},...Ue.FUNCTION,...Ue.STYLE},emits:{"update:modelValue":n=>!0,change:n=>!0},setup(n,e){var a;const t=ve(n.modelValue),r=ve();e.expose({input:r}),rt(()=>{n.focus&&r.value.focus()}),Z(()=>n.modelValue,l=>{t.value=l}),Z(t,(l,c)=>{l!=c&&(e.emit("update:modelValue",l),e.emit("change",l))});function i(l){const c=l.target.checked;c!=t.value&&(t.value=c)}const o=(a=Qt(Ue.GROUP_SYMBOL,void 0))==null?void 0:a.props;return()=>{const l=n.disabled||(o==null?void 0:o.disabled),{modelValue:c,focus:p,fieldProps:u,required:y,enabledStyle:_,...g}=n,m=_==null;return A(fe,Ge(g,{nativeElement:"label",class:"px-1 gap-1 flex row center-cross"},_!=null&&t.value?_:void 0),{default:()=>[A("input",Ge({class:m?"m-0":"hidden",type:"checkbox",required:y,disabled:l,onChange:i,checked:t.value,ref:r},u),null),kt(e.slots,"default")]})}}}));ie.prototype[se.CUSTOM]=function(){const n=wn(this,"kind");Object.defineProperty(n,se.CUSTOM,{value:function(){return this},enumerable:!1});for(const[e,t]of Object.entries(n))t==null&&delete n[e];return n};class wt extends G.define("EditorConfig",{importType:b.enum("md","html"),exportType:b.enum("html","latex","vue","md","typst"),htmlCitations:b.boolean.as(b.withDefault,()=>!0),htmlMath:b.boolean.as(b.withDefault,()=>!0),htmlLiteral:b.boolean.as(b.withDefault,()=>!0)},class{constructor(){return st(this)}}){}class nr extends At{constructor(t){super();Me(this,"preview",null);Me(this,"output",null);Me(this,"ast",null);this.config=t}getOutput(){return[{label:"Preview",name:"output",content:()=>this.preview!=null?typeof this.preview=="string"?A("div",{class:"mml-document",innerHTML:this.preview},null):typeof this.preview=="function"?A("div",{class:"mml-document"},[ee.pcall(()=>Ke(this.preview)).else(t=>(console.error(t),null)).unwrap()]):A(_t,{node:this.preview},null):A("div",null,null)},{label:"Output",name:"raw",content:()=>A(Nt,{content:this.output??"",config:{readOnly:!0},mode:this.config.exportType=="html"?"htmlmixed":this.config.exportType=="vue"?"javascript":void 0,class:"absolute-fill"},null)},{label:"AST",name:"ast",content:()=>this.ast&&A("pre",{class:"monospace pre-wrap m-0",innerHTML:this.ast},null)}]}_compile(t){this.output=null,this.preview=null,this.ast=null;let r;const i=Ce(mt);if(i.shortcuts=gn(mt.shortcuts),this.config.htmlCitations&&i.shortcuts.push(...Gn),this.config.htmlMath&&i.shortcuts.push(...Jn),this.config.htmlLiteral&&i.shortcuts.push(...Xn),this.config.exportType=="typst"&&(i.widgets??(i.widgets=[])).push(Rt),this.config.importType=="md")r=new Pt(t,i).parseDocument();else if(this.config.importType=="html"){r=new oe(i).importHtml(t);const o=new Qn;r=o.transform(r),o.wasDropped&&Y()}else Y();if(this.ast=Re(r,{color:le.htmlColor}),this.config.exportType=="html"){const o=new Nn;this.preview=this.output=o.render(r)}else if(this.config.exportType=="vue"){const o=new Se;o.addAllowedComponent("RouterLink","Button");const a=o.render(r);this.output=a;try{this.preview=new Function("return "+a)()({RouterLink:tn,Button:fe,h:Ke})}catch(l){console.error(l),this.preview=`<div class="text-danger monospace">${_e(l.message)}</div>`}}else if(this.config.exportType=="latex"){const o=new er;this.output=o.exportDocument(r);try{const a=(async()=>{const{HtmlGenerator:c,parse:p}=await nn(()=>import("./latex-321d74b9.js"),["assets/latex-321d74b9.js","assets/index-d8510e85.js","assets/index-0818b6c9.css"]),u=p(this.output,{generator:new c({hyphenate:!1})}),y=document.createElement("div");return y.appendChild(u.domFragment()),y})();a.catch(c=>{this.preview=`<div class="text-danger monospace">${_e(c.message)}</div>`});const l=document.createElement("iframe");l.addEventListener("load",()=>{l.contentDocument.head.innerHTML=rr,a.then(c=>{l.contentDocument.body.innerHTML=c.innerHTML})}),l.contentDocument,l.setAttribute("class","border-none absolute-fill"),this.preview=l}catch(a){console.error(a),this.preview=`<div class="text-danger monospace">${_e(a.message)}</div>`}}else if(this.config.exportType=="md"){const o=new Bn;this.output=o.render(r)}else if(this.config.exportType=="typst"){const o=new tr;this.output=o.exportDocument(r)}this.ready=!0}}const rr=`
    <link rel="stylesheet" type="text/css" href="/MiniML/latex/css/katex.css">
    <link rel="stylesheet" type="text/css" href="/MiniML/latex/css/article.css">
    <script src="/MiniML/latex/js/base.js"><\/script>
    <style>
        body { display: initial; }
        .body { padding: 2rem; }
    </style>
`,ur=pe({name:"MiniMLEditor",setup(n,e){const t=en(),r=ee.value(localStorage.getItem("mini-ml-editor:editor-config")).filterType("string").do(u=>wt.deserialize(JSON.parse(u))).else(u=>(console.error(u),wt.default())).unwrap(),i=new nr(r),o=ze({md:"Markdown",html:"HTML"});function a(){localStorage.setItem("mini-ml-editor:editor-config",JSON.stringify(r.serialize())),i.compile(i.code.value)}o.selected=r.importType,Z(()=>o.selected,u=>{r.importType=u,a()});const l=ze({html:"HTML",latex:"LaTeX",vue:"Vue",md:"Markdown",typst:"Typst"});l.selected=r.exportType,Z(()=>l.selected,u=>{r.exportType=u,a()});function c(){t.modal(()=>A("div",{class:"flex column gap-1"},[A("h3",{class:"m-0"},[J("Config")]),A(qe,{clear:!0,class:"mt-2",label:"HTML Citations",modelValue:r.htmlCitations,"onUpdate:modelValue":u=>r.htmlCitations=u,onChange:a},null),A("small",null,[J("Enables creating a cite element by surrounding text with "),A("code",null,[J("[[")]),J(" and "),A("code",null,[J("]]")])]),A(qe,{clear:!0,class:"mt-2",label:"HTML Math",modelValue:r.htmlMath,"onUpdate:modelValue":u=>r.htmlMath=u,onChange:a},null),A("small",null,[J("Enables creating a Math element by surrounding text with "),A("code",null,["<<"]),J(" and "),A("code",null,[">>"])]),A(qe,{clear:!0,class:"mt-2",label:"HTML Literal",modelValue:r.htmlLiteral,"onUpdate:modelValue":u=>r.htmlLiteral=u,onChange:a},null),A("small",null,[J("Enables creating a Script element by surrounding text with "),A("code",null,["$`"]),J(" and "),A("code",null,["`$"])])]),{props:{cancelButton:"Close"}})}function p(u){u.on("paste",(y,_)=>{if(o.selected!="html"||_.clipboardData==null)return;const g=[..._.clipboardData.items].find(m=>m.type=="text/html"&&m.kind=="string");g&&(g.getAsString(m=>{u.replaceSelection(m)}),_.preventDefault())})}return()=>A(On,{state:i,class:"flex-fill",toolbarClass:"center-cross",mode:o.selected=="md"?"markdown":"htmlmixed",localStorageId:"mini-ml-editor",onMounted:p,root:!0},{default:()=>[A(Pe,{tabs:o},null),A(Tt,{icon:rn,class:"mx-2"},null),A(Pe,{tabs:l},null),Je(A(fe,{clear:!0,icon:on,onClick:c},null),[[Le("label"),"Config"]])]})}});export{ur as MiniMLEditor,wt as _EditorConfig};
