var Lt=Object.defineProperty;var Rt=(n,e,t)=>e in n?Lt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ae=(n,e,t)=>(Rt(n,typeof e!="symbol"?e+"":e,t),t);import{r as bt,a as It,b as Dt,C as Ye,e as Ze,d as me,c as Se,w as Z,o as Qe,n as et,f as Bt,g as $,M as yt,h as tt,B as ge,i as He,N as Vt,m as Ue,j as Ft,s as wt,k as Ht,l as Ut,u as Wt,p as qt,q as Kt,t as Gt,v as _t,x as X,I as vt,y as We,z as $e,A as Jt,D as Fe,E as Xt,F as Yt,R as Zt,_ as Qt}from"./index-7bb49475.js";var en="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z",tn="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z",nn="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",it={exports:{}},st;function rn(){return st||(st=1,function(n,e){(function(t){t(bt())})(function(t){t.defineMode("css",function(P,R){var Y=R.inline;R.propertyKeywords||(R=t.resolveMode("text/css"));var Q=P.indentUnit,ee=R.tokenHooks,Ce=R.documentTypes||{},De=R.mediaTypes||{},je=R.mediaFeatures||{},Ee=R.mediaValueKeywords||{},be=R.propertyKeywords||{},ye=R.nonStandardPropertyKeywords||{},Be=R.fontProperties||{},Ve=R.counterDescriptors||{},Me=R.colorKeywords||{},k=R.valueKeywords||{},a=R.allowNested,f=R.lineComment,j=R.supportsAtComponent===!0,M=P.highlightNonStandardPropertyKeywords!==!1,N,O;function z(c,v){return N=v,c}function U(c,v){var d=c.next();if(ee[d]){var D=ee[d](c,v);if(D!==!1)return D}if(d=="@")return c.eatWhile(/[\w\\\-]/),z("def",c.current());if(d=="="||(d=="~"||d=="|")&&c.eat("="))return z(null,"compare");if(d=='"'||d=="'")return v.tokenize=W(d),v.tokenize(c,v);if(d=="#")return c.eatWhile(/[\w\\\-]/),z("atom","hash");if(d=="!")return c.match(/^\s*\w*/),z("keyword","important");if(/\d/.test(d)||d=="."&&c.eat(/\d/))return c.eatWhile(/[\w.%]/),z("number","unit");if(d==="-"){if(/[\d.]/.test(c.peek()))return c.eatWhile(/[\w.%]/),z("number","unit");if(c.match(/^-[\w\\\-]*/))return c.eatWhile(/[\w\\\-]/),c.match(/^\s*:/,!1)?z("variable-2","variable-definition"):z("variable-2","variable");if(c.match(/^\w+-/))return z("meta","meta")}else return/[,+>*\/]/.test(d)?z(null,"select-op"):d=="."&&c.match(/^-?[_a-z][_a-z0-9-]*/i)?z("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(d)?z(null,d):c.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(c.current())&&(v.tokenize=J),z("variable callee","variable")):/[\w\\\-]/.test(d)?(c.eatWhile(/[\w\\\-]/),z("property","word")):z(null,null)}function W(c){return function(v,d){for(var D=!1,te;(te=v.next())!=null;){if(te==c&&!D){c==")"&&v.backUp(1);break}D=!D&&te=="\\"}return(te==c||!D&&c!=")")&&(d.tokenize=null),z("string","string")}}function J(c,v){return c.next(),c.match(/^\s*[\"\')]/,!1)?v.tokenize=null:v.tokenize=W(")"),z(null,"(")}function le(c,v,d){this.type=c,this.indent=v,this.prev=d}function K(c,v,d,D){return c.context=new le(d,v.indentation()+(D===!1?0:Q),c.context),d}function re(c){return c.context.prev&&(c.context=c.context.prev),c.context.type}function we(c,v,d){return q[d.context.type](c,v,d)}function ue(c,v,d,D){for(var te=D||1;te>0;te--)d.context=d.context.prev;return we(c,v,d)}function rt(c){var v=c.current().toLowerCase();k.hasOwnProperty(v)?O="atom":Me.hasOwnProperty(v)?O="keyword":O="variable"}var q={};return q.top=function(c,v,d){if(c=="{")return K(d,v,"block");if(c=="}"&&d.context.prev)return re(d);if(j&&/@component/i.test(c))return K(d,v,"atComponentBlock");if(/^@(-moz-)?document$/i.test(c))return K(d,v,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(c))return K(d,v,"atBlock");if(/^@(font-face|counter-style)/i.test(c))return d.stateArg=c,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(c))return"keyframes";if(c&&c.charAt(0)=="@")return K(d,v,"at");if(c=="hash")O="builtin";else if(c=="word")O="tag";else{if(c=="variable-definition")return"maybeprop";if(c=="interpolation")return K(d,v,"interpolation");if(c==":")return"pseudo";if(a&&c=="(")return K(d,v,"parens")}return d.context.type},q.block=function(c,v,d){if(c=="word"){var D=v.current().toLowerCase();return be.hasOwnProperty(D)?(O="property","maybeprop"):ye.hasOwnProperty(D)?(O=M?"string-2":"property","maybeprop"):a?(O=v.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(O+=" error","maybeprop")}else return c=="meta"?"block":!a&&(c=="hash"||c=="qualifier")?(O="error","block"):q.top(c,v,d)},q.maybeprop=function(c,v,d){return c==":"?K(d,v,"prop"):we(c,v,d)},q.prop=function(c,v,d){if(c==";")return re(d);if(c=="{"&&a)return K(d,v,"propBlock");if(c=="}"||c=="{")return ue(c,v,d);if(c=="(")return K(d,v,"parens");if(c=="hash"&&!/^#([0-9a-fA-F]{3,4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/.test(v.current()))O+=" error";else if(c=="word")rt(v);else if(c=="interpolation")return K(d,v,"interpolation");return"prop"},q.propBlock=function(c,v,d){return c=="}"?re(d):c=="word"?(O="property","maybeprop"):d.context.type},q.parens=function(c,v,d){return c=="{"||c=="}"?ue(c,v,d):c==")"?re(d):c=="("?K(d,v,"parens"):c=="interpolation"?K(d,v,"interpolation"):(c=="word"&&rt(v),"parens")},q.pseudo=function(c,v,d){return c=="meta"?"pseudo":c=="word"?(O="variable-3",d.context.type):we(c,v,d)},q.documentTypes=function(c,v,d){return c=="word"&&Ce.hasOwnProperty(v.current())?(O="tag",d.context.type):q.atBlock(c,v,d)},q.atBlock=function(c,v,d){if(c=="(")return K(d,v,"atBlock_parens");if(c=="}"||c==";")return ue(c,v,d);if(c=="{")return re(d)&&K(d,v,a?"block":"top");if(c=="interpolation")return K(d,v,"interpolation");if(c=="word"){var D=v.current().toLowerCase();D=="only"||D=="not"||D=="and"||D=="or"?O="keyword":De.hasOwnProperty(D)?O="attribute":je.hasOwnProperty(D)?O="property":Ee.hasOwnProperty(D)?O="keyword":be.hasOwnProperty(D)?O="property":ye.hasOwnProperty(D)?O=M?"string-2":"property":k.hasOwnProperty(D)?O="atom":Me.hasOwnProperty(D)?O="keyword":O="error"}return d.context.type},q.atComponentBlock=function(c,v,d){return c=="}"?ue(c,v,d):c=="{"?re(d)&&K(d,v,a?"block":"top",!1):(c=="word"&&(O="error"),d.context.type)},q.atBlock_parens=function(c,v,d){return c==")"?re(d):c=="{"||c=="}"?ue(c,v,d,2):q.atBlock(c,v,d)},q.restricted_atBlock_before=function(c,v,d){return c=="{"?K(d,v,"restricted_atBlock"):c=="word"&&d.stateArg=="@counter-style"?(O="variable","restricted_atBlock_before"):we(c,v,d)},q.restricted_atBlock=function(c,v,d){return c=="}"?(d.stateArg=null,re(d)):c=="word"?(d.stateArg=="@font-face"&&!Be.hasOwnProperty(v.current().toLowerCase())||d.stateArg=="@counter-style"&&!Ve.hasOwnProperty(v.current().toLowerCase())?O="error":O="property","maybeprop"):"restricted_atBlock"},q.keyframes=function(c,v,d){return c=="word"?(O="variable","keyframes"):c=="{"?K(d,v,"top"):we(c,v,d)},q.at=function(c,v,d){return c==";"?re(d):c=="{"||c=="}"?ue(c,v,d):(c=="word"?O="tag":c=="hash"&&(O="builtin"),"at")},q.interpolation=function(c,v,d){return c=="}"?re(d):c=="{"||c==";"?ue(c,v,d):(c=="word"?O="variable":c!="variable"&&c!="("&&c!=")"&&(O="error"),"interpolation")},{startState:function(c){return{tokenize:null,state:Y?"block":"top",stateArg:null,context:new le(Y?"block":"top",c||0,null)}},token:function(c,v){if(!v.tokenize&&c.eatSpace())return null;var d=(v.tokenize||U)(c,v);return d&&typeof d=="object"&&(N=d[1],d=d[0]),O=d,N!="comment"&&(v.state=q[v.state](N,c,v)),O},indent:function(c,v){var d=c.context,D=v&&v.charAt(0),te=d.indent;return d.type=="prop"&&(D=="}"||D==")")&&(d=d.prev),d.prev&&(D=="}"&&(d.type=="block"||d.type=="top"||d.type=="interpolation"||d.type=="restricted_atBlock")?(d=d.prev,te=d.indent):(D==")"&&(d.type=="parens"||d.type=="atBlock_parens")||D=="{"&&(d.type=="at"||d.type=="atBlock"))&&(te=Math.max(0,d.indent-Q))),te},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:f,fold:"brace"}});function r(P){for(var R={},Y=0;Y<P.length;++Y)R[P[Y].toLowerCase()]=!0;return R}var i=["domain","regexp","url","url-prefix"],s=r(i),u=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],l=r(u),h=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme","dynamic-range","video-dynamic-range"],m=r(h),o=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light","standard","high"],b=r(o),w=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],g=r(w),p=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],_=r(p),x=["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],S=r(x),C=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],A=r(C),T=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],I=r(T),F=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","conic-gradient","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-play-button","media-slider","media-sliderthumb","media-volume-slider","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeating-conic-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],B=r(F),V=i.concat(u).concat(h).concat(o).concat(w).concat(p).concat(T).concat(F);t.registerHelper("hintWords","css",V);function H(P,R){for(var Y=!1,Q;(Q=P.next())!=null;){if(Y&&Q=="/"){R.tokenize=null;break}Y=Q=="*"}return["comment","comment"]}t.defineMIME("text/css",{documentTypes:s,mediaTypes:l,mediaFeatures:m,mediaValueKeywords:b,propertyKeywords:g,nonStandardPropertyKeywords:_,fontProperties:S,counterDescriptors:A,colorKeywords:I,valueKeywords:B,tokenHooks:{"/":function(P,R){return P.eat("*")?(R.tokenize=H,H(P,R)):!1}},name:"css"}),t.defineMIME("text/x-scss",{mediaTypes:l,mediaFeatures:m,mediaValueKeywords:b,propertyKeywords:g,nonStandardPropertyKeywords:_,colorKeywords:I,valueKeywords:B,fontProperties:S,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(P,R){return P.eat("/")?(P.skipToEnd(),["comment","comment"]):P.eat("*")?(R.tokenize=H,H(P,R)):["operator","operator"]},":":function(P){return P.match(/^\s*\{/,!1)?[null,null]:!1},$:function(P){return P.match(/^[\w-]+/),P.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(P){return P.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),t.defineMIME("text/x-less",{mediaTypes:l,mediaFeatures:m,mediaValueKeywords:b,propertyKeywords:g,nonStandardPropertyKeywords:_,colorKeywords:I,valueKeywords:B,fontProperties:S,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(P,R){return P.eat("/")?(P.skipToEnd(),["comment","comment"]):P.eat("*")?(R.tokenize=H,H(P,R)):["operator","operator"]},"@":function(P){return P.eat("{")?[null,"interpolation"]:P.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)?!1:(P.eatWhile(/[\w\\\-]/),P.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),t.defineMIME("text/x-gss",{documentTypes:s,mediaTypes:l,mediaFeatures:m,propertyKeywords:g,nonStandardPropertyKeywords:_,fontProperties:S,counterDescriptors:A,colorKeywords:I,valueKeywords:B,supportsAtComponent:!0,tokenHooks:{"/":function(P,R){return P.eat("*")?(R.tokenize=H,H(P,R)):!1}},name:"css",helperType:"gss"})})}()),it.exports}(function(n,e){(function(t){t(bt(),It(),Dt(),rn())})(function(t){var r={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function i(b,w,g){var p=b.current(),_=p.search(w);return _>-1?b.backUp(p.length-_):p.match(/<\/?$/)&&(b.backUp(p.length),b.match(w,!1)||b.match(p)),g}var s={};function u(b){var w=s[b];return w||(s[b]=new RegExp("\\s+"+b+`\\s*=\\s*('|")?([^'"]+)('|")?\\s*`))}function l(b,w){var g=b.match(u(w));return g?/^\s*(.*?)\s*$/.exec(g[2])[1]:""}function h(b,w){return new RegExp((w?"^":"")+"</\\s*"+b+"\\s*>","i")}function m(b,w){for(var g in b)for(var p=w[g]||(w[g]=[]),_=b[g],x=_.length-1;x>=0;x--)p.unshift(_[x])}function o(b,w){for(var g=0;g<b.length;g++){var p=b[g];if(!p[0]||p[1].test(l(w,p[0])))return p[2]}}t.defineMode("htmlmixed",function(b,w){var g=t.getMode(b,{name:"xml",htmlMode:!0,multilineTagIndentFactor:w.multilineTagIndentFactor,multilineTagIndentPastTag:w.multilineTagIndentPastTag,allowMissingTagName:w.allowMissingTagName}),p={},_=w&&w.tags,x=w&&w.scriptTypes;if(m(r,p),_&&m(_,p),x)for(var S=x.length-1;S>=0;S--)p.script.unshift(["type",x[S].matches,x[S].mode]);function C(A,T){var I=g.token(A,T.htmlState),F=/\btag\b/.test(I),B;if(F&&!/[<>\s\/]/.test(A.current())&&(B=T.htmlState.tagName&&T.htmlState.tagName.toLowerCase())&&p.hasOwnProperty(B))T.inTag=B+" ";else if(T.inTag&&F&&/>$/.test(A.current())){var V=/^([\S]+) (.*)/.exec(T.inTag);T.inTag=null;var H=A.current()==">"&&o(p[V[1]],V[2]),P=t.getMode(b,H),R=h(V[1],!0),Y=h(V[1],!1);T.token=function(Q,ee){return Q.match(R,!1)?(ee.token=C,ee.localState=ee.localMode=null,null):i(Q,Y,ee.localMode.token(Q,ee.localState))},T.localMode=P,T.localState=t.startState(P,g.indent(T.htmlState,"",""))}else T.inTag&&(T.inTag+=A.current(),A.eol()&&(T.inTag+=" "));return I}return{startState:function(){var A=t.startState(g);return{token:C,inTag:null,localMode:null,localState:null,htmlState:A}},copyState:function(A){var T;return A.localState&&(T=t.copyState(A.localMode,A.localState)),{token:A.token,inTag:A.inTag,localMode:A.localMode,localState:T,htmlState:t.copyState(g,A.htmlState)}},token:function(A,T){return T.token(A,T)},indent:function(A,T,I){return!A.localMode||/^\s*<\//.test(T)?g.indent(A.htmlState,T,I):A.localMode.indent?A.localMode.indent(A.localState,T,I):t.Pass},innerMode:function(A){return{state:A.localState||A.htmlState,mode:A.localMode||g}}}},"xml","javascript","css"),t.defineMIME("text/html","htmlmixed")})})();class xt{constructor(e){this.input=e,this.index=0}getCurrent(){return this.input[this.index]}at(e){return this.index+e<this.input.length&&this.index+e>=0?this.input[this.index+e]:""}read(e){const t=this.input.slice(this.index,this.index+e);return this.index+=e,t}skipUntil(e){if(typeof e=="string"){const t=e;e=(r,i)=>r.startsWith(t,i)}for(;this.index<this.input.length;){if(e(this.input,this.index))return!0;this.index++}return!1}readUntil(e){if(typeof e=="string"){const i=e;e=(s,u)=>s.startsWith(i,u)}let t=this.index;this.skipUntil(e);let r=this.index;return this.input.slice(t,r)}skipWhile(e){return this.skipUntil((t,r)=>!e(t,r))}readWhile(e){return this.readUntil((t,r)=>!e(t,r))}readAll(e){const t=[];for(;!this.isDone();)t.push(this.readUntil(e)),this.isDone()||(t.push(this.input[this.index]),this.index++);return t}isDone(){return this.index>=this.input.length}clone(e){const t=Object.assign(Object.create(this.constructor.prototype),this);return e!=null&&(t.input=e,t.index=0),t}restart(e){return this.input=e,this.index=0,this}consume(e){if(e instanceof Array){for(const t of e)if(this.consume(t))return t;return null}return this.input.startsWith(e,this.index)?(this.index+=e.length,!0):!1}matches(e){if(typeof e=="function")return e(this.input,this.index);if(e instanceof Array){for(const t of e)if(this.matches(t))return t;return null}return!!this.input.startsWith(e,this.index)}}function sn(n,e,t){const r=n.get(e);if(r)return r;const i=t();return n.set(e,i),i}function ot(n){return n instanceof Error||(n=new Error(kt(n))),n}function kt(n){return typeof n=="object"&&n==null?"null":typeof n>"u"?"undefined":n.toString()}function on(n){return n.filter(e=>e).flatMap(e=>e instanceof Array?e:[e])}function*an(n,e){for(let t=0;t<n;t++)e?yield e(t):yield t}function ne(n="Reached unreachable code"){throw new Error("Assertion failed: "+n)}const ln="0".charCodeAt(0),un="9".charCodeAt(0),cn="a".charCodeAt(0),hn="z".charCodeAt(0),St="A".charCodeAt(0),Tt="Z".charCodeAt(0);function qe(n,e=0){if(!n)return!1;const t=n.charCodeAt(e);return t>=ln&&t<=un}function dn(n,e=0){if(!n)return!1;const t=n.charCodeAt(e);return t>=cn&&t<=hn||t>=St&&t<=Tt}function at(n,e=0){if(!n)return!1;const t=n.charCodeAt(e);return t>=St&&t<=Tt}function Ot(n,e=0){return!n||!n[e]?!1:dn(n,e)||qe(n,e)||n[e]=="_"}function xe(n,e=0){return n[e]==" "||n[e]=="\r"||n[e]=="	"||n[e]==`
`}function fn(n){return[].concat(n)}function*pn(...n){for(const e of n)yield*e}function*mn(n,...e){const t=e.map(r=>r[Symbol.iterator]());for(;;){let r=!1,i=!0;const s=[];for(const u of t){const l=u.next();l.done?(r=!0,s.push(null)):(i=!1,s.push(l.value))}if(n=="until-first"&&r)return;if(i)return;yield s}}function ke(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function ve(n){return n.replace(/[^\w ]/g,e=>e=="\\"?"\\\\":`\\u${e.charCodeAt(0).toString(16).padStart(4,"0")}`)}function Ie(n){return Object.assign(Object.create(Object.getPrototypeOf(n)),n)}function gn(n,...e){const t=Ie(n);for(const r of e)delete t[r];return t}function lt(n,e){return Object.assign(Ie(n),e)}var Ke;(n=>{function e(i){return i==null?(s,u)=>s+u:(s,u)=>s+i(u)}n.sum=e;function t(i){return(s,u,l)=>{const h=i==null?u:i(u);if(s==null)return{value:h,element:u,index:l};const m=s.value;return h<m?{value:h,element:u,index:l}:s??ne()}}n.smallest=t;function r(i){return(s,u,l)=>{const h=i==null?u:i(u);if(s==null)return{value:h,element:u,index:l};const m=s.value;return h>m?{value:h,element:u,index:l}:s??ne()}}n.largest=r})(Ke||(Ke={}));function*bn(n){for(let e=n.length-1;e>=0;e--)yield n[e]}var ut;(n=>{function e(l){return h=>h instanceof l}n.instanceOf=e;function t(l){return h=>typeof h==l}n.typeOf=t;function r(l){return l==null?h=>!1:"has"in l?h=>l.has(h):h=>l.includes(h)}n.containedIn=r;function i(l){return(...h)=>!l(...h)}n.invert=i;function s(){return l=>l!=null}n.notNull=s;function u(...l){return h=>{for(const m of l)if(!m(h))return!1;return!0}}n.and=u,n.not=new Proxy({},{get(l,h,m){const o=n[h];return(...b)=>{const w=o(...b);return(...g)=>!w(...g)}}})})(ut||(ut={}));function yn(n,e){const t=new Map(n);for(const[r,i]of e)t.set(r,i);return t}function Ge(n,e){if(e==null)return n;if(typeof n=="object"&&n!=null){if(n instanceof Array)return n.push(...e),n;for(const[t,r]of Object.entries(e)){const i=t in n?n[t]:void 0;if(typeof i=="object"&&i!=null){n[t]=Ge(i,r);continue}n[t]=r}return n}return e}class ce extends Error{constructor(){super(...arguments),this.name="PredicateFailedError"}}class se{constructor(e){this._rejected=null,this._value=e}get rejected(){return this._rejected}else(e){if(this._rejected){const t=e(this._rejected);t instanceof se?t._rejected?(this._value=null,this._rejected=t._rejected):(this._value=t._value,this._rejected=null):(this._value=t,this._rejected=null)}return this}effect(e,...t){return this._rejected?this:(e(this._value,...t),this)}unwrap(){if(this._rejected)throw this._rejected;return this._value}tryUnwrap(){if(!this._rejected)return this._value}unwrapOrError(){return this._rejected?this._rejected:this._value}do(e,...t){if(!this._rejected){const r=e(this._value,...t);r instanceof se?r._rejected?this._rejected=r._rejected:this._value=r._value:this._value=r}return this}try(e,...t){if(!this._rejected)try{const r=e(this._value,...t);r instanceof se?r._rejected?this._rejected=r._rejected:this._value=r._value:this._value=r}catch(r){this._rejected=ot(r),this._value=null}return this}filter(e,t="Value did not match predicate"){return this._rejected?this:(e(this._value)||(this._rejected=new ce(t),this._value=null),this)}assertType(){return this}rejectType(e,t=`Value was of type "${e.name}"`){return this._rejected?this:(this._value instanceof e&&(this._rejected=new ce(t),this._value=null),this)}notNull(){return this._rejected?this:(this._value==null&&(this._rejected=new ce("Value is null"),this._value=null),this)}notNaN(){return this._rejected?this:((typeof this._value!="number"||isNaN(this._value))&&(this._rejected=new ce("Value is NaN"),this._value=null),this)}filterType(e,t=`Value was not of type "${typeof e=="string"?e:e.name}"`){return this._rejected?this:(typeof e=="string"?typeof this._value!=e&&(this._rejected=new ce(t),this._value=null):this._value instanceof e||(this._rejected=new ce(t),this._value=null),this)}rejectValue(e,t=`Value was "${kt(e)}"`){return this._rejected||this._value==e&&this._value==e&&(this._rejected=new ce(t),this._value=null),this}static value(e){return new se(e)}static rejected(e){const t=new se(null);return t._rejected=e,t}static pcall(e,...t){try{return se.value(e(...t))}catch(r){return se.rejected(ot(r))}}}function wn(n,e,t=null,r=null){const i=new RegExp(ve(e)),s=(t??n.posFromIndex(0)).line,u=(r==null?void 0:r.line)??n.lastLine();for(let l=s;l<=u;l++){let h=n.getLine(l);l==u&&r!=null&&(h=h.slice(0,r.ch)),l==s&&t!=null&&(h=h.slice(t.ch));const m=i.exec(h);if(m){let o=m.index;return l==s&&t!=null&&(o+=t.ch),Ye.Pos(l,o)}}return null}const _n={"Shift-Ctrl-L":"deleteLine","Ctrl-Space":"autocomplete","Ctrl-D"(n){const e=new Set;for(const r of n.listSelections()){const i=r.from().line,s=r.to().line;for(let u=i;u<=s;u++)e.add(u)}const t=[...e];for(const r of bn(t)){const i=n.getLine(r),s={ch:i.length,line:r};n.replaceRange(`
`+i,s,s)}},"Shift-Tab":"indentLess","Shift-Alt-D"(n){if(!n.somethingSelected()){const s=n.findWordAt(n.getCursor());n.addSelection(s.from(),s.to());return}const t=n.listSelections().at(-1),r=n.getRange(t.from(),t.to()),i=wn(n,r,t.to());i&&n.addSelection(i,Ye.Pos(i.line,i.ch+r.length))}},Ct=Ze(me({name:"Editor",props:{content:{type:String,default:""},highlight:{type:Object},mode:{type:null},config:{type:Object},useExtendedShortcuts:{type:Boolean,default:!0}},emits:{change:n=>!0,mounted:n=>!0},setup(n,e){const t=Se();let r=null,i=n.content;Z(()=>n.content,l=>{r&&l!=r.getValue()&&r.setValue(l)}),Z(()=>n.mode,l=>{r&&r.setOption("mode",l)});function s(l){l.classList.add("absolute-fill"),l.style.height="100%",t.value=l}Qe(()=>{var h;r=Ye(s,{value:i,lineNumbers:!0,mode:n.mode??"simple",lineWrapping:!0,indentUnit:4,...n.config,extraKeys:{...n.useExtendedShortcuts?_n:void 0,...(h=n.config)==null?void 0:h.extraKeys,"Ctrl-S":()=>e.emit("change",i)}}),et(()=>r.refresh());let l=0;r.on("change",()=>{var o;const m=r.getValue();if(m.length>i.length&&r.state.selectionActive==null&&((o=n.config)!=null&&o.hintOptions)&&!n.config.hintOptions.completeSingle&&Date.now()-l>50){const b=r.findWordAt(r.getCursor()),w=r.getRange(b.from(),b.to());w.length>0&&new xt(w).readWhile(Ot)==w&&r.execCommand("autocomplete")}i=m}),r.on("endCompletion",()=>{l=Date.now()}),r.on("blur",()=>{e.emit("change",i)}),e.emit("mounted",r)}),Bt(()=>{e.emit("change",i)});let u=null;return Z(()=>n.highlight,l=>{if(u&&(u.clear(),u=null),r==null||l==null)return;let h=l.offset;l.lineOffset&&(h+=r.indexFromPos({ch:0,line:l.lineOffset}));const m=r.posFromIndex(h),o=r.posFromIndex(h+l.length);r.scrollIntoView(m),u=r.getDoc().markText(m,o,{className:"bg-warning-translucent"})}),()=>$("div",null,[$(yt,{node:t.value},null)])}}));function Ne(n){return typeof n=="string"?n:`calc(var(--size-int) * ${n})`}function ct(){const n={display:"grid"};let e=!1,t=!1;return{rows(...r){return n.gridTemplateRows=r.map(Ne).join(" "),e=!0,this},columns(...r){return n.gridTemplateColumns=r.map(Ne).join(" "),e=!0,this},autoRows(r){return n.gridAutoRows=Ne(r),e=!0,this},autoColumns(r){return n.gridAutoColumns=Ne(r),e=!0,this},left(r,i){return t=!0,i==null?n.gridColumn=r.toString():n.gridColumn=`${r} / ${i}`,this},top(r,i){return t=!0,i==null?n.gridRow=r.toString():n.gridRow=`${r} / ${i}`,this},colspan(r){return this.left("auto",`span ${r}`)},rowspan(r){return this.top("auto",`span ${r}`)},debug(){return n["--debug"]=JSON.stringify(JSON.stringify(n)),this},get $(){return t&&!e&&delete n.display,n}}}function Pe(n={},e=null){return tt({selected:e??Object.keys(n)[0],list:Object.entries(n),next(){const r=this.list.findIndex(i=>i[0]==this.selected)%this.list.length;this.selected=this.list[r][0]}})}const vn={variant:{type:String},tabs:{type:Object,required:!0},compact:{type:Boolean},buttonClass:{type:String},border:{type:Boolean}},ze=me({name:"Tabs",props:vn,setup(n,e){if(n.border)return()=>$("div",{class:["flex row pt-1",!n.compact&&"gap-1"]},[n.tabs.list.map(([i,s])=>$(ge,{onClick:()=>n.tabs.selected=i,textual:!0,key:i,class:[n.buttonClass,"as-retro-tab",n.tabs.selected==i&&"-selected"]},{default:()=>[typeof s=="string"?s:s(),$("div",{class:"-border"},null),$("div",{class:"-connector"},null)]}))]);const t={};function r(i,s,u){if(!i)throw new Error("Selected state changed to null");if(!s){if(!(i in t)){if(u)throw new Error("Selected tab does not exist");et(()=>r(i,s,!0));return}t[i].classList.add("active");return}const l=t[s],h=t[i],m=l.getBoundingClientRect();l.classList.remove("active"),h.classList.add("active");const o=h.getBoundingClientRect(),b=m.left+m.width/2-(o.left+o.width/2),w=m.width/o.width;h.style.transform=`translateX(${b}px) scaleX(${w})`,setTimeout(()=>{h.classList.add("moving"),h.style.transform="none",setTimeout(()=>{h.classList.remove("moving")},100)},10)}return Z(()=>n.tabs.selected,(i,s)=>{n.tabs.list.length!=0&&r(i,s,!1)}),Qe(()=>{n.tabs.selected&&(n.tabs.selected in t||(n.tabs.selected=Object.keys(t)[0]),t[n.tabs.selected].classList.add("active"))}),()=>$("div",{class:["flex row",!n.compact&&"gap-4"]},[n.tabs.list.map(([i,s])=>$(ge,{onClick:()=>n.tabs.selected=i,textual:!0,flat:!0,key:i,class:["pb-1 px-0",n.buttonClass]},{default:()=>[typeof s=="string"?s:He(s),$("div",{ref:u=>t[i]=u,class:["as-tabs-indicator",n.variant?`bg-${n.variant}`:"bg-highlight"]},null)]}))])}}),xn=me({name:"TabbedContainer",props:{defaultValue:{type:String},tabsProps:{type:Object},tabsWrapper:{type:Function},externalTabs:{type:Object},...Vt},setup(n,e){function t(){var l,h;const s=Ft((h=(l=e.slots).default)==null?void 0:h.call(l)),u=[];for(const m of s)if(typeof m=="object"&&m!=null&&m.type==Je){if(m.props==null||m.props.name==null)continue;const o=m.props.name,b=m.props.label??o;u.push({name:o,label:b,content:m})}return u}function r(s){const u=i.list,l=s.map(h=>[h.name,h.label]);u.map(h=>h[0]).join(",")!=l.map(h=>h[0]).join(",")&&et(()=>{var h;l.some(m=>m[0]==i.selected)||(i.selected=((h=l[0])==null?void 0:h[0])??""),i.list=l})}const i=n.externalTabs??Pe({});return()=>{const s=t();r(s);const u=s.find(h=>h.name==i.selected),l=n.tabsWrapper?n.tabsWrapper(u==null?void 0:u.content):u==null?void 0:u.content;return n.externalTabs?$("div",null,[l]):$("div",null,[$(ze,Ue(n.tabsProps,{tabs:i}),null),l])}}}),Je=me({name:"Tab",props:{name:{type:String,required:!0},label:{type:null}},setup(n,e){return()=>{var t,r;return(r=(t=e.slots).default)==null?void 0:r.call(t)}}});class jt{constructor(){return this.code=wt(""),this.errors=tt([]),this.ready=!1,Ht(this)}isLanguageService(){return!1}compile(e){this.ready=!1,this.errors.length=0;try{this._compile(e)}catch(t){console.error(t),this.errors.push(`<span class="text-danger">Failed to run code due to internal error:<br />&nbsp;&nbsp;${ke(Ut(t))}</span>`)}}}function kn(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Jt(n)}const Sn=Ze(me({name:"EditorView",props:{code:{type:String},root:{type:Boolean},vertical:{type:Boolean},noRunButton:{type:Boolean},tab:{type:String},mode:{type:null},localStorageId:{type:String},config:{type:Object},codeRatio:{type:Number},state:{type:jt,required:!0},toolbarClass:{type:null}},emits:{compile:(n,e)=>!0,mounted:n=>!0},setup(n,e){const t=Wt(),r=qt();n.localStorageId&&!n.root&&console.warn("EditorView has localStorageId but it is not root, so no state will be saved"),Z(()=>n.code,()=>{n.code!=null&&(n.state.code.value=n.code)},{immediate:!0});const i=Pe();if(n.tab!=null&&(i.selected=n.tab),Z(()=>n.tab,()=>{n.tab!=null&&(i.selected=n.tab)}),n.root){if(t.query.code){const g=t.query.code;n.state.code.value=g,r.replace({query:{code:void 0}})}else if(n.localStorageId!=null){const g=localStorage.getItem(n.localStorageId+":editor-code");g!=null&&(n.state.code.value=g)}if(n.localStorageId){const g=localStorage.getItem(n.localStorageId+":editor-tab");g!=null&&(i.selected=g),Z(n.state.code,p=>localStorage.setItem(n.localStorageId+":editor-code",p)),Z(()=>i.selected,p=>localStorage.setItem(n.localStorageId+":editor-tab",p))}}function s(){n.state.compile(n.state.code.value)}Z(n.state.code,s,{immediate:!0});const u=Se(),l=Se(!1);Kt(()=>{const p=u.value.clientHeight<500;l.value!=p&&(l.value=p)},{immediate:!0});function h(){return $("div",{class:"absolute-fill flex column gap-2 scroll p-2"},[n.state.errors.map(g=>$("div",{class:"border border-danger rounded pre-wrap monospace px-2",innerHTML:g},null))])}let m=null;const o=wt(null);function b(g){if(m&&(m.classList.remove("bg-warning-translucent"),m=null),o.value=null,g.target instanceof HTMLElement){const p=g.target.closest("[data-offset][data-length]");if(p){const _=+p.dataset.offset,x=+p.dataset.length;let S=p.dataset.lineOffset;S!=null&&(S=+S),m=p,m.classList.add("bg-warning-translucent"),o.value={offset:_,length:x,lineOffset:S}}}}const w=Gt(()=>{let g=null;return n.state.isLanguageService()&&(g=Ge(g,{hintOptions:{hint:p=>n.state.getHints(p),updateOnCursorActivity:!0,completeSingle:!1},lint:{getAnnotations:(p,_,x)=>n.state.getAnnotations(p,x)}})),g=Ge(g,n.config),g});return()=>{let g;const p=$("div",{class:["p-1 px-2 flex row gap-2",n.toolbarClass]},[$("div",{class:"flex-fill flex row gap-2"},[_t(e.slots,"default")]),!n.noRunButton&&$(ge,{onClick:s,variant:"success"},{default:()=>[X("Run "),$(vt,{icon:tn},null),X(" ")]})]),_=$("div",{class:"p-1 px-2"},[$(ze,{border:!0,class:"absolute left-0 bottom-0 ml-1",tabs:i},null)]),x=$("div",null,[$(Ct,{content:n.state.code.value,onChange:C=>n.state.code.value=C,onMounted:C=>e.emit("mounted",C),class:"absolute-fill",highlight:o.value,mode:n.mode,config:w.value},null)]),S=$("div",{class:"flex column",ref:u},[$(xn,{class:"flex-fill",externalTabs:i,onMousemove:b,onMouseleave:b},{default:()=>[n.state.getOutput().map(C=>$(Je,{name:C.name,key:C.name,label:C.label},{default:()=>[$("div",{class:"absolute-fill overflow-auto p-2"},[n.state.ready?typeof C.content=="string"?$("div",{class:"monospace pre-wrap",innerHTML:C.content},null):C.content():$("div",{class:"muted p-2"},[X("Waiting for compilation...")])])]})),l.value&&$(Je,{name:"errors",label:"Errors"},kn(g=h())?g:{default:()=>[g]})]}),l.value==!1&&n.state.errors.length>0&&$("div",{class:"flex-basis-300 border-top",onMousemove:b,onMouseleave:b},[h()])]);return n.vertical?We($("div",{class:"flex-fill",style:ct().rows("auto",`${n.codeRatio??1}fr`,8,`${n.codeRatio!=null?1-n.codeRatio:1}fr`).$},[p,X(" "),x,X(" "),_,X(" "),S]),[[$e("child-class"),"border-bottom","head3"]]):We($("div",{class:"flex-fill",style:ct().columns(`${n.codeRatio??1}fr`,`${n.codeRatio!=null?1-n.codeRatio:1}fr`).rows("auto","1fr").$},[p,X(" "),_,X(" "),x,X(" "),S]),[[$e("child-class"),"border-right","odd"],[$e("child-class"),"border-bottom","head2"]])}}})),Tn=n=>n;function ht(n){return n==0?n+"":n+"px"}class Et{_renderContent(e){return e.map(t=>this._renderNode(t))}_normalizeAttributes(e,t=null){if(e.attributes&&(t!=null?t=new Map(pn(e.attributes,t)):t=e.attributes),e.classList!=null){t!=null&&e.attributes==t&&(t=new Map(t)),t??(t=new Map);const r=t.get("class");t.set("class",r?r+" "+e.classList.join(" "):e.classList.join(" "))}if(e.color!=null)if(t!=null&&e.attributes==t&&(t=new Map(t)),t??(t=new Map),e.color.startsWith("#"))t.set("style",(t.get("style")??"")+`;color:${e.color}`);else{const r=t.get("class");t.set("class",r?r+" "+e.color:e.color)}for(const[r,i,s]of[["align","text-align",Tn],["width","width",ht],["height","height",ht]])e[r]!=null&&(t??(t=new Map),t.set("style",(t.get("style")??"")+`;${i}:${s(e[r])}`));return t}_renderSpan(e){const t=e.modifier=="bold"?"strong":e.modifier=="italics"?"em":e.modifier=="code"?"code":"span";return this._renderElement(t,this._normalizeAttributes(e),e.content)}_renderObject(e){const t=e.type=="media"?"img":e.type=="link"?"a":e.type=="raw"?e.value??"span":ne();let r=null;return e.value!=null&&(e.type=="media"?(r=new Map,r.set("src",e.value)):e.type=="link"&&(r=new Map,r.set("href",e.value))),this._renderElement(t,this._normalizeAttributes(e,r),e.content)}_renderSegment(e){const t=this._normalizeAttributes(e);if(t!=null||e.type!=null){const r=e.type=="ol"?"ol":e.type=="ul"?"ul":e.type=="li"?"li":e.type=="quote"?"blockquote":e.type=="p"?"p":e.type==4?"h4":e.type==3?"h3":e.type==2?"h2":e.type==1?"h1":ne();return this._renderElement(r,t,e.content)}else return this._renderElement("",null,e.content)}_renderCodeBlock(e){return this._renderElementRaw("pre",null,this._renderElementRaw("code",e.lang!=null?new Map([["class","language-"+e.lang]]):null,this._renderText(e.content)))}_renderTable(e){const t=[],r=[];for(const s of e.content)if(s.kind=="table-row"){if(s.header){t.push(s);continue}r.push(s)}const i=s=>this._renderElementRaw("tr",null,s.content.map(u=>this._renderElementRaw("td",null,this._renderNode(u))).join(""));return this._renderElementRaw("table",null,on([t.length>0&&this._renderElementRaw("thead",null,t.map(i).join("")),r.length>0&&this._renderElementRaw("tbody",null,r.map(i).join(""))]).join(""))}_renderNode(e){if(e.kind=="text")return this._renderText(e.value);if(e.kind=="raw")return this._renderRaw(e.value);if(e.kind=="span")return this._renderSpan(e);if(e.kind=="object")return this._renderObject(e);if(e.kind=="segment")return this._renderSegment(e);if(e.kind=="code-block")return this._renderCodeBlock(e);if(e.kind=="table")return this._renderTable(e);if(e.kind=="newline")return this._renderElement("br",null,[]);ne()}render(e){return this._renderNode(e)}}class On extends Et{_renderAttributes(e=null){return e==null||e.size==0?"":" "+[...e].map(t=>`${t[0]}="${t[1]}"`).join(" ")}_renderText(e){return ke(e).replace(/\n/g,"<br>")}_renderRaw(e){return e}_renderElement(e,t,r){return e==""?this._renderContent(r).join(""):e=="br"?`<${e}${this._renderAttributes(t)}>`:`<${e}${this._renderAttributes(t)}>${this._renderContent(r).join("")}</${e}>`}_renderElementRaw(e,t,r){return`<${e}${this._renderAttributes(t)}>${r}</${e}>`}}class L extends Error{constructor(e){super("__MSG"),this._message=e,this.name="DeserializationError",this.path="",this._isClientError=!0,this._oldMessage=this.message,this._oldStack=this.stack??"",this._updateMessage()}_updateMessage(){const e=`Invalid type at .${this.path} : ${this._message}`;this.message=this._oldMessage.replace(/__MSG/,e),this.stack=this._oldStack.replace(/__MSG/,e)}appendPath(e){this.path=`${e}${this.path?`.${this.path}`:this.path}`,this._updateMessage()}}class Cn{}class Mt{}class At extends Cn{createPrimitive(e){return e}createAtom(e){return e}createNull(){return null}createAny(e){return e}createObject(){return{}}addObjectProperty(e,t,r){r!=y.IGNORE_VALUE&&(e[t]=r)}createArray(){return[]}addArrayElement(e,t){t!=y.IGNORE_VALUE&&e.push(t)}createMap(){return{}}addMapProperty(e,t,r){r!=y.IGNORE_VALUE&&(e[t]=r)}finish(e){return e==y.IGNORE_VALUE?null:e}}class Nt extends Mt{constructor(e){super(),this.root=e}getRootHandle(){return this.root}parsePrimitive(e){return e}parseAtom(e){return e}getTypeHint(e){if(typeof e=="string")return"string";if(typeof e=="number")return"number";if(typeof e=="boolean")return"boolean";if(e==null)return"null";if(typeof e=="object")return e instanceof Array?"array":"object";throw new TypeError("Cannot get type hint")}isNull(e){return e==null}parseAny(e){return e}parseObject(e){return typeof e!="object"||e==null||Array.isArray(e)?null:e}getObjectProperty(e,t){return t in e?e[t]:null}parseArray(e){return Array.isArray(e)?e:null}*getArrayElements(e){for(const t of e)yield t}parseMap(e){return this.parseObject(e)}*getMapProperties(e){for(const t of Object.entries(e))yield t}}class jn extends Mt{constructor(e){super(),this.root=e}getRootHandle(){return this.root}parsePrimitive(e){return e}parseAtom(e){return e}isNull(e){return e==null}getTypeHint(e){if(typeof e=="string")return"string";if(typeof e=="number")return"number";if(typeof e=="boolean")return"boolean";if(e==null)return"null";if(typeof e=="object")return e instanceof Array?"array":"object";throw new TypeError("Cannot get type hint")}parseAny(e){return e}parseObject(e){return e}getObjectProperty(e,t){return e[t]}parseArray(e){return e}*getArrayElements(e){yield*e}parseMap(e){return e}*getMapProperties(e){yield*e}}const En=new Map;class y{constructor(){this._annotations=null}get definition(){return this.getDefinition("")}as(e,...t){return e(this,...t)}serialize(e,t=At){const r=new t,i=this._serialize(e,r);return r.finish(i)}deserialize(e,t=Nt){const r=new t(e);return this._deserialize(r.getRootHandle(),r)}derive(e=Object.getPrototypeOf(this)){return Object.create(e,Object.getOwnPropertyDescriptors(this))}annotate(...e){const t=e.map(i=>[i.constructor,i]),r=this.derive();return this._annotations==null?(r._annotations=new Map(t),r):(r._annotations=new Map([...this._annotations,...t]),r)}getMetadata(){return this._annotations==null?En:this._annotations}clone(e){return this.deserialize(e,jn)}matches(e){try{return this.verify(e),!0}catch(t){if(t instanceof L)return!1;throw t}}}(n=>{var e,t,r,i,s,u,l;n.IGNORE_VALUE=Symbol.for("struct.ignore");function h(k){return k instanceof n}n.isType=h;class m extends n{constructor(a,f){super(),this.name=a,this._default=f,this._typeof=typeof this._default}getDefinition(a){return a+this.name}default(){return this._default}_serialize(a,f){return f.createAtom(a)}_deserialize(a,f){const j=f.parseAtom(a);if(typeof j!=this._typeof)throw new L("Expected "+this.name);return j}verify(a){if(typeof a!=this._typeof)throw new L("Expected "+this.name);return a}}n.AtomType=m,n.atom=new m("atom","");class o extends n{constructor(a,f){super(),this.name=a,this._default=f,this._typeof=typeof this._default}getDefinition(a){return a+this.name}default(){return this._default}_serialize(a,f){return f.createPrimitive(a)}_deserialize(a,f){const j=f.parsePrimitive(a);if(typeof j!=this._typeof)throw new L("Expected "+this.name);return j}verify(a){if(typeof a!=this._typeof)throw new L("Expected "+this.name);return a}}n.PrimitiveType=o,n.number=new o("number",0),n.boolean=new o("boolean",!1),n.string=new o("string",""),n.empty=new class extends o{verify(a){}_deserialize(a,f){}constructor(){super("empty",null)}};const b=Symbol.for("struct.isArray");n.isArray=k=>b in k;class w extends n{constructor(a){super(),this.elementType=a,this.name=this.elementType.name+"[]",this[e]=!0}getDefinition(a){return this.elementType.getDefinition(a)+"[]"}default(){return[]}_serialize(a,f){const j=f.createArray();for(const M of a){const N=this.elementType._serialize(M,f);f.addArrayElement(j,N)}return j}_deserialize(a,f){const j=[],M=f.parseArray(a);if(M==null)throw new L("Expected "+this.definition);let N=-1;for(const O of f.getArrayElements(M)){N++;let z;try{z=this.elementType._deserialize(O,f)}catch(U){throw U instanceof L&&U.appendPath(N.toString()),U}z!=n.IGNORE_VALUE&&j.push(z)}return j}verify(a){if(typeof a!="object"||a==null||!Array.isArray(a))throw new L("Expected "+this.definition);let f=-1;for(const j of a){f++;try{this.elementType.verify(j)}catch(M){throw M instanceof L&&M.appendPath(f.toString()),M}}return a}}e=b,n.ArrayType=w;function g(k){return new w(k)}n.array=g;const p=Symbol.for("struct.isMap");n.isMap=k=>p in k;class _ extends n{constructor(a,f){super(),this.keyType=a,this.valueType=f,this.name=`Map<${this.keyType.name}, ${this.valueType.name}>`,this[t]=!0}getDefinition(a){return a+`Map<${this.keyType.definition}, ${this.valueType.definition}>`}default(){return new Map}_serialize(a,f){const j=f.createMap();for(const[M,N]of a){const O=this.keyType._serialize(M,f),z=this.valueType._serialize(N,f);f.addMapProperty(j,O,z)}return j}_deserialize(a,f){const j=new Map,M=f.parseMap(a);if(M==null)throw new L("Expected "+this.definition);let N=-1;for(const[O,z]of f.getMapProperties(M)){N++;let U,W;try{U=this.keyType._deserialize(O,f)}catch(J){throw J instanceof L&&J.appendPath(N.toString()),J}try{W=this.valueType._deserialize(z,f)}catch(J){throw J instanceof L&&J.appendPath(U.toString()),J}W!=n.IGNORE_VALUE&&j.set(U,W)}return j}verify(a){if(typeof a!="object"||a==null||!(a instanceof Map))throw new L("Expected "+this.definition);let f=-1;for(const[j,M]of a){f++;try{this.keyType.verify(j)}catch(N){throw N instanceof L&&N.appendPath(f.toString()),N}try{this.valueType.verify(M)}catch(N){throw N instanceof L&&N.appendPath(j.toString()),N}}return a}}t=p,n.MapType=_;function x(k,a){return new _(a??n.string,k)}n.map=x;const S=Symbol.for("struct.isObject");class C extends n{constructor(a,f){super(),this.name=a,this.props=f,this.propList=Object.entries(this.props),this[r]=!0,this._migrations=null}getDefinition(a){const f=[];f.push(a+this.name+" {");const j=a+"    ";for(const[M,N]of this.propList)f.push(`${j}${M}: ${N.definition}`);return f.push(a+"}"),f.join(`
`)}default(){const a=this._makeBase();for(const[f,j]of this.propList)a[f]=j.default();return a}_serialize(a,f){const j=f.createObject();this._migrations&&f.addObjectProperty(j,"!version",f.createPrimitive(this._migrations.currVersion));for(const[M,N]of this.propList){const O=a[M],z=N._serialize(O,f);f.addObjectProperty(j,M,z)}return j}_makeBase(){return{}}_deserialize(a,f){const j=this._makeBase(),M=f.parseObject(a);if(M==null)throw new L("Expected "+this.definition);if(this._migrations!=null){const N=this._migrations.currVersion,O=f.getObjectProperty(M,"!version");let z;if(f.isNull(O))z=-1;else try{z=n.number._deserialize(O,f)}catch(W){throw W instanceof L&&W.appendPath("!version"),W}let U;if(z<N){U=new Map;const W=this._migrations.list.findIndex(J=>J.version>z);if(W==-1)throw new Error("Cannot perform migration, source version is less than current version but there are no migrations newer than source version");for(let J=W;J<this._migrations.list.length;J++)this._migrations.list[J].migrate(M,f,U)}this._apply(j,M,f,U)}else this._apply(j,M,f);return j}_apply(a,f,j,M){for(const[N,O]of this.propList){if(M!=null&&M.has(N)){a[N]=M.get(N);continue}const z=j.getObjectProperty(f,N);let U;try{U=O._deserialize(z,j)}catch(W){throw W instanceof L&&W.appendPath(N),W}U!=n.IGNORE_VALUE&&(a[N]=U)}}defineMigrations(a){if(a.length==0)return;a=a.sort((j,M)=>j.version-M.version);const f=a[a.length-1].version;this._migrations={currVersion:f,list:a}}verify(a){if(typeof a!="object"||a==null)throw new L("Expected "+this.definition);for(const[f,j]of this.propList)try{j.verify(a[f])}catch(M){throw M instanceof L&&M.appendPath(f),M}return a}}r=S,n.ObjectType=C;class A extends C{constructor(a,f){super(a,{}),this._getter=f,Object.defineProperty(this,"props",{configurable:!0,enumerable:!0,get:()=>{if(this._getter==null)throw new Error("Tried to compute props on a LazyObjectType, but the getter was already set to null");const j={};return Object.defineProperty(this,"props",{value:j,enumerable:!0,configurable:!0,writable:!0}),this._getter(j),this._getter=null,j}}),Object.defineProperty(this,"propList",{configurable:!0,enumerable:!0,get:()=>{const j=Object.entries(this.props);return Object.defineProperty(this,"propList",{value:j,enumerable:!0,configurable:!0,writable:!0}),j}})}}n.LazyObjectType=A;class T extends C{constructor(a,f){super(a,f),this.props=f}}n.TypedObjectType=T;function I(k){return new T("$anon",k)}n.object=I;function F(k,a){return new T(k,a)}n.namedType=F;function B(k,a){return new A(k,a)}n.lazyNamedType=B;function V(k,a,f,j){return j?new class extends C{_makeBase(){return new k}default(){return j()}constructor(){super(a,f)}}:new class extends C{_makeBase(){return new k}constructor(){super(a,f)}}}n.objectWithClass=V,n.isObject=k=>S in k,n.partial=k=>new C("Partial<"+k.name+">",Object.fromEntries(k.propList.map(([a,f])=>[a,(0,n.isNullable)(f)?f:n.nullable(f)])));function H(k,...a){return new C("$anon",Object.fromEntries(a.map(f=>[f,k.props[f]])))}n.pick=H;function P(k,...a){return new C("$anon",Object.fromEntries(a.map(f=>[f,k.props[f]])))}n.omit=P;const R=Symbol.for("struct.isNullable");n.isNullable=k=>R in k;class Y extends n{constructor(a,f){super(),this.base=a,this.skipNullSerialize=f,this.name=this.base.name+" | "+null,this[i]=!0}getDefinition(a){return this.base.getDefinition(a)+" | "+null}default(){return null}_serialize(a,f){return a==null?this.skipNullSerialize?n.IGNORE_VALUE:f.createNull():this.base._serialize(a,f)}_deserialize(a,f){return f.isNull(a)?null:this.base._deserialize(a,f)}verify(a){return a==null?null:this.base.verify(a)}}i=R,n.NullableType=Y;function Q(k,{skipNullSerialize:a=!1}={}){return new Y(k,a)}n.nullable=Q;const ee=Symbol.for("struct.isOptional");n.isOptional=k=>ee in k;class Ce extends n{constructor(a,f){super(),this.base=a,this.defaultFactory=f,this.name=this.base.name+"?",this[s]=!0}getDefinition(a){return this.base.getDefinition(a)+"?"}default(){return this.defaultFactory==null?this.base.default():this.defaultFactory()}_serialize(a,f){return this.base._serialize(a,f)}_deserialize(a,f){return f.isNull(a)?this.default():this.base._deserialize(a,f)}verify(a){return this.base.verify(a)}}s=ee,n.OptionalType=Ce;function De(k,a){return new Ce(k,a??null)}n.optional=De;const je=Symbol.for("struct.isPassthrough");n.isPassthrough=k=>je in k;class Ee extends n{constructor(a,f){super(),this.name=a,this.defaultFactory=f,this[u]=!0}getDefinition(a){return a+this.name}default(){return this.defaultFactory()}_serialize(a,f){return f.createAny(a)}_deserialize(a,f){return f.parseAny(a)}verify(a){return a}}u=je,n.PassthroughType=Ee;function be(k,a="passthrough"){if(k!=null&&typeof k!="function"){const f=k;k=()=>f}return new Ee(a,k??(()=>{throw new Error("Cannot create a default value of "+a)}))}n.passthrough=be,n.any=be("any");const ye=Symbol.for("struct.isEnum");n.isEnum=k=>ye in k;class Be extends n{constructor(a){super(),this.entries=a,this.name=this.entries.join(" | "),this[l]=!0,this._entries=new Set(this.entries)}getDefinition(a){return a+this.name}default(){return this.entries[0]}_serialize(a,f){return f.createPrimitive(a)}_deserialize(a,f){const j=f.parsePrimitive(a);if(!this._entries.has(j))throw new L("Expected "+this.name);return j}verify(a){if(!this._entries.has(a))throw new L("Expected "+this.name);return a}}l=ye,n.EnumType=Be,n.byKeyProperty=(k,a,f,j)=>new class extends n{constructor(){super(...arguments),this.name=k}getDefinition(M){return M+this.name}default(){return j()}_serialize(M,N){return n.string._serialize(M[a],N)}_deserialize(M,N){let O;try{O=n.string._deserialize(M,N)}catch(U){throw U instanceof L?new L("Expected "+this.name):U}const z=typeof f=="function"?f(O):f.get(O);if(z==null)throw new L(`Invalid ${k} ${a.toString()} "${O}"`);return z}verify(M){if(typeof M!="object"||M==null||!(a in M))throw new L("Expected "+this.name);const N=M[a],O=typeof f=="function"?f(N):f.get(N);if(O==null)throw new L(`Invalid ${k} ${a.toString()} "${N}"`);if(O!=M)throw new L(`Invalid ${k} ${N}, ${a.toString()} matches but the value does not equal`);return M}};function Ve(k,a,f,j){j??(j=()=>null);const M=new Map(Object.entries(f));return new class extends n{constructor(){super(...arguments),this.name=k}getDefinition(N){return N+k}default(){return j()}_serialize(N,O){const z=N[a],U=M.get(z);if(U==null)throw new L(`Invalid ${k} ${a.toString()} "${z}"`);return U._serialize(N,O)}_deserialize(N,O){const z=O.parseObject(N);if(z==null)throw new L("Expected "+this.definition);const U=O.getObjectProperty(z,a.toString());let W;try{W=n.string._deserialize(U,O)}catch(le){throw le instanceof L&&le.appendPath(a.toString()),le}const J=M.get(W);if(J==null)throw new L(`Invalid ${k} ${a.toString()} "${W}"`);return J._deserialize(z,O)}verify(N){if(typeof N!="object"||N==null||!(a in N))throw new L("Expected "+this.name);const O=N[a],z=M.get(O);if(z==null)throw new L(`Invalid ${k} ${a.toString()} "${O}"`);return z.verify(N)}}}n.byKeyUnion=Ve;function Me(k,a){const f=k.constructor;class j extends f{default(){return a()}}return k.derive(j.prototype)}n.withDefault=Me})(y||(y={}));function Mn(...n){return new y.EnumType(n)}y.enum=Mn;var G;(n=>{function e(g){if(y.isType(g))return g;const p=t(g);if(p==null)throw new Error("Cannot get base type, because the value is not a struct instance");return"baseType"in p?p.baseType:p}n.getBaseType=e;function t(g){if(y.isType(g))return g;if(typeof g=="function"){if("baseType"in g&&"ref"in g)return g.ref();throw new Error("Value is not a struct")}else return t(g.constructor)}n.getType=t,n.DECORATOR_FIELD=Symbol.for("struct.decoratorField");class r{constructor(p,_){this.name=p,this._source=_,this._props=null,this._defaultFields=null,this.getProps=x=>{if(this._props!=null)return x!=this._props&&Object.assign(x,this._props),this._props;if(typeof this._source!="function")return this._defaultFields=Object.fromEntries(Object.keys(this._source).map(A=>[A,null])),Object.assign(x,this._source),this._props=x,this._source=null,this._props;const S={},C=new this._source;for(const[A,T]of Object.entries(C))if(T instanceof b){if(x[A]=T.type,n.DECORATOR_FIELD in T.type)continue;S[A]=null;continue}return this._props=x,this._defaultFields=S,this._source=null,this._props}}getObjectType(){return typeof this._source=="function"?new y.LazyObjectType(this.name,this.getProps):new y.TypedObjectType(this.name,this.getProps({}))}getDefaultFields(){return this._defaultFields??(this.getProps({}),this._defaultFields)}}function i(g,p,_,x){const S=new r(g,p);let C=S.getObjectType();x!=null&&x.baseTypeDecorator&&(C=x.baseTypeDecorator(C));const A=x==null?void 0:x.instanceDecorator,T=new Map,F=class F extends(_??Object){serialize(){return this.constructor.ref().serialize(this)}constructor(V){if(super(),Object.assign(this,S.getDefaultFields(),V??{}),"_postDeserialize"in this&&this._postDeserialize(),A)return A(this)}static ref(){const V=T.get(this);if(V)return V;const H=this,P=C.derive((class extends C.constructor{_makeBase(){return new H}}).prototype);return T.set(this,P),P}static default(){return this.ref().default()}static deserialize(V){return this.ref().deserialize(V)}};F.baseType=C;let I=F;return I}n.define=i;const s=y.object({"!type":y.atom});class u extends y{constructor(p,_){super(),this.name=p,this.types=_}getDefinition(p){return p+this.name}default(){return null}verify(p){return n.getBaseType(p).verify(p)}_serialize(p,_){const x=n.getBaseType(p),S=x._serialize(p,_);return _.addObjectProperty(S,"!type",x.name),S}_deserialize(p,_){const x=s._deserialize(p,_)["!type"],S=this.types.get(x);if(S==null)throw new L(`Cannot find type "${x}"`);try{return S._deserialize(p,_)}catch(C){throw C instanceof L&&C.appendPath(`(${x})`),C}}}class l{constructor(p){this.name=p,this._types=new Map,this._ref=new u(this.name,this._types)}get base(){return this._ref}getTypes(){return this._types}getTypeNames(){return[...this._types.keys()]}register(p){const _=t(p);this._types.set(e(_).name,_)}ref(){return this.base}}n.PolymorphicSerializer=l;const h=y.object({"!type":y.atom,id:y.string});class m extends y{constructor(p,_){super(),this.name=p,this.contextGetter=_}getDefinition(p){return p+this.name}default(){return null}verify(p){return n.getBaseType(p).verify(p)}_serialize(p,_){return _.createPrimitive(p.id)}_deserialize(p,_){const x=y.string._deserialize(p,_),S=this.contextGetter(x);if(S==null)throw new L(`Cannot resolve reference to "${x}"`);return S}}class o extends l{constructor(p){super(p),this._contextGetter=null,this._graphRef=new m(this.name,_=>{if(this._contextGetter==null)throw new L("Cannot deserialize polymorphic graph reference outside of context");return this._contextGetter(_)})}get base(){return this._graphRef}createContext(p,_){if(this._contextGetter!=null)throw new Error("Cannot create context, context already exists");try{this._contextGetter=p,_()}finally{this._contextGetter=null}}deserialize(p,_=Nt){if(this._contextGetter!=null)throw new Error("Cannot create context, context already exists");const x=new _(p),S=x.parseArray(x.getRootHandle());if(S==null)throw new L("Expected array of objects");try{const C=new Map;this._contextGetter=T=>{var I;return(I=C.get(T))==null?void 0:I.instance};let A=-1;for(let T of x.getArrayElements(S)){A++;const I=x.parseObject(T);if(I==null)throw new L("Expected object").appendPath(A.toString());try{const{["!type"]:F,id:B}=h._deserialize(I,x),V=this._types.get(F);if(V==null){const P=new L(`Cannot find type "${F}"`);throw P.appendPath(B),P}const H=V.default();C.set(B,{instance:H,data:I,type:V})}catch(F){throw F instanceof L&&F.appendPath(A.toString()),F}}A=-1;for(const{instance:T,data:I,type:F}of C.values()){A++;try{Object.assign(T,n.getBaseType(F)._deserialize(I,x)),"_postDeserialize"in T&&T._postDeserialize()}catch(B){throw B instanceof L&&B.appendPath(A.toString()),B}}return[...C.values()].map(T=>T.instance)}finally{this._contextGetter=null}}serialize(p,_=At){const x=new _,S=x.createArray();for(const C of p){const A=this._ref._serialize(C,x);x.addArrayElement(S,A)}return S}removeReferences(p,_){const x=(S,C,A)=>{if(y.isNullable(C)){if(S==null)return;C=C.base}if(y.isObject(C))for(const[T,I]of C.propList){const F=S[T],B=A+T;if(F==p)if(y.isNullable(I))S[T]=null;else if(y.isOptional(I))S[T]=I.default();else throw new Error(`Cannot remove reference, property ${JSON.stringify(B)} is not nullable (${I.name})`);else x(F,I,B)}else if(y.isMap(C))for(const[T,I]of[...S]){const F=S[T];F==p?S.delete(T):x(F,C.valueType,A+"."+T)}else if(y.isArray(C))for(let T=0;T<S.length;T++){const I=S[T];I==p?(S.splice(T,1),T--):x(I,C.elementType,A+"."+T)}};for(const S of _)x(S,n.getType(S),"")}}n.PolymorphicGraphSerializer=o;class b{constructor(p){this.type=p}}n.FieldInfo=b;function w(g){return new b(g)}n.field=w})(G||(G={}));var fe;(n=>{n.DEFAULT_COLOR_MAP={string:{custom:!1,name:"green"},primitive:{custom:!1,name:"yellow"},function:{custom:!1,name:"cyan"},symbol:{custom:!1,name:"green"},circular:{custom:!1,name:"blue"},date:{custom:!1,name:"magenta"},regexp:{custom:!1,name:"red"},shallow:{custom:!1,name:"white"},type:{custom:!1,name:"bold"},other:{custom:!1,name:"gray"}},n.DEFAULT_COLOR_CODES={black:"#000000",blue:"#2472c8",brightBlack:"#666666",brightBlue:"#3b8eea",brightCyan:"#29b8db",brightGreen:"#23d18b",brightMagenta:"#d670d6",brightRed:"#f14c4c",brightWhite:"#ffffff",brightYellow:"#f5f543",cyan:"#11a8cd",green:"#0dbc79",magenta:"#bc3fbc",red:"#cd3131",white:"#e5e5e5",yellow:"#e5e510",grey:"#aaaaaa",gray:"#aaaaaa"},n.LIGHT_COLOR_CODES={black:"#000000",blue:"#1568c4",brightBlack:"#000000",brightBlue:"#1568c4",brightCyan:"#24b2d6",brightGreen:"#1f8236",brightMagenta:"#8f288f",brightRed:"#b30e0e",brightWhite:"#000000",brightYellow:"#cf4600",cyan:"#24b2d6",green:"#1f8236",magenta:"#8f288f",red:"#b30e0e",white:"#191919",yellow:"#cf4600",grey:"#555555",gray:"#555555"},n.ANSI_COLOR_CODES={black:"30",blue:"94",bold:"1",cyan:"96",gray:"90",green:"92",magenta:"95",red:"91",white:"0",yellow:"93"};function e(i,s){const u=h=>h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return`<span style="${s.custom==!1&&s.name=="bold"?"font-weight: bold":s.custom?`color: ${s.code}`:`color: ${n.LIGHT_COLOR_CODES[s.name]}`}">${u(i)}</span>`}n.htmlColor=e;function t(i,s){return s.custom?i:s.name=="bold"?`\x1B[1m${i}\x1B[0m`:`\x1B[${n.ANSI_COLOR_CODES[s.name]}m${i}\x1B[0m`}n.ansiColor=t;function r(i,{color:s,lineLimit:u=50,colorMap:l=n.DEFAULT_COLOR_MAP}){const h=(o,b)=>{if(o.type=="primitive"){const w=typeof o.value;if(w=="string")return{result:s(JSON.stringify(o.value),l.string),multiline:!1};if(w=="number"||w=="boolean")return{result:s(o.value.toString(),l.primitive),multiline:!1}}else{if(o.type=="bigint")return{result:s(o.value.toString()+"n",l.primitive),multiline:!1};if(o.type=="function")return{result:s(`[${o.subtype} ${o.name}]`,l.function),multiline:!1};if(o.type=="list"){const w=o.elements.map(_=>h(_,b+1));let g=0;for(const _ of w){if(_.multiline){g=1/0;break}_.result.length>g&&(g=_.result.length)}const p=o.name!="Array"?`${s(o.name??"null",l.type)}(${w.length}) [`:"[";return g*w.length<u?{result:`${p}${w.length==0?"":" "+w.map(_=>_.result).join(", ")+" "}]`,multiline:!1}:{result:p+`
`+w.map(_=>"  ".repeat(b+1)+_.result).join(`
`)+`
`+"  ".repeat(b)+"]",multiline:!0}}else if(o.type=="record"){const w=o.items.map(_=>({key:m(_.key,b+1),value:h(_.value,b+1)}));let g=0;for(const _ of w){if(_.key.multiline||_.value.multiline){g=1/0;break}const x=_.key.result.length+_.value.result.length;x>g&&(g=x)}const p=o.name?`${s(o.name,l.type)} {`:"{";return g*w.length<u?{result:`${p}${w.length==0?"":" "+w.map(_=>`${_.key.result}: ${_.value.result}`).join(", ")+" "}}`,multiline:!1}:{result:p+`
`+w.map(_=>"  ".repeat(b+1)+`${_.key.result}: ${_.value.result}`).join(`
`)+`
`+"  ".repeat(b)+"}",multiline:!0}}else{if(o.type=="symbol")return{result:s(o.name,l.symbol),multiline:!1};if(o.type=="circular")return{result:s("[circular]",l.circular),multiline:!1};if(o.type=="date")return{result:s(o.date,l.date),multiline:!1};if(o.type=="regexp")return{result:s(o.source,l.regexp),multiline:!1};if(o.type=="shallow")return{result:s(o.name,l.shallow),multiline:!1};if(o.type=="raw"){const w=o.segments.map(g=>"color"in g?g.indent?s(g.text,g.color).replace(/\n/g,`
`+"  ".repeat(b)):s(g.text,g.color):h(g,b).result).join("");return{result:w,multiline:w.includes(`
`)}}}}return{result:s(o.type,l.other),multiline:!1}},m=(o,b)=>o.type=="primitive"&&typeof o.value=="string"&&!o.value.match(/[^\w$]/g)?{result:o.value,multiline:!1}:h(o,b);return h(i,0).result}n.formatDescription=r})(fe||(fe={}));const An=new Set(["string","number","boolean"]);class Te{constructor(e){this.target=e,this.desc=Te.inspectObject(this.target)}}(n=>{class e{constructor(i=null,s=(i==null?void 0:i.path)??[]){var u;this.parent=i,this.path=s,this.seen=((u=this.parent)==null?void 0:u.seen)??new Map}descent(i){return new e(this,[...this.path,...i])}}n.Context=e;function t(r,i=new e){var s;if(An.has(typeof r))return{type:"primitive",value:r};if(typeof r=="function"){const u=r.toString().startsWith("class");let l=r.name||"(anon)";return l=="(anon)"&&r.toString().length<50&&(l=r.toString().replace(/\n\s*/g,"↲")),{type:"function",subtype:u?"class":"function",name:l}}else{if(typeof r=="symbol")return{type:"symbol",name:r.toString()};if(typeof r=="bigint")return{type:"bigint",value:r.toString()};if(typeof r>"u")return{type:"undefined"};if(typeof r=="object"){if(r==null)return{type:"null"};if(r[$t])return{type:"raw",segments:r.segments};if(i.seen.has(r))return{type:"circular",path:i.seen.get(r)};i.seen.set(r,i.path);const u=ArrayBuffer.isView(r)&&!(r instanceof DataView);if(r instanceof Array||u){let o=r;return o.length<=100?u&&(o=[...o]):o=[...o.slice(0,50),oe.rawText(`...${o.length-100} elements`),...o.slice(-50)],{type:"list",subtype:"array",name:r.constructor.name,elements:o.map((b,w)=>t(b,i.descent(["elements",w.toString()])))}}if(r instanceof Set)return{type:"list",subtype:"set",name:r.constructor.name,elements:[...r.entries()].map(([o,b],w)=>t(b,i.descent(["elements",w.toString()])))};const l=([o,b],w)=>({key:t(o,i.descent(["items",w.toString(),"key"])),value:t(b,i.descent(["items",w.toString(),"value"]))});if(r instanceof Map)return{type:"record",subtype:"map",name:r.constructor.name,items:[...r].map(l)};if(r instanceof RegExp)return{type:"regexp",source:r.toString()};if(r instanceof Date)return{type:"date",date:r.toISOString()};if(r instanceof WeakMap||r instanceof WeakSet||r instanceof Promise)return{type:"shallow",name:r.constructor.name};if(oe.CUSTOM in r){const o=r[oe.CUSTOM](i);if(o!=r)return n.inspectObject(o,i)}if(r instanceof Error)return{type:"raw",segments:[{color:{custom:!1,name:"white"},text:r.stack??r.message}]};let h=(s=r.constructor)==null?void 0:s.name;h=="Object"&&(h=null),r.constructor&&oe.CUSTOM_NAME in r.constructor&&(h=r.constructor[oe.CUSTOM_NAME]);const m=[];for(const[o,b]of Object.entries(r))m.push(l([o,b],m.length));for(const o of Object.getOwnPropertySymbols(r))Object.getOwnPropertyDescriptor(r,o).enumerable&&m.push(l([o,r[o]],m.length));return{type:"record",subtype:"object",name:h,items:m}}}return{type:"unknown"}}n.inspectObject=t})(Te||(Te={}));const $t=Symbol.for("Logger.ObjectDescription.RawObject"),Nn={30:"black",31:"red",32:"green",33:"yellow",34:"blue",35:"magenta",36:"cyan",37:"white",90:"gray",91:"redBright",92:"greenBright",93:"yellowBright",94:"blueBright",95:"magentaBright",96:"cyanBright",97:"whiteBright"};var oe;(n=>{n.CUSTOM=Symbol.for("Logger.ObjectDescription.Custom"),n.CUSTOM_NAME=Symbol.for("Logger.ObjectDescription.CustomName");function e(s){return{[$t]:!0,segments:s}}n.raw=e;function t(s,u={custom:!1,name:"white"},{indent:l=!1}={}){if(u=="ansi"){s+="\x1B[0m";const h=[];let m={custom:!0,code:fe.DEFAULT_COLOR_CODES.white,ansiCode:37},o=0,b=0,w=0;for(;(b=s.indexOf("\x1B[",b))!=-1;){const g=s.slice(o,b);h.push({color:m,text:g,...l?{indent:!0}:void 0});const p=b+2;b=s.indexOf("m",b)+1;const _=s.slice(p,b-1),x=Nn[_]??"white";if(m={custom:!0,code:fe.DEFAULT_COLOR_CODES[x]??fe.DEFAULT_COLOR_CODES.grey,ansiCode:+_},o=b,w++,w>1e3)throw new Error("Infinite loop reached")}return h}return typeof u=="string"&&(u={custom:!1,name:u}),[{text:s,color:u,...l?{indent:!0}:void 0}]}n.textSegment=t;function r(...s){return e(t(...s))}n.rawText=r;function i(s){return e(t(s,"ansi"))}n.ansiText=i})(oe||(oe={}));const $n=["white","black","primary","secondary","success","danger","warning"];class Pn extends y.EnumType{_deserialize(e,t){const r=t.parsePrimitive(e);return r.startsWith("#")&&r.length==7?r:super._deserialize(e,t)}constructor(){super($n)}}const zn=new Pn,de=new G.PolymorphicSerializer("SyntaxNode");de.base;const _e={modifier:y.enum("bold","italics","code").as(y.nullable,{skipNullSerialize:!0}),color:zn.as(y.nullable,{skipNullSerialize:!0}),classList:y.string.as(y.array).as(y.nullable,{skipNullSerialize:!0}),attributes:y.string.as(y.map).as(y.nullable,{skipNullSerialize:!0}),align:y.enum("left","center","right").as(y.nullable,{skipNullSerialize:!0}),width:y.number.as(y.nullable,{skipNullSerialize:!0}),height:y.number.as(y.nullable,{skipNullSerialize:!0})};class ie{constructor(){this._metadata=null}setMetadata(e,t){(this._metadata??(this._metadata=new Map)).set(e,t)}getMetadata(e){return this._metadata==null?null:this._metadata.get(e)??null}static get[oe.CUSTOM_NAME](){return this.baseType.name}}var E;(n=>{class e extends G.define("Text",{value:y.string},ie){constructor(){super(...arguments),this.kind="text"}}n.Text=e;class t extends G.define("Newline",{},ie){constructor(){super(...arguments),this.kind="newline"}}n.Newline=t;class r extends G.define("Raw",{value:y.string},ie){constructor(){super(...arguments),this.kind="raw"}}n.Raw=r;class i extends G.define("Span",{..._e,content:de.base.as(y.array)},ie){constructor(){super(...arguments),this.kind="span"}}n.Span=i;class s extends G.define("CodeBlock",{lang:y.string.as(y.nullable),content:y.string},ie){constructor(){super(...arguments),this.kind="code-block"}}n.CodeBlock=s;class u extends G.define("Object",{..._e,content:de.base.as(y.array),value:y.string.as(y.nullable),type:y.enum("link","media","raw")},ie){constructor(){super(...arguments),this.kind="object"}}n.Object=u;class l extends G.define("Table",{..._e,content:de.base.as(y.array)},ie){constructor(){super(...arguments),this.kind="table"}}n.Table=l;class h extends G.define("TableRow",{..._e,content:de.base.as(y.array),header:y.boolean},ie){constructor(){super(...arguments),this.kind="table-row"}}n.TableRow=h;class m extends G.define("Segment",{..._e,type:y.enum("p",1,2,3,4,"ul","ol","li","quote").as(y.nullable),content:de.base.as(y.array)},ie){constructor(){super(...arguments),this.kind="segment"}}n.Segment=m})(E||(E={}));for(const n of Object.values(E))de.register(n);class Le{parseVerbatimContent(e){return[new E.Raw({value:e})]}}class Pt{}function Ln(n,e){const t=n[e];return t=="*"||t=="_"||t=="\\"||t=="`"||t==`
`||t=="!"||t=="["||t=="]"||t=="}"||t=="<"}function Xe(n,e){return n[e]=="}"||xe(n,e)||n[e]==">"||n[e]=="/"}function Rn(n,e){return n[e]=="="||Xe(n,e)}function In(n,e){return n[e]==" "||n[e]=="	"}function Dn(n,e){return n[e]==";"||xe(n,e)}function Bn(n,e){return n[e]=="-"||Ot(n,e)||n[e]==":"}class zt extends xt{constructor(e,t){if(super(e),this.widgets=new G.PolymorphicSerializer("MmlWidget"),t!=null&&t.widgets)for(const r of t.widgets)this.widgets.register(r)}_parseInlineCssProperty(e,t,r){if(e=="color"&&t.startsWith("#"))return r??(r=new E.Span({content:[]})),r.color=t,r;if(e=="text-align")try{const i=E.Span.baseType.props.align.verify(t);return r??(r=new E.Span({content:[]})),r.align=i,r}catch(i){if(i instanceof L)return r;throw i}if(e=="width"||e=="height"){const i=parseInt(t);if(!isNaN(i))return r??(r=new E.Span({content:[]})),r[e]=i,r}return e=="font-weight"&&t.startsWith("700")&&(r??(r=new E.Span({content:[]})),r.modifier="bold"),r}parseInlineCss(e){for(;!this.isDone();){if(this.consume('"'))return e;this.skipWhile(Dn);const t=this.readUntil(":");if(this.index++,this.isDone())break;const r=this.readUntil(";").trim();e=this._parseInlineCssProperty(t,r,e)}return e}parseFragment(e,t=[]){for(;!this.isDone();){const r=this.readUntil(Ln);if(r.trim()!=""){const m=t.at(-1);m&&m.kind=="text"?m.value+=r:t.push(new E.Text({value:r}))}if(this.isDone()||e!=null&&this.consume(e))break;if(this.consume("\\")){const m=this.getCurrent();if(this.index++,m==`
`){t.push(new E.Newline);continue}const o=t.at(-1);o&&o.kind=="text"?o.value+=m:t.push(new E.Text({value:m}));continue}let i=null;const s=xe(this.at(-1),0);let u=null;if(s&&(u=this.consume(["**","__"]))){const m=this.parseFragment(u);i=new E.Span({content:m,modifier:"bold"})}else if(s&&(u=this.consume(["*","_"]))){const m=this.parseFragment(u);i=new E.Span({content:m,modifier:"italics"})}else if(s&&this.consume("`")){const m=this.parseFragment("`");i=new E.Span({content:m,modifier:"code"})}else if(this.consume("[")){const m=this.parseFragment("]");if(i=new E.Object({content:m,type:"link"}),this.consume("(")){const o=this.readUntil(")");i.value=o,this.index++}}else if(this.consume("![")){const m=this.readUntil("]");if(this.index++,i=new E.Object({content:[],type:"media",attributes:new Map([["alt",m]])}),this.consume("(")){const o=this.readUntil(")");i.value=o,this.index++}}else if(this.consume("<")){const m=this.readWhile(Bn),o=this.widgets.getTypes().get(m),b=(o==null?void 0:o.getMetadata().get(Pt))!=null;i=new E.Object({content:[],type:"raw",value:m});let w=!1;for(;!this.isDone()&&(this.skipWhile(xe),!this.consume(">"));){if(this.consume("/>")){w=!0;break}const p=this.index;this.parseAttribute(i),this.index==p&&this.index++}if(w)b&&(i.content=[new E.Raw({value:""})]);else{const p=`</${m}>`;b?(i.content=[new E.Raw({value:this.readUntil(p)})],this.index+=p.length):i.content=this.parseFragment(p)}const g=this.widgets.getTypes().get(m);if(g!=null){const p=i.attributes?Object.fromEntries([...i.attributes].map(([S,C])=>C==""?[S,!0]:[S,C])):{};p["!type"]=m;const _=this.widgets.base.deserialize(p),x=i.attributes?new Map(i.attributes):null;if(i=_.getValue(this,i.content),i&&x){y.isObject(g)||ne();for(const[S]of g.propList)x.delete(S);i.attributes?i.attributes=yn(x,i.attributes):i.attributes=x}}}if(i!=null){if(t.push(i),this.consume("{"))for(;!this.isDone()&&(this.skipWhile(xe),!this.consume("}"));){const m=this.index;this.parseAttribute(i),this.index==m&&this.index++}continue}const l=this.getCurrent(),h=t.at(-1);h&&h.kind=="text"?h.value+=l:t.push(new E.Text({value:l})),this.index++}return t}parseAttribute(e){if(this.consume(".")){const i=this.readUntil(Xe);e.classList??(e.classList=[]),e.classList.push(i);return}const t=this.readUntil(Rn);let r=null;t!=""&&(this.consume("=")&&(this.consume('"')?(r=this.readUntil('"'),this.index++):r=this.readUntil(Xe)),e.attributes??(e.attributes=new Map),e.attributes.set(t,r??""))}parseIndent(){return this.readWhile(In).length}parseSegmentType(){const e=this.index;let t=null;return this.readWhile(qe)&&this.consume([".",")"])?t="ol":(this.index=e,this.consume(["- ","+ ","* "])&&(t="ul")),t}parseTextBlock(){return new E.Segment({type:"p",content:this.parseFragment(`
`)})}parseSegment(e,t){var i;let r=null;for(;!this.isDone();){const s=this.index,u=this.parseIndent();if(u<e){this.index=s;return}if(this.consume("```")){const o=this.readUntil(`
`).trim();this.index++;const b=this.readUntil("```");this.index+=3;const w=new E.CodeBlock({lang:o!=""?o:null,content:b});r=w,t.content.push(w);continue}let l=null;if(this.consume("####")?l=4:this.consume("###")?l=3:this.consume("##")?l=2:this.consume("#")&&(l=1),l!=null){const o=this.parseTextBlock();o.type=l,r=o,t.content.push(o);continue}if(this.consume(">")){let o;(r==null?void 0:r.kind)=="segment"&&r.type=="quote"?o=r:(o=new E.Segment({type:"quote",content:[]}),t.content.push(o));const b=this.parseTextBlock();o.content.push(b),r=o,this.parseSegment(u+1,o);continue}if(this.consume(["- ","+ ","* "])){let o;(r==null?void 0:r.kind)=="segment"&&r.type=="ul"?o=r:(o=new E.Segment({type:"ul",content:[]}),t.content.push(o));const b=new E.Segment({type:"li",content:[]});o.content.push(b);const w=this.parseTextBlock();b.content.push(w),r=o,this.parseSegment(u+1,b);continue}const h=this.index;if(this.readWhile(qe)&&this.consume([".",")"])){let o;(r==null?void 0:r.kind)=="segment"&&r.type=="ol"?o=r:(o=new E.Segment({type:"ol",content:[]}),t.content.push(o));const b=new E.Segment({type:"li",content:[]});o.content.push(b);const w=this.parseTextBlock();b.content.push(w),r=o,this.parseSegment(u+1,b);continue}else this.index=h;const m=this.parseTextBlock();if(m.content.length==0){r=null;continue}if(r&&r.kind=="segment"&&((i=r.content.at(-1))==null?void 0:i.kind)=="text"){const o=m.content[0];o.value=" "+o.value,r.content.push(m.content[0])}else t.content.push(m),r=m}}parseDocument(){const e=new E.Segment({content:[]});return this.parseSegment(0,e),e}}class Oe extends Et{constructor(){super(...arguments),this.allowedComponents=new Set,this.usedComponents=new Set,this.allowProperties=!1,this._manifest=null}get manifest(){return this._manifest??(this._manifest=new Oe.PropertyManifest)}addAllowedComponent(...e){for(const t of e)this.allowedComponents.add(t);return this}_renderAttributes(e){return e==null?"{}":JSON.stringify(Object.fromEntries(e))}_renderText(e){return JSON.stringify(e)}_renderRaw(e){return JSON.stringify(e)}_renderElement(e,t,r){if(e=="")return r.length==0?"[]":r.length==1?this._renderNode(r[0]):"["+this._renderContent(r).join(", ")+"]";if(e=="<>vue-prop"){if(!this.allowProperties)return JSON.stringify("Usage of Vue properties is disabled");const u=t==null?void 0:t.get("name");if(u==null)return JSON.stringify("Vue property name not provided");const l=t==null?void 0:t.get("use");this.manifest.ensureProperty(u);const h=`[${this._renderContent(r).join(", ")}]`;return l!=null?(this.manifest.renderers.add(l),`props.${u} ? ${l}(props.${u}) : ${h}`):`props.${u} ? props.${u} : ${h}`}if(e=="<>vue-decl"){if(!this.allowProperties)return JSON.stringify("Usage of Vue properties is disabled");const u=t==null?void 0:t.get("name");if(u==null)return JSON.stringify("Vue property name not provided");const l=t==null?void 0:t.get("required"),h=this.manifest.ensureProperty(u);return l&&(h.required=!0),r.length>0&&(h.default=`() => [${this._renderContent(r).join(", ")}]`),"[]"}const i=this.allowedComponents.has(e);if(at(e,0)||i)if(i){this.usedComponents.add(e);const u=r.length==0?"null":r.length==1?this._renderNode(r[0]):this._renderContent(r).join(", ");return`h(${e}, ${this._renderAttributes(t)}, () => ${u})`}else e="span";const s=r.length==0?"":", "+this._renderContent(r).join(", ");return`h(${JSON.stringify(e)}, ${this._renderAttributes(t)}${s})`}_renderElementRaw(e,t,r){if(e=="")return r;const i=this.allowedComponents.has(e);if(at(e,0)||i){if(i)return this.usedComponents.add(e),`h(${e}, ${this._renderAttributes(t)}, () => ${r})`;e="span"}return`h(${JSON.stringify(e)}, ${this._renderAttributes(t)}, ${r})`}_renderObject(e){return!e.type&&e.value!=null&&!e.value.match(/^[a-z]+:\/\//)?this._renderElement("RouterLink",this._normalizeAttributes(e,new Map([["to",e.value]])),e.content):super._renderObject(e)}render(e){const t=["h"],r=this.renderContent(e);return this.usedComponents.size>0&&t.push(...this.usedComponents),`(({${[...t].join(", ")}}) => ${r})`}renderContent(e){return`() => ${this._renderNode(e)}`}}(n=>{class e extends G.define("Prop",{name:y.string,use:y.string.as(y.nullable)},Le){getValue(s,u){const l=new Map([["name",this.name]]);return this.use&&l.set("use",this.use),new E.Object({type:"raw",value:"<>vue-prop",content:u,attributes:l})}}n.PropertyWidget=e;class t extends G.define("Declare",{name:y.string,required:y.boolean.as(y.nullable)},Le){getValue(s,u){const l=new Map([["name",this.name]]);return this.required&&l.set("required",""),new E.Object({type:"raw",value:"<>vue-decl",content:u,attributes:l})}}n.PropertyDeclarationWidget=t;class r{constructor(){this.properties=new Map,this.renderers=new Set}ensureProperty(s){return sn(this.properties,s,()=>({default:null,required:!1}))}}n.PropertyManifest=r})(Oe||(Oe={}));class Vn extends G.define("Math",{equation:y.boolean.as(y.nullable),full:y.boolean.as(y.nullable)},Le,{baseTypeDecorator(e){return e.annotate(new Pt)}}){getValue(e,t){const r=t[0];r instanceof E.Raw||ne();let i=r.value;return this.full&&(i="\\displaystyle"+i),new E.Span({content:[new E.Raw({value:this.equation?"\\["+i+"\\]":"$"+i+"$"})]})}}const nt=class nt extends G.define("LaTeXTableOptions",{widths:y.number.as(y.array),types:y.string.as(y.array),compact:y.boolean,naked:y.boolean,long:y.boolean,before:y.string.as(y.nullable),after:y.string.as(y.nullable)}){};nt.tagname="<>latex-table-options";let pe=nt;class Fn extends G.define("TableOptions",{widths:y.string.as(y.nullable),types:y.string.as(y.nullable),compact:y.boolean.as(y.nullable),naked:y.boolean.as(y.nullable),long:y.boolean.as(y.nullable),before:y.string.as(y.nullable),after:y.string.as(y.nullable)},Le){getValue(e,t){const r=pe.default();if(this.widths){const s=this.widths.split("|").map(u=>parseFloat(u));s.some(isNaN)||(r.widths=s)}return this.types&&(r.types=this.types.split("")),this.compact&&(r.compact=!0),this.naked&&(r.naked=!0),this.long&&(r.long=!0),r.before=this.before,r.after=this.after,new E.Object({type:"raw",value:pe.tagname,content:[],attributes:new Map([["value",JSON.stringify(r.serialize())]])})}}const dt={widgets:[Vn,Fn],shortcuts:[]},Hn=[{start:"[[",end:"]]",object:"cite"}],Un=[{start:"$$MATH{{",end:"}}$$",object:"Math"},{start:"$$MATH1{{",end:"}}$$",prefix:"<Math pragma-spc1>"},{start:"$$MATH0{{",end:"}}$$",prefix:"<Math pragma-spc>"},{start:"&lt;&lt;",end:"&gt;&gt;",prefix:"<Math>"}];class ae{constructor(e){this.shortcuts=[{start:"$$EMBED{{",end:"}}$$"},{start:"$$NOTE{{",end:"}}$$",object:"__discard__"}],this._shortcutMatches=[],this._embedParser=new ae.InlineCssParser("",e),e!=null&&e.shortcuts&&this.shortcuts.push(...e.shortcuts),this.forceTableHeader=(e==null?void 0:e.forceTableHeader)??!0}get widgets(){return this._embedParser.widgets}set widgets(e){this._embedParser.widgets=e}importStyle(e,t){const r=e.getAttribute("style");return r?this._embedParser.clone(r).parseInlineCss(t):t}importContent(e,t){for(const r of e){const i=this.importNode(r);i!=null&&t.content.push(i)}this.normalizeContent(t.content,0)}normalizeContent(e,t){for(let r=t;r<e.length;r++){const i=e[r];if(r<e.length-1){const s=e[r+1];if(i.kind=="segment"&&(i.type=="ul"||i.type=="ol")&&s.kind=="segment"&&s.type==i.type&&i.content.length>0&&s.content.length>0){const u=i.content[0].getMetadata(ae.META_MARGIN_LEFT),l=s.content[0].getMetadata(ae.META_MARGIN_LEFT);if(u!=null&&l!=null){if(u==l-36){this.normalizeContent(e,r+1);const h=i.content.at(-1);h&&h.kind=="segment"&&h.type=="li"?h.content.push(e[r+1]):i.content.push(new E.Segment({type:"li",content:[e[r+1]]})),e.splice(r+1,1),r--;continue}else if(u==l){this.normalizeContent(e,r+1),i.content.push(...s.content),e.splice(r+1,1),r--;continue}}}}}}importTable(e){const t=E.Table.default();return this.importTableRows(e,t,!1),t}importTableRows(e,t,r){for(const i of e.childNodes)if(i instanceof HTMLElement){if(i.tagName=="TBODY"){this.importTableRows(i,t,!1);continue}if(i.tagName=="THEAD"){this.importTableRows(i,t,!0);continue}if(i.tagName=="TR"){const s=E.TableRow.default();s.header=r,t.content.push(s);for(const u of i.childNodes){if(!(u instanceof HTMLElement)||u.tagName!="TD")continue;const l=this.importElement(u);l!=null&&s.content.push(l)}continue}}}importElement(e){let t=null;if(e.tagName=="B"||e.tagName=="STRONG")t=new E.Span({modifier:"bold",content:[]});else if(e.tagName=="I"||e.tagName=="EM")t=new E.Span({modifier:"italics",content:[]});else if(e.tagName=="CODE"||e.tagName=="CODE")t=new E.Span({modifier:"italics",content:[]});else if(e.tagName=="UL")t=new E.Segment({type:"ul",content:[]});else if(e.tagName=="LI")t=new E.Segment({type:"li",content:[]});else if(e.tagName=="OL")t=new E.Segment({type:"ol",content:[]});else if(e.tagName=="H1")t=new E.Segment({type:1,content:[]});else if(e.tagName=="H2")t=new E.Segment({type:2,content:[]});else if(e.tagName=="H3")t=new E.Segment({type:3,content:[]});else if(e.tagName=="H4")t=new E.Segment({type:4,content:[]});else if(e.tagName=="DIV")t=new E.Segment({content:[]});else if(e.tagName=="P")t=new E.Segment({type:"p",content:[]});else if(e.tagName=="IMG")t=new E.Object({type:"media",value:e.src,content:[]});else if(e.tagName=="A")t=new E.Object({type:"link",value:e.href,content:[]});else{if(e.tagName=="TABLE")return this.importTable(e);if(e.tagName=="BR")return new E.Text({value:`
`})}t=this.importStyle(e,t);const r=e.childNodes;return r.length==0?t:t==null&&r.length==1?this.importNode(r[0]):(t??(t=new E.Span({content:[]})),this.importContent(r,t),t)}importTextNode(e){let t=e.textContent;return t==null||(t=t.replace(/\t/g," ").replace(new RegExp("(?<=\\r?\\n) +| +(?=\\r?\\n)","g"),"").replace(/\n|\r/g," ").replace(/ {2,}/g," "),t=="")?null:new E.Text({value:t})}importNode(e){if(e instanceof Text)return this.importTextNode(e);if(e instanceof HTMLElement)return this.importElement(e);if(e instanceof Comment){const t=e.textContent;if(t==null)return null;for(const{regexp:r,shortcut:i}of this._shortcutMatches){const s=t.match(r);if(s){if(i.object=="__discard__")break;const u=s[1],l=document.createElement("template");l.innerHTML=u;let h=this.flattenIntoText(l.content);i.object&&(h=`<${i.object}>${h}</${i.object}>`),i.prefix!=null&&(h=i.prefix+h),i.suffix!=null&&(h=i.suffix+h);const m=this._embedParser.clone(h);if(h.includes(`
`))return m.parseDocument();{const o=new E.Span({content:[]});return m.parseFragment(null,o.content),o}}}}return null}flattenIntoText(e){const t=[];return this.flattenNode(e,t),t.join("")}flattenNode(e,t){if(e instanceof Text)t.push(e.textContent??"");else if(e instanceof HTMLElement||e instanceof DocumentFragment){if(e instanceof HTMLElement&&e.tagName=="BR"){t.push(`
`);return}for(const r of e.childNodes)this.flattenNode(r,t)}}importDocument(e){const t=new E.Segment({content:[]}),r=e.childNodes;return this.importContent(r,t),t}importHtml(e){const t=document.createElement("template");if(this.shortcuts.length>0){const i=new RegExp(`(${this.shortcuts.map(u=>typeof u.start=="string"?ve(u.start):`(?:${u.start.source})`).join("|")})`,"g"),s=new RegExp(`(${this.shortcuts.map(u=>typeof u.end=="string"?ve(u.end):`(?:${u.end.source})`).join("|")})`,"g");t.innerHTML=e.replace(i,"<!--$1").replace(s,"$1-->")}else t.innerHTML=e;this._shortcutMatches=this.shortcuts.map(i=>({regexp:new RegExp(`^(?:${typeof i.start=="string"?ve(i.start):i.start.source})(.*)(?:${typeof i.end=="string"?ve(i.end):i.end.source})$`,""),shortcut:i}));const r=t.content;return this.importDocument(r)}}(n=>{n.META_MARGIN_LEFT="META_MARGIN_LEFT";class e extends zt{_parseInlineCssProperty(r,i,s){return r=="margin-left"?(s??(s=new E.Span({content:[]})),s.setMetadata(n.META_MARGIN_LEFT,parseInt(i)),s):super._parseInlineCssProperty(r,i,s)}}n.InlineCssParser=e})(ae||(ae={}));const he=-1,ft=-2;class Wn{constructor(){this._target=null,this._result=null,this._index=-1,this._value=null,this.wasDropped=!1}get wasModified(){return this._target!=this._result}isDone(){return this._index==he?!1:this._index==ft?!0:!(this._index<this._target.length)}next(){if(this.wasDropped=!1,this._index==he)return this._result=this._target,this._target=null,this._index=ft,this._value=this._result;if(this._index>=0&&this._index<this._target.length){const e=this._target[this._index++];return this.wasModified&&this._result.push(e),this._value=e}throw new RangeError("No more elements available")}peek(){if(this._index==he)return this._target;if(this._index>=0&&this._index<this._target.length)return this._target[this._index];throw new RangeError("No more elements available")}drop(){this.wasDropped||(this.wasDropped=!0,this._index<=he?this._result=null:this._index>=0&&(this.wasModified?this._result.pop():this._result=this._target.slice(0,this._index-1)))}replace(e){if(this._value=e,this.wasDropped){this.wasDropped=!1,this._index<=he?this._result=e:this._result.push(e);return}this._index<=he?this._result=e:this._index>=0&&(this.wasModified?this._result.splice(-1,1,e):this._result=[...this._target.slice(0,this._index-1),e])}transform(e){return this._index=he,this._target=e,this._result=e,this.process(),this._result}transformArray(e){return this._index=0,this._target=e,this._result=e,this.process(),this._result}processChildren(e){const t=this._getChildren();if(t==null)return;const r=Ie(this);e&&Object.assign(r,e);const i=r.transformArray(t);r.wasModified&&this.applyChildren(i)}process(){for(;!this.isDone();)this.next(),this.processElement()}processElement(){this.processChildren()}}const pt=y.enum("ol","ul","none");class qn{constructor(e){this.type=e,this.items=[],this.depths=[],this.margin=0,this.types=[]}}class Kn extends Wn{constructor(){super(...arguments),this.inheritedFrame=null,this.currentFrame=null}_getChildren(){return"content"in this._value&&typeof this._value.content!="string"?this._value.content:null}applyChildren(e){this.replace(lt(this._value,{content:e}))}process(){this.currentFrame=this.inheritedFrame,super.process()}processElement(){if(this._value.kind=="segment"){if(pt.matches(this._value.type)){this.currentFrame==null&&(this.currentFrame=new qn("none"));const e=this._value.getMetadata(ae.META_MARGIN_LEFT);if(this.processChildren({inheritedFrame:lt(this.currentFrame,{type:this._value.type,margin:this.currentFrame.margin+(e??0)+1})}),!this.isDone()){const u=this.peek();if(u.kind=="segment"&&pt.matches(u.type)){this.drop();return}}if(this.inheritedFrame!=null){this.drop();return}const t=[],r=[],i=[],s=[];for(const[u,l,h]of mn("until-first",this.currentFrame.items,this.currentFrame.depths,this.currentFrame.types)){let m;h=="none"&&ne();const o=()=>{m=new E.Segment({type:h,content:[]}),t.length==0?s.push(m):t.at(-1).content.push(m),t.push(m),r.push(h),i.push(l)};if(t.length==0||l>i.at(-1))o();else if(l==i.at(-1))h!=r.at(-1)?(t.pop(),r.pop(),i.pop(),o()):m=t.at(-1);else{for(;t.length>0&&l<i.at(-1);)t.pop(),r.pop(),i.pop();t.length==0||l>i.at(-1)?o():h!=r.at(-1)?(t.pop(),r.pop(),i.pop(),o()):m=t.at(-1)}m.content.push(u)}s.length==1?this.replace(s[0]):s.length==0?this.drop():this.replace(new E.Segment({content:s})),this.currentFrame=null;return}if(this._value.type=="li"&&this.inheritedFrame!=null){const e=this.inheritedFrame.items.length;this.processChildren();const t=this._value.getMetadata(ae.META_MARGIN_LEFT);this.inheritedFrame.items.splice(e,0,this._value),this.inheritedFrame.depths.splice(e,0,(t??0)+this.inheritedFrame.margin),this.inheritedFrame.types.splice(e,0,this.inheritedFrame.type),this.drop();return}}super.processElement()}}class Gn{constructor(){this.result=[],this.indent=0,this.skipNextIndent=!0,this.tableOptions=pe.default()}emitIndent(){if(this.skipNextIndent){this.skipNextIndent=!1;return}this.result.push("    ".repeat(this.indent))}exportNodeContent(e){for(const t of e.content)this.exportNode(t)}emitBlockElement(e,t){this.emitIndent(),this.result.push("\\begin{"+t+`}
`),this.indent++,this.exportNodeContent(e),this.indent--,this.emitIndent(),this.result.push("\\end{"+t+`}
`)}exportNode(e){var t,r,i,s,u,l,h,m;if(e.kind=="segment"){if(e.type==1){this.emitIndent(),this.result.push("\\section{"),this.skipNextIndent=!0,this.exportNodeContent(e),this.result.push(`}

`);return}if(e.type==2){this.emitIndent(),this.result.push("\\subsection{"),this.skipNextIndent=!0,this.exportNodeContent(e),this.result.push(`}

`);return}if(e.type==3){this.emitIndent(),this.result.push("\\subsubsection{"),this.skipNextIndent=!0,this.exportNodeContent(e),this.result.push(`}

`);return}if(typeof e.type=="number"){this.emitIndent(),this.result.push("\\paragraph{"),this.skipNextIndent=!0,this.exportNodeContent(e),this.result.push(`}
`);return}if(e.type=="p"){this.emitIndent(),this.exportNodeContent(e),this.result.push(`

`);return}if(e.type=="ul"){this.emitBlockElement(e,"itemize");return}if(e.type=="quote"){this.emitBlockElement(e,"quote");return}if(e.type=="ol"){this.emitBlockElement(e,"enumerate");return}if(e.type=="li"){this.emitIndent(),this.result.push("\\item "),this.exportNodeContent(e),this.result.push(`
`);return}this.exportNodeContent(e);return}if(e.kind=="text"){this.result.push(e.value.replace(/\\/g,"\\textbackslash").replace(/_/g,"\\_").replace(/\^/g,"\\^{}"));return}if(e.kind=="raw"){this.result.push(e.value);return}if(e.kind=="span"){const o=((t=e.attributes)==null?void 0:t.get("pragma-spc"))!=null,b=((r=e.attributes)==null?void 0:r.get("pragma-spc0"))!=null,w=((i=e.attributes)==null?void 0:i.get("pragma-spc1"))!=null;(w||o)&&this.result.push(" ");try{if(e.modifier=="code"){this.result.push(" \\texttt{"),this.exportNodeContent(e),this.result.push("}");return}if(e.modifier=="bold"){this.result.push(" \\textbf{"),this.exportNodeContent(e),this.result.push("}");return}if(e.modifier=="italics"){this.result.push(" \\textit{"),this.exportNodeContent(e),this.result.push("}");return}this.exportNodeContent(e);return}finally{(w||b)&&this.result.push(" ")}}if(e.kind=="object"&&e.type=="raw"){if(e.value&&e.value.startsWith("<>")){if(e.value==pe.tagname){this.tableOptions=pe.ref().deserialize(JSON.parse(e.attributes.get("value")));return}return}const o=((s=e.attributes)==null?void 0:s.get("pragma-block"))!=null,b=((u=e.attributes)==null?void 0:u.get("pragma-star"))!=null,w=((l=e.attributes)==null?void 0:l.get("pragma-spc"))!=null,g=((h=e.attributes)==null?void 0:h.get("pragma-spc0"))!=null,p=((m=e.attributes)==null?void 0:m.get("pragma-spc1"))!=null;(p||w)&&this.result.push(" ");let _=e.value;b&&(_=_+"*"),o?this.result.push(`\\begin{${_}}`):this.result.push("\\"+_);const x=e.attributes==null?null:[...e.attributes].filter(([S,C])=>!S.startsWith("pragma-"));x&&x.length>0&&this.result.push(`[${x.map(([S,C])=>C==""?S:`${S}=${C}`).join(", ")}]`),e.content.length>0&&(o||this.result.push("{"),this.exportNodeContent(e),o||this.result.push("}")),o&&this.result.push(`\\end{${_}}`),(p||g)&&this.result.push(" ");return}if(e.kind=="table"){if(e.content.length==0)return;const o=e.content[0];if(o.kind!="table-row")return;const b=o.content,{compact:w,widths:g,types:p,naked:_,long:x,before:S,after:C}=this.tableOptions;let A=1;if(!w)for(const B of g)A-=B;let T=g.map(B=>B==0?1:0).reduce(Ke.sum(),0);g.length<b.length&&(T+=b.length-g.length);const I=x?"longtable":"tabular",F=S||C?"\\tabularnewline":"\\\\";this.result.push(`\\begin{${I}}{ ${_?"":"|"}${[...an(b.length)].map((B,V)=>{let H=V<p.length?p[V]:"p";if(!w){const P=V<g.length?g[V]:A/T;H+=`{\\dimexpr ${P}\\textwidth -2\\tabcolsep}`}return S&&(H=`>{${S}}${H}`),C&&(H=`>{${C}}${H}`),H+(_?"":"|")}).join("")}}
`),_||this.result.push(`\\hline
`);for(let B=0;B<e.content.length;B++){const V=e.content[B];V.kind!="table-row"&&ne();for(let P=0;P<V.content.length;P++){const R=V.content[P];this.exportNode(R),P==V.content.length-1||this.result.push(" & ")}const H=B==e.content.length-1;(!_||!H)&&this.result.push(F+`
`),_||this.result.push(`\\hline
`)}this.result.push(`\\end{${I}}`);return}this.result.push(`!?!${e.kind}`)}exportDocument(e){return this.exportNode(e),this.result.join("")}}function Re(n,e){const t=Te.inspectObject(n);return fe.formatDescription(t,{...e,color:(e==null?void 0:e.color)??(e!=null&&e.colors?Re.defaultColor:r=>r)})}(n=>{n.defaultColor=e=>e})(Re||(Re={}));const mt=Ze(me({name:"ToggleButton",props:{modelValue:{type:Boolean,default:!1},focus:{type:Boolean},fieldProps:{type:Object},required:{type:Boolean},enabledStyle:{type:Object},...Fe.FUNCTION,...Fe.STYLE},emits:{"update:modelValue":n=>!0,change:n=>!0},setup(n,e){var u;const t=Se(n.modelValue),r=Se();e.expose({input:r}),Qe(()=>{n.focus&&r.value.focus()}),Z(()=>n.modelValue,l=>{t.value=l}),Z(t,(l,h)=>{l!=h&&(e.emit("update:modelValue",l),e.emit("change",l))});function i(l){const h=l.target.checked;h!=t.value&&(t.value=h)}const s=(u=Xt(Fe.GROUP_SYMBOL,void 0))==null?void 0:u.props;return()=>{const l=n.disabled||(s==null?void 0:s.disabled),{modelValue:h,focus:m,fieldProps:o,required:b,enabledStyle:w,...g}=n,p=w==null;return $(ge,Ue(g,{nativeElement:"label",class:"px-1 gap-1 flex row center-cross"},w!=null&&t.value?w:void 0),{default:()=>[$("input",Ue({class:p?"m-0":"hidden",type:"checkbox",required:b,disabled:l,onChange:i,checked:t.value,ref:r},o),null),_t(e.slots,"default")]})}}}));ie.prototype[oe.CUSTOM]=function(){const n=gn(this,"kind");Object.defineProperty(n,oe.CUSTOM,{value:function(){return this},enumerable:!1});for(const[e,t]of Object.entries(n))t==null&&delete n[e];return n};class gt extends G.define("EditorConfig",{importType:y.enum("md","html"),exportType:y.enum("html","latex","vue"),htmlCitations:y.boolean.as(y.withDefault,()=>!0),htmlMath:y.boolean.as(y.withDefault,()=>!0)},class{constructor(){return tt(this)}}){}class Jn extends jt{constructor(t){super();Ae(this,"preview",null);Ae(this,"output",null);Ae(this,"ast",null);this.config=t}getOutput(){return[{label:"Preview",name:"output",content:()=>this.preview!=null?typeof this.preview=="string"?$("div",{class:"mml-document",innerHTML:this.preview},null):typeof this.preview=="function"?$("div",{class:"mml-document"},[se.pcall(()=>He(this.preview)).else(t=>(console.error(t),null)).unwrap()]):$(yt,{node:this.preview},null):$("div",null,null)},{label:"Output",name:"raw",content:()=>$(Ct,{content:this.output??"",config:{readOnly:!0},mode:this.config.exportType=="html"?"htmlmixed":this.config.exportType=="vue"?"javascript":void 0,class:"absolute-fill"},null)},{label:"AST",name:"ast",content:()=>this.ast&&$("pre",{class:"monospace pre-wrap m-0",innerHTML:this.ast},null)}]}_compile(t){this.output=null,this.preview=null,this.ast=null;let r;const i=Ie(dt);if(i.shortcuts=fn(dt.shortcuts),this.config.htmlCitations&&i.shortcuts.push(...Hn),this.config.htmlMath&&i.shortcuts.push(...Un),this.config.importType=="md")r=new zt(t,i).parseDocument();else if(this.config.importType=="html"){r=new ae(i).importHtml(t);const s=new Kn;r=s.transform(r),s.wasDropped&&ne()}else ne();if(this.ast=Re(r,{color:fe.htmlColor}),this.config.exportType=="html"){const s=new On;this.preview=this.output=s.render(r)}else if(this.config.exportType=="vue"){const s=new Oe;s.addAllowedComponent("RouterLink","Button");const u=s.render(r);this.output=u;try{this.preview=new Function("return "+u)()({RouterLink:Zt,Button:ge,h:He})}catch(l){console.error(l),this.preview=`<div class="text-danger monospace">${ke(l.message)}</div>`}}else if(this.config.exportType=="latex"){const s=new Gn;this.output=s.exportDocument(r);try{const u=(async()=>{const{HtmlGenerator:h,parse:m}=await Qt(()=>import("./latex-b83c9208.js"),["assets/latex-b83c9208.js","assets/index-7bb49475.js","assets/index-66ee9674.css"]),o=m(this.output,{generator:new h({hyphenate:!1})}),b=document.createElement("div");return b.appendChild(o.domFragment()),b})();u.catch(h=>{this.preview=`<div class="text-danger monospace">${ke(h.message)}</div>`});const l=document.createElement("iframe");l.addEventListener("load",()=>{l.contentDocument.head.innerHTML=Xn,u.then(h=>{l.contentDocument.body.innerHTML=h.innerHTML})}),l.contentDocument,l.setAttribute("class","border-none absolute-fill"),this.preview=l}catch(u){console.error(u),this.preview=`<div class="text-danger monospace">${ke(u.message)}</div>`}}this.ready=!0}}const Xn=`
    <link rel="stylesheet" type="text/css" href="/MiniML/latex/css/katex.css">
    <link rel="stylesheet" type="text/css" href="/MiniML/latex/css/article.css">
    <script src="/MiniML/latex/js/base.js"><\/script>
    <style>
        body { display: initial; }
        .body { padding: 2rem; }
    </style>
`,nr=me({name:"MiniMLEditor",setup(n,e){const t=Yt(),r=se.value(localStorage.getItem("mini-ml-editor:editor-config")).filterType("string").do(o=>gt.deserialize(JSON.parse(o))).else(o=>(console.error(o),gt.default())).unwrap(),i=new Jn(r),s=Pe({md:"Markdown",html:"HTML"});function u(){localStorage.setItem("mini-ml-editor:editor-config",JSON.stringify(r.serialize())),i.compile(i.code.value)}s.selected=r.importType,Z(()=>s.selected,o=>{r.importType=o,u()});const l=Pe({html:"HTML",latex:"LaTeX",vue:"Vue"});l.selected=r.exportType,Z(()=>l.selected,o=>{r.exportType=o,u()});function h(){t.modal(()=>$("div",{class:"flex column gap-1"},[$("h3",{class:"m-0"},[X("Config")]),$(mt,{clear:!0,class:"mt-2",label:"HTML Citations",modelValue:r.htmlCitations,"onUpdate:modelValue":o=>r.htmlCitations=o,onChange:u},null),$("small",null,[X("Enables creating a cite element by surrounding text with "),$("code",null,[X("[[")]),X(" and "),$("code",null,[X("]]")])]),$(mt,{clear:!0,class:"mt-2",label:"HTML Math",modelValue:r.htmlMath,"onUpdate:modelValue":o=>r.htmlMath=o,onChange:u},null),$("small",null,[X("Enables creating a Math element by surrounding text with "),$("code",null,["<<"]),X(" and "),$("code",null,[">>"])])]),{props:{cancelButton:"Close"}})}function m(o){o.on("paste",(b,w)=>{if(s.selected!="html"||w.clipboardData==null)return;const g=[...w.clipboardData.items].find(p=>p.type=="text/html"&&p.kind=="string");g&&(g.getAsString(p=>{o.replaceSelection(p)}),w.preventDefault())})}return()=>$(Sn,{state:i,class:"flex-fill",toolbarClass:"center-cross",mode:s.selected=="md"?"markdown":"htmlmixed",localStorageId:"mini-ml-editor",onMounted:m,root:!0},{default:()=>[$(ze,{tabs:s},null),$(vt,{icon:en,class:"mx-2"},null),$(ze,{tabs:l},null),We($(ge,{clear:!0,icon:nn,onClick:h},null),[[$e("label"),"Config"]])]})}});export{nr as MiniMLEditor,gt as _EditorConfig};
